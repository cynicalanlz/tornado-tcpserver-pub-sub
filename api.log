2018-03-24 15:37:01,316 [tornado_server.py:34] test
2018-03-24 15:37:01,316 [tornado_server.py:78] a echo tcp server is started
2018-03-24 15:37:11,761 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49352)
2018-03-24 15:37:11,764 [tornado_server.py:49] got a new message from ('127.0.0.1', 49352) - b'000000000000'
2018-03-24 15:37:11,765 [tornado_server.py:59] 130affe6-2f60-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:37:11,767 [tornado_server.py:69] client quit ('127.0.0.1', 49352)
2018-03-24 15:38:58,241 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49360)
2018-03-24 15:38:58,243 [tornado_server.py:49] got a new message from ('127.0.0.1', 49360) - b'000000000000'
2018-03-24 15:38:58,244 [tornado_server.py:59] 528267b8-2f60-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:38:58,246 [tornado_server.py:69] client quit ('127.0.0.1', 49360)
2018-03-24 15:39:15,537 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49364)
2018-03-24 15:39:15,539 [tornado_server.py:49] got a new message from ('127.0.0.1', 49364) - b'00000000000\x01'
2018-03-24 15:39:15,540 [tornado_server.py:59] 5cd17cae-2f60-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:39:15,540 [tornado_server.py:69] client quit ('127.0.0.1', 49364)
2018-03-24 15:39:19,258 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49366)
2018-03-24 15:39:19,260 [tornado_server.py:49] got a new message from ('127.0.0.1', 49366) - b'00000000000\x11'
2018-03-24 15:39:19,261 [tornado_server.py:59] 5f0956c2-2f60-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:39:19,263 [tornado_server.py:69] client quit ('127.0.0.1', 49366)
2018-03-24 15:39:32,402 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49368)
2018-03-24 15:39:32,404 [tornado_server.py:49] got a new message from ('127.0.0.1', 49368) - b'00000000000\x03'
2018-03-24 15:39:32,405 [tornado_server.py:59] 66defc8a-2f60-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:39:32,406 [tornado_server.py:69] client quit ('127.0.0.1', 49368)
2018-03-24 15:49:11,748 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49714)
2018-03-24 15:49:11,749 [tornado_server.py:49] got a new message from ('127.0.0.1', 49714) - b'0x030x030x03'
2018-03-24 15:49:11,750 [tornado_server.py:59] c02fed20-2f61-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:49:11,751 [tornado_server.py:69] client quit ('127.0.0.1', 49714)
2018-03-24 15:49:21,292 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49716)
2018-03-24 15:49:21,293 [tornado_server.py:49] got a new message from ('127.0.0.1', 49716) - b'0x030x030x03'
2018-03-24 15:49:21,294 [tornado_server.py:59] c5e039aa-2f61-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:49:21,295 [tornado_server.py:69] client quit ('127.0.0.1', 49716)
2018-03-24 15:52:53,485 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49842)
2018-03-24 15:52:53,486 [tornado_server.py:69] client quit ('127.0.0.1', 49842)
2018-03-24 15:53:19,185 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49850)
2018-03-24 15:53:19,186 [tornado_server.py:49] got a new message from ('127.0.0.1', 49850) - b'000000000000'
2018-03-24 15:53:19,187 [tornado_server.py:59] 53abec34-2f62-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:53:19,189 [tornado_server.py:69] client quit ('127.0.0.1', 49850)
2018-03-24 15:53:37,413 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 49852)
2018-03-24 15:53:37,415 [tornado_server.py:49] got a new message from ('127.0.0.1', 49852) - b'\x0100000000000'
2018-03-24 15:53:37,416 [tornado_server.py:59] 5e896898-2f62-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:53:37,418 [tornado_server.py:69] client quit ('127.0.0.1', 49852)
2018-03-24 15:58:58,401 [tornado_server.py:34] connection monitoring app started
2018-03-24 15:58:58,401 [tornado_server.py:78] a echo tcp server is started
2018-03-24 15:59:03,396 [tornado_server.py:34] connection monitoring app started
2018-03-24 15:59:03,397 [tornado_server.py:78] a echo tcp server is started
2018-03-24 15:59:23,744 [tornado_server.py:77] connection monitoring app started
2018-03-24 15:59:27,045 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50166)
2018-03-24 15:59:27,047 [tornado_server.py:48] got a new message from ('127.0.0.1', 50166) - b'\x0100000000000'
2018-03-24 15:59:27,049 [tornado_server.py:58] 2eef1ec4-2f63-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 15:59:27,050 [tornado_server.py:68] client quit ('127.0.0.1', 50166)
2018-03-24 16:01:31,024 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50280)
2018-03-24 16:01:31,026 [tornado_server.py:68] client quit ('127.0.0.1', 50280)
2018-03-24 16:01:35,972 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50282)
2018-03-24 16:01:35,974 [tornado_server.py:68] client quit ('127.0.0.1', 50282)
2018-03-24 16:02:17,083 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50286)
2018-03-24 16:02:17,087 [tornado_server.py:68] client quit ('127.0.0.1', 50286)
2018-03-24 16:03:12,029 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50328)
2018-03-24 16:03:12,033 [tornado_server.py:68] client quit ('127.0.0.1', 50328)
2018-03-24 16:04:02,931 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50352)
2018-03-24 16:04:02,933 [tornado_server.py:68] client quit ('127.0.0.1', 50352)
2018-03-24 16:04:17,501 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50354)
2018-03-24 16:04:17,502 [tornado_server.py:48] got a new message from ('127.0.0.1', 50354) - b'123123123123'
2018-03-24 16:04:17,502 [tornado_server.py:58] dc0ecf5a-2f63-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:04:17,503 [tornado_server.py:68] client quit ('127.0.0.1', 50354)
2018-03-24 16:04:50,622 [tornado_server.py:77] connection monitoring app started
2018-03-24 16:04:56,325 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50358)
2018-03-24 16:04:56,328 [tornado_server.py:48] got a new message from ('127.0.0.1', 50358) - b'123123123123'
2018-03-24 16:04:56,330 [tornado_server.py:58] f3335c50-2f63-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:07:28,972 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50388)
2018-03-24 16:08:02,893 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50390)
2018-03-24 16:08:05,019 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50392)
2018-03-24 16:08:07,259 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50394)
2018-03-24 16:10:25,231 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50578)
2018-03-24 16:10:25,233 [tornado_server.py:48] got a new message from ('127.0.0.1', 50578) - b'123123123123'
2018-03-24 16:10:25,234 [tornado_server.py:58] b73e45d8-2f64-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:10:26,214 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50580)
2018-03-24 16:10:26,216 [tornado_server.py:48] got a new message from ('127.0.0.1', 50580) - b'123123123123'
2018-03-24 16:10:26,217 [tornado_server.py:58] b73e45d9-2f64-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:12:26,291 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50736)
2018-03-24 16:20:34,451 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50912)
2018-03-24 16:20:34,453 [tornado_server.py:48] got a new message from ('127.0.0.1', 50912) - b'123123123123'
2018-03-24 16:20:34,453 [tornado_server.py:58] 225db97e-2f66-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:20:42,262 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50914)
2018-03-24 16:20:42,263 [tornado_server.py:48] got a new message from ('127.0.0.1', 50914) - b'123123123123'
2018-03-24 16:20:42,265 [tornado_server.py:58] 2705991a-2f66-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:21:15,147 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50932)
2018-03-24 16:21:15,149 [tornado_server.py:48] got a new message from ('127.0.0.1', 50932) - b'123123123123'
2018-03-24 16:21:15,150 [tornado_server.py:58] 3a9f8ab2-2f66-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:22:36,896 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50974)
2018-03-24 16:22:36,898 [tornado_server.py:48] got a new message from ('127.0.0.1', 50974) - b'123123123123'
2018-03-24 16:22:36,899 [tornado_server.py:58] 6b597140-2f66-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:22:57,382 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 50976)
2018-03-24 16:22:57,384 [tornado_server.py:48] got a new message from ('127.0.0.1', 50976) - b'123123123123'
2018-03-24 16:22:57,385 [tornado_server.py:58] 778f601e-2f66-11e8-9a6f-18d6c71cb844 authenticated

2018-03-24 16:38:32,453 [tornado_server.py:77] connection monitoring app started
2018-03-24 16:38:35,155 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 41876)
2018-03-24 16:38:35,158 [tornado_server.py:48] got a new message from ('127.0.0.1', 41876) - b'123123123123'
2018-03-24 16:38:35,170 [tornado_server.py:58] a685e602-2f68-11e8-996a-18d6c71cb844 authenticated

2018-03-24 16:39:28,062 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 41896)
2018-03-24 16:39:28,063 [tornado_server.py:48] got a new message from ('127.0.0.1', 41896) - b'123123123123'
2018-03-24 16:39:28,064 [tornado_server.py:58] c60cffce-2f68-11e8-996a-18d6c71cb844 authenticated

2018-03-24 16:39:37,024 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 41898)
2018-03-24 16:39:37,025 [tornado_server.py:48] got a new message from ('127.0.0.1', 41898) - b'123123123123'
2018-03-24 16:39:37,025 [tornado_server.py:58] cb64562a-2f68-11e8-996a-18d6c71cb844 authenticated

2018-03-24 16:45:52,100 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42020)
2018-03-24 16:45:52,101 [tornado_server.py:48] got a new message from ('127.0.0.1', 42020) - b'123123123123'
2018-03-24 16:45:52,103 [tornado_server.py:58] aaf49df4-2f69-11e8-996a-18d6c71cb844 authenticated

2018-03-24 16:48:23,012 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42032)
2018-03-24 16:48:23,014 [tornado_server.py:48] got a new message from ('127.0.0.1', 42032) - b'123123123123'
2018-03-24 16:48:23,015 [tornado_server.py:58] 04e81110-2f6a-11e8-996a-18d6c71cb844 authenticated

2018-03-24 16:48:30,429 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42034)
2018-03-24 16:48:30,431 [tornado_server.py:48] got a new message from ('127.0.0.1', 42034) - b'123123123123'
2018-03-24 16:48:30,433 [tornado_server.py:58] 0953d482-2f6a-11e8-996a-18d6c71cb844 authenticated

2018-03-24 16:54:06,103 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42182)
2018-03-24 16:54:29,023 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42186)
2018-03-24 16:54:35,788 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42188)
2018-03-24 16:55:35,707 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42192)
2018-03-24 16:55:45,387 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42194)
2018-03-24 16:56:02,030 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42200)
2018-03-24 16:56:06,617 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42202)
2018-03-24 17:27:57,263 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42416)
2018-03-24 17:27:58,560 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42418)
2018-03-24 17:27:58,561 [tornado_server.py:48] got a new message from ('127.0.0.1', 42418) - b'123123123123'
2018-03-24 17:27:58,562 [tornado_server.py:58] 8cd7b5b2-2f6f-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:28:35,123 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42424)
2018-03-24 17:28:35,125 [tornado_server.py:48] got a new message from ('127.0.0.1', 42424) - b'123123123123'
2018-03-24 17:28:35,126 [tornado_server.py:58] a2a2f622-2f6f-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:28:46,153 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42428)
2018-03-24 17:28:46,154 [tornado_server.py:48] got a new message from ('127.0.0.1', 42428) - b'123123123123'
2018-03-24 17:28:46,155 [tornado_server.py:58] a935de46-2f6f-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:30:50,202 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42454)
2018-03-24 17:30:52,723 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42456)
2018-03-24 17:31:06,002 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42458)
2018-03-24 17:31:06,004 [tornado_server.py:48] got a new message from ('127.0.0.1', 42458) - b'123123123123'
2018-03-24 17:31:06,005 [tornado_server.py:58] fc913d2e-2f6f-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:31:21,477 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42460)
2018-03-24 17:31:21,478 [tornado_server.py:48] got a new message from ('127.0.0.1', 42460) - b'123123123123'
2018-03-24 17:31:21,480 [tornado_server.py:58] 05ca817a-2f70-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:32:01,856 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42472)
2018-03-24 17:32:01,858 [tornado_server.py:48] got a new message from ('127.0.0.1', 42472) - b'123123123123'
2018-03-24 17:32:01,859 [tornado_server.py:58] 1ddbf3d4-2f70-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:33:00,609 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42476)
2018-03-24 17:33:00,611 [tornado_server.py:48] got a new message from ('127.0.0.1', 42476) - b'123123123123'
2018-03-24 17:33:00,612 [tornado_server.py:58] 40e0e614-2f70-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:33:12,230 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42478)
2018-03-24 17:33:12,232 [tornado_server.py:48] got a new message from ('127.0.0.1', 42478) - b'123123123123'
2018-03-24 17:33:12,233 [tornado_server.py:58] 47ce2d60-2f70-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:33:33,523 [tornado_server.py:77] connection monitoring app started
2018-03-24 17:33:37,805 [tornado_server.py:77] connection monitoring app started
2018-03-24 17:33:40,469 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42484)
2018-03-24 17:33:40,470 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 83, in handle_stream
    Connection(stream, address, conns)
  File "tornado_server.py", line 45, in __init__
    self.stream.read(12, self._on_read)
AttributeError: 'IOStream' object has no attribute 'read'
2018-03-24 17:36:34,134 [tornado_server.py:77] connection monitoring app started
2018-03-24 17:36:36,953 [tornado_server.py:77] connection monitoring app started
2018-03-24 17:36:46,869 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42704)
2018-03-24 17:36:46,871 [tornado_server.py:48] got a new message from ('127.0.0.1', 42704) - b'123123123123'
2018-03-24 17:36:46,872 [tornado_server.py:58] c7bd661c-2f70-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:39:15,393 [tornado_server.py:77] connection monitoring app started
2018-03-24 17:39:23,973 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42754)
2018-03-24 17:39:23,975 [tornado_server.py:48] got a new message from ('127.0.0.1', 42754) - b'123123123123'
2018-03-24 17:39:23,976 [tornado_server.py:58] 256198f6-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:39:27,699 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42756)
2018-03-24 17:39:27,701 [tornado_server.py:48] got a new message from ('127.0.0.1', 42756) - b'123123123123'
2018-03-24 17:39:27,702 [tornado_server.py:58] 279a29bc-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:39:28,654 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42758)
2018-03-24 17:39:28,656 [tornado_server.py:48] got a new message from ('127.0.0.1', 42758) - b'123123123123'
2018-03-24 17:39:28,657 [tornado_server.py:58] 279a29bd-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:39:54,628 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42762)
2018-03-24 17:39:54,629 [tornado_server.py:48] got a new message from ('127.0.0.1', 42762) - b'123123123123'
2018-03-24 17:39:54,630 [tornado_server.py:58] 37a71018-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:39:57,165 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42764)
2018-03-24 17:39:57,166 [tornado_server.py:48] got a new message from ('127.0.0.1', 42764) - b'123123123123'
2018-03-24 17:39:57,170 [tornado_server.py:58] 392a9f40-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:39:57,789 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42766)
2018-03-24 17:39:57,790 [tornado_server.py:48] got a new message from ('127.0.0.1', 42766) - b'123123123123'
2018-03-24 17:39:57,790 [tornado_server.py:58] 392a9f41-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:39:59,306 [tornado_server.py:77] connection monitoring app started
2018-03-24 17:40:03,021 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42772)
2018-03-24 17:40:03,024 [tornado_server.py:48] got a new message from ('127.0.0.1', 42772) - b'123123123123'
2018-03-24 17:40:03,026 [tornado_server.py:58] 3ca81616-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:40:03,027 [tornado_server.py:68] client quit ('127.0.0.1', 42772) - 3ca81616-2f71-11e8-996a-18d6c71cb844
2018-03-24 17:40:18,493 [tornado_server.py:38] receive a new connection from ('127.0.0.1', 42774)
2018-03-24 17:40:18,494 [tornado_server.py:48] got a new message from ('127.0.0.1', 42774) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:40:18,495 [tornado_server.py:58] 45e08c36-2f71-11e8-996a-18d6c71cb844 authenticated

2018-03-24 17:40:18,497 [tornado_server.py:68] client quit ('127.0.0.1', 42774) - 45e08c36-2f71-11e8-996a-18d6c71cb844
2018-03-24 17:52:39,842 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:52:46,851 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:52:48,240 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43080)
2018-03-24 17:52:48,242 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 91, in handle_stream
    Connection(stream, address, conns)
  File "tornado_server.py", line 46, in __init__
    self.stream.read_bytes(12, self._on_read, partial=True)
AttributeError: 'Connection' object has no attribute '_on_read'
2018-03-24 17:53:01,084 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:53:06,472 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43082)
2018-03-24 17:53:06,475 [tornado_server.py:50] got a new message from ('127.0.0.1', 43082) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:53:06,476 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',data[1:2])
struct.error: unpack requires a bytes object of length 2
2018-03-24 17:53:06,480 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f1a7cd09d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',data[1:2])
struct.error: unpack requires a bytes object of length 2
2018-03-24 17:53:06,485 [tornado_server.py:76] client quit ('127.0.0.1', 43082) - None
2018-03-24 17:53:59,574 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43086)
2018-03-24 17:53:59,575 [tornado_server.py:50] got a new message from ('127.0.0.1', 43086) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:53:59,576 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',data[1:2])
struct.error: unpack requires a bytes object of length 2
2018-03-24 17:53:59,577 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f1a7ce58400>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',data[1:2])
struct.error: unpack requires a bytes object of length 2
2018-03-24 17:53:59,579 [tornado_server.py:76] client quit ('127.0.0.1', 43086) - None
2018-03-24 17:54:34,042 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:54:36,216 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43088)
2018-03-24 17:54:36,218 [tornado_server.py:50] got a new message from ('127.0.0.1', 43088) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:54:36,218 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:54:36,221 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f8e8a351d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:54:36,223 [tornado_server.py:76] client quit ('127.0.0.1', 43088) - None
2018-03-24 17:55:26,189 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:55:29,816 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43094)
2018-03-24 17:55:29,819 [tornado_server.py:50] got a new message from ('127.0.0.1', 43094) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:55:29,820 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:55:29,824 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f10b28f9d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:55:29,826 [tornado_server.py:76] client quit ('127.0.0.1', 43094) - None
2018-03-24 17:56:00,753 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:56:03,961 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:56:04,401 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43100)
2018-03-24 17:56:04,404 [tornado_server.py:50] got a new message from ('127.0.0.1', 43100) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:56:04,405 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:56:04,409 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f81d87a0d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:56:04,413 [tornado_server.py:76] client quit ('127.0.0.1', 43100) - None
2018-03-24 17:56:12,346 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:56:16,688 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43102)
2018-03-24 17:56:16,691 [tornado_server.py:50] got a new message from ('127.0.0.1', 43102) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:56:16,692 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:56:16,695 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff248649d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:56:16,699 [tornado_server.py:76] client quit ('127.0.0.1', 43102) - None
2018-03-24 17:56:30,108 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:56:34,011 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43104)
2018-03-24 17:56:34,014 [tornado_server.py:50] got a new message from ('127.0.0.1', 43104) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:56:34,015 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:56:34,020 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2803701d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 52, in _on_read_header
    message_number = struct.unpack('>H',)
TypeError: unpack expected 2 arguments, got 1
2018-03-24 17:56:34,023 [tornado_server.py:76] client quit ('127.0.0.1', 43104) - None
2018-03-24 17:59:16,789 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:59:20,841 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:59:26,437 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:59:28,603 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43122)
2018-03-24 17:59:43,395 [tornado_server.py:85] connection monitoring app started
2018-03-24 17:59:45,198 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43140)
2018-03-24 17:59:45,202 [tornado_server.py:50] got a new message from ('127.0.0.1', 43140) - b'\x01\x00\x01valera01\x02'
2018-03-24 17:59:45,203 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 54, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 17:59:45,208 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f202e977d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 54, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 17:59:45,211 [tornado_server.py:76] client quit ('127.0.0.1', 43140) - None
2018-03-24 18:00:00,903 [tornado_server.py:86] connection monitoring app started
2018-03-24 18:00:02,488 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43144)
2018-03-24 18:00:02,491 [tornado_server.py:50] got a new message from ('127.0.0.1', 43144) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:00:02,492 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:00:02,498 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fa13b3b9d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:00:02,499 [tornado_server.py:77] client quit ('127.0.0.1', 43144) - None
2018-03-24 18:00:21,797 [tornado_server.py:86] connection monitoring app started
2018-03-24 18:00:24,246 [tornado_server.py:86] connection monitoring app started
2018-03-24 18:00:26,202 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43150)
2018-03-24 18:00:26,205 [tornado_server.py:50] got a new message from ('127.0.0.1', 43150) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:00:26,207 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:00:26,211 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f662bb95d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:00:26,213 [tornado_server.py:77] client quit ('127.0.0.1', 43150) - None
2018-03-24 18:01:09,365 [tornado_server.py:86] connection monitoring app started
2018-03-24 18:01:11,449 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43158)
2018-03-24 18:01:11,452 [tornado_server.py:50] got a new message from ('127.0.0.1', 43158) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:01:11,453 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:01:11,457 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f0426e94d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = struct.unpack('>B',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:01:11,459 [tornado_server.py:77] client quit ('127.0.0.1', 43158) - None
2018-03-24 18:02:21,211 [tornado_server.py:86] connection monitoring app started
2018-03-24 18:02:23,003 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43164)
2018-03-24 18:02:23,005 [tornado_server.py:50] got a new message from ('127.0.0.1', 43164) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:02:23,005 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = int(data[12])
IndexError: index out of range
2018-03-24 18:02:23,008 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f8cc81bbd90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    status = int(data[12])
IndexError: index out of range
2018-03-24 18:02:23,010 [tornado_server.py:77] client quit ('127.0.0.1', 43164) - None
2018-03-24 18:02:40,097 [tornado_server.py:85] connection monitoring app started
2018-03-24 18:02:41,472 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43166)
2018-03-24 18:02:41,475 [tornado_server.py:50] got a new message from ('127.0.0.1', 43166) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:02:41,476 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    print(data[12])
IndexError: index out of range
2018-03-24 18:02:41,480 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f42aa415d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    print(data[12])
IndexError: index out of range
2018-03-24 18:02:41,481 [tornado_server.py:76] client quit ('127.0.0.1', 43166) - None
2018-03-24 18:03:00,605 [tornado_server.py:85] connection monitoring app started
2018-03-24 18:03:02,372 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43168)
2018-03-24 18:03:02,374 [tornado_server.py:50] got a new message from ('127.0.0.1', 43168) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:03:02,375 [tornado_server.py:65] 72d01038-2f74-11e8-996a-18d6c71cb844 authenticated

2018-03-24 18:03:02,377 [tornado_server.py:76] client quit ('127.0.0.1', 43168) - 72d01038-2f74-11e8-996a-18d6c71cb844
2018-03-24 18:04:40,141 [tornado_server.py:84] connection monitoring app started
2018-03-24 18:04:44,252 [tornado_server.py:84] connection monitoring app started
2018-03-24 18:04:45,782 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43174)
2018-03-24 18:04:45,785 [tornado_server.py:50] got a new message from ('127.0.0.1', 43174) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:04:45,786 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 54, in _on_read_header
    status = struct.unpack('>H',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:04:45,791 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2ccfa9ad90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 54, in _on_read_header
    status = struct.unpack('>H',data[11])
TypeError: a bytes-like object is required, not 'int'
2018-03-24 18:04:45,794 [tornado_server.py:75] client quit ('127.0.0.1', 43174) - None
2018-03-24 18:05:02,051 [tornado_server.py:85] connection monitoring app started
2018-03-24 18:05:05,608 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43176)
2018-03-24 18:05:05,612 [tornado_server.py:50] got a new message from ('127.0.0.1', 43176) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:05:05,613 [tornado_server.py:65] bc44c0ce-2f74-11e8-996a-18d6c71cb844 authenticated

2018-03-24 18:05:05,615 [tornado_server.py:76] client quit ('127.0.0.1', 43176) - bc44c0ce-2f74-11e8-996a-18d6c71cb844
2018-03-24 18:07:00,824 [tornado_server.py:91] connection monitoring app started
2018-03-24 18:07:02,698 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43182)
2018-03-24 18:07:02,701 [tornado_server.py:50] got a new message from ('127.0.0.1', 43182) - b'\x01\x00\x01valera01\x02'
2018-03-24 18:07:02,702 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    messages_num = data[12]
IndexError: index out of range
2018-03-24 18:07:02,706 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fd44d725d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 55, in _on_read_header
    messages_num = data[12]
IndexError: index out of range
2018-03-24 18:07:02,708 [tornado_server.py:82] client quit ('127.0.0.1', 43182) - None
2018-03-24 18:07:13,805 [tornado_server.py:91] connection monitoring app started
2018-03-24 18:07:15,729 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43184)
2018-03-24 18:07:15,733 [tornado_server.py:50] got a new message from ('127.0.0.1', 43184) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:07:15,733 [tornado_server.py:60] msg_num: %s, uid: %s, status: %s, messages_num: %s
2018-03-24 18:07:15,735 [tornado_server.py:71] 09d3b278-2f75-11e8-996a-18d6c71cb844 authenticated

2018-03-24 18:07:15,737 [tornado_server.py:82] client quit ('127.0.0.1', 43184) - 09d3b278-2f75-11e8-996a-18d6c71cb844
2018-03-24 18:07:43,464 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43186)
2018-03-24 18:07:43,465 [tornado_server.py:50] got a new message from ('127.0.0.1', 43186) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:07:43,466 [tornado_server.py:60] msg_num: %s, uid: %s, status: %s, messages_num: %s
2018-03-24 18:07:43,466 [tornado_server.py:71] 1a5b35bc-2f75-11e8-996a-18d6c71cb844 authenticated

2018-03-24 18:07:43,468 [tornado_server.py:82] client quit ('127.0.0.1', 43186) - 1a5b35bc-2f75-11e8-996a-18d6c71cb844
2018-03-24 18:07:46,838 [tornado_server.py:91] connection monitoring app started
2018-03-24 18:07:48,148 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43188)
2018-03-24 18:07:48,151 [tornado_server.py:50] got a new message from ('127.0.0.1', 43188) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:07:48,151 [tornado_server.py:60] msg_num: (1,), uid: valera01, status: 2, messages_num: 1
2018-03-24 18:07:48,152 [tornado_server.py:71] 1d263d64-2f75-11e8-996a-18d6c71cb844 authenticated

2018-03-24 18:07:48,153 [tornado_server.py:82] client quit ('127.0.0.1', 43188) - 1d263d64-2f75-11e8-996a-18d6c71cb844
2018-03-24 18:08:05,405 [tornado_server.py:91] connection monitoring app started
2018-03-24 18:08:11,592 [tornado_server.py:91] connection monitoring app started
2018-03-24 18:08:17,146 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 43194)
2018-03-24 18:08:17,149 [tornado_server.py:50] got a new message from ('127.0.0.1', 43194) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:08:17,150 [tornado_server.py:60] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:08:17,151 [tornado_server.py:71] 2e6f130c-2f75-11e8-996a-18d6c71cb844 authenticated

2018-03-24 18:08:17,152 [tornado_server.py:82] client quit ('127.0.0.1', 43194) - 2e6f130c-2f75-11e8-996a-18d6c71cb844
2018-03-24 18:38:26,114 [tornado_server.py:92] connection monitoring app started
2018-03-24 18:38:26,116 [tornado_server.py:39] receive a new connection from ('127.0.0.1', 37546)
2018-03-24 18:38:26,117 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in handle_stream
    Connection(stream, address, conns)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 47, in __init__
    self.last_message_time = int(round(time.time() * 1000))
NameError: name 'time' is not defined
2018-03-24 18:38:26,119 [tornado_server.py:51] got a new message from ('127.0.0.1', 37546) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:38:26,119 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 60, in _on_read_header
    message_number,
NameError: name 'message_number' is not defined
2018-03-24 18:38:26,121 [tornado_server.py:85] client quit ('127.0.0.1', 37546) - None
2018-03-24 18:39:14,762 [tornado_server.py:93] connection monitoring app started
2018-03-24 18:39:14,763 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 51478)
2018-03-24 18:39:14,765 [tornado_server.py:52] got a new message from ('127.0.0.1', 51478) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:39:14,766 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 61, in _on_read_header
    message_number,
NameError: name 'message_number' is not defined
2018-03-24 18:39:14,768 [tornado_server.py:86] client quit ('127.0.0.1', 51478) - None
2018-03-24 18:41:32,859 [tornado_server.py:93] connection monitoring app started
2018-03-24 18:41:32,861 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 52596)
2018-03-24 18:41:32,863 [tornado_server.py:52] got a new message from ('127.0.0.1', 52596) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:41:32,864 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:41:32,864 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 68, in _on_read_header
    self.connections[uid] = self
NameError: name 'uid' is not defined
2018-03-24 18:41:32,866 [tornado_server.py:86] client quit ('127.0.0.1', 52596) - None
2018-03-24 18:42:44,227 [tornado_server.py:92] connection monitoring app started
2018-03-24 18:42:44,229 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 50998)
2018-03-24 18:42:44,231 [tornado_server.py:52] got a new message from ('127.0.0.1', 50998) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:42:44,231 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:42:44,231 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 68, in _on_read_header
    self.connections[uid] = self
NameError: name 'uid' is not defined
2018-03-24 18:42:44,233 [tornado_server.py:85] client quit ('127.0.0.1', 50998) - None
2018-03-24 18:43:09,599 [tornado_server.py:92] connection monitoring app started
2018-03-24 18:43:09,601 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 41048)
2018-03-24 18:43:09,603 [tornado_server.py:52] got a new message from ('127.0.0.1', 41048) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:43:09,603 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:43:09,604 [tornado_server.py:70] None authenticated

2018-03-24 18:43:09,604 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 72, in _on_read_header
    if messages_num > 0:
NameError: name 'messages_num' is not defined
2018-03-24 18:43:09,606 [tornado_server.py:85] client quit ('127.0.0.1', 41048) - None
2018-03-24 18:43:18,406 [tornado_server.py:92] connection monitoring app started
2018-03-24 18:43:18,407 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 59984)
2018-03-24 18:43:18,409 [tornado_server.py:52] got a new message from ('127.0.0.1', 59984) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:43:18,410 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:43:18,410 [tornado_server.py:70] None authenticated

2018-03-24 18:43:18,410 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 73, in _on_read_header
    self.stream.read_bytes(messages_num*12, self._on_read_messages)
NameError: name 'messages_num' is not defined
2018-03-24 18:43:18,412 [tornado_server.py:85] client quit ('127.0.0.1', 59984) - None
2018-03-24 18:45:32,209 [tornado_server.py:92] connection monitoring app started
2018-03-24 18:45:32,211 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 34076)
2018-03-24 18:45:32,213 [tornado_server.py:52] got a new message from ('127.0.0.1', 34076) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:45:32,213 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:45:32,213 [tornado_server.py:70] None authenticated

2018-03-24 18:45:32,214 [tornado_server.py:76] got a new message from ('127.0.0.1', 34076) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:48:21,042 [tornado_server.py:94] connection monitoring app started
2018-03-24 18:48:21,044 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 41826)
2018-03-24 18:48:21,045 [tornado_server.py:53] got a new message from ('127.0.0.1', 41826) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:48:21,046 [tornado_server.py:65] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:48:21,046 [tornado_server.py:71] None authenticated

2018-03-24 18:48:21,046 [tornado_server.py:78] got a new message from ('127.0.0.1', 41826) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:50:04,324 [tornado_server.py:96] connection monitoring app started
2018-03-24 18:50:04,325 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 43124)
2018-03-24 18:50:04,327 [tornado_server.py:53] got a new message from ('127.0.0.1', 43124) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:50:04,328 [tornado_server.py:65] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:50:04,328 [tornado_server.py:71] None authenticated

2018-03-24 18:50:04,328 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 76, in _on_read_header
    field_value = struct.pack('>L', data[9:12])
struct.error: required argument is not an integer
2018-03-24 18:50:04,330 [tornado_server.py:80] got a new message from ('127.0.0.1', 43124) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:50:04,331 [tornado_server.py:89] client quit ('127.0.0.1', 43124) - None
2018-03-24 18:50:44,248 [tornado_server.py:96] connection monitoring app started
2018-03-24 18:50:44,250 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 50366)
2018-03-24 18:50:44,251 [tornado_server.py:53] got a new message from ('127.0.0.1', 50366) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:50:44,252 [tornado_server.py:65] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:50:44,252 [tornado_server.py:71] None authenticated

2018-03-24 18:50:44,252 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 76, in _on_read_header
    field_value = struct.unpack('>L', data[9:12])
struct.error: unpack requires a bytes object of length 4
2018-03-24 18:50:44,254 [tornado_server.py:80] got a new message from ('127.0.0.1', 50366) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:50:44,255 [tornado_server.py:89] client quit ('127.0.0.1', 50366) - None
2018-03-24 18:50:51,975 [tornado_server.py:96] connection monitoring app started
2018-03-24 18:50:51,977 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 52240)
2018-03-24 18:50:51,978 [tornado_server.py:53] got a new message from ('127.0.0.1', 52240) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:50:51,979 [tornado_server.py:65] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:50:51,979 [tornado_server.py:71] None authenticated

2018-03-24 18:50:51,980 [tornado_server.py:80] got a new message from ('127.0.0.1', 52240) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:51:13,358 [tornado_server.py:95] connection monitoring app started
2018-03-24 18:51:13,359 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 44612)
2018-03-24 18:51:13,361 [tornado_server.py:52] got a new message from ('127.0.0.1', 44612) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:51:13,362 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:51:13,362 [tornado_server.py:70] valera01 authenticated

2018-03-24 18:51:13,362 [tornado_server.py:79] got a new message from ('127.0.0.1', 44612) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:52:24,535 [tornado_server.py:95] connection monitoring app started
2018-03-24 18:52:24,537 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 38174)
2018-03-24 18:52:24,539 [tornado_server.py:52] got a new message from ('127.0.0.1', 38174) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:52:24,539 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:52:24,539 [tornado_server.py:70] valera01 authenticated

2018-03-24 18:52:24,540 [tornado_server.py:79] got a new message from ('127.0.0.1', 38174) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:52:50,862 [tornado_server.py:95] connection monitoring app started
2018-03-24 18:52:50,864 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 33670)
2018-03-24 18:52:50,866 [tornado_server.py:52] got a new message from ('127.0.0.1', 33670) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:52:50,866 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:52:50,866 [tornado_server.py:70] valera01 authenticated

2018-03-24 18:52:50,867 [tornado_server.py:79] got a new message from ('127.0.0.1', 33670) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 18:53:58,302 [tornado_server.py:95] connection monitoring app started
2018-03-24 18:53:58,304 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 42154)
2018-03-24 18:53:58,306 [tornado_server.py:52] got a new message from ('127.0.0.1', 42154) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:53:58,306 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:53:58,306 [tornado_server.py:70] valera01 authenticated

2018-03-24 18:56:54,355 [tornado_server.py:95] connection monitoring app started
2018-03-24 18:56:54,357 [tornado_server.py:40] receive a new connection from ('127.0.0.1', 59922)
2018-03-24 18:56:54,359 [tornado_server.py:52] got a new message from ('127.0.0.1', 59922) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 18:56:54,360 [tornado_server.py:64] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 18:56:54,360 [tornado_server.py:70] valera01 authenticated

2018-03-24 19:07:48,361 [tornado_server.py:119] connection monitoring app started
2018-03-24 19:07:48,363 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 40792)
2018-03-24 19:07:48,365 [tornado_server.py:58] got a new message from ('127.0.0.1', 40792) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:07:48,365 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:07:48,365 [tornado_server.py:77] valera01 authenticated

2018-03-24 19:07:58,195 [tornado_server.py:119] connection monitoring app started
2018-03-24 19:07:58,197 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 35994)
2018-03-24 19:07:58,199 [tornado_server.py:58] got a new message from ('127.0.0.1', 35994) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:07:58,200 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:07:58,200 [tornado_server.py:77] valera01 authenticated

2018-03-24 19:08:15,401 [tornado_server.py:119] connection monitoring app started
2018-03-24 19:08:15,402 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 37376)
2018-03-24 19:08:15,404 [tornado_server.py:58] got a new message from ('127.0.0.1', 37376) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:08:15,405 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:08:15,405 [tornado_server.py:77] valera01 authenticated

2018-03-24 19:08:43,655 [tornado_server.py:119] connection monitoring app started
2018-03-24 19:08:43,657 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 59916)
2018-03-24 19:08:43,659 [tornado_server.py:58] got a new message from ('127.0.0.1', 59916) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:08:43,659 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:08:43,660 [tornado_server.py:77] valera01 authenticated

2018-03-24 19:09:10,923 [tornado_server.py:107] connection monitoring app started
2018-03-24 19:09:10,925 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 38052)
2018-03-24 19:09:10,927 [tornado_server.py:58] got a new message from ('127.0.0.1', 38052) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:09:10,927 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:09:10,928 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:09:10,928 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 80, in _on_read_header
    struct.pack('>H', self.messages_number)
AttributeError: 'Connection' object has no attribute 'messages_number'
2018-03-24 19:09:10,929 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f4ba1e10598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 80, in _on_read_header
    struct.pack('>H', self.messages_number)
AttributeError: 'Connection' object has no attribute 'messages_number'
2018-03-24 19:09:30,461 [tornado_server.py:107] connection monitoring app started
2018-03-24 19:09:30,462 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 33988)
2018-03-24 19:09:30,465 [tornado_server.py:58] got a new message from ('127.0.0.1', 33988) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:09:30,465 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:09:30,465 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:09:30,466 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 85, in _on_read_header
    msg = b''.join(msg)
TypeError: sequence item 2: expected a bytes-like object, int found
2018-03-24 19:09:30,467 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f8f5b9d4598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 85, in _on_read_header
    msg = b''.join(msg)
TypeError: sequence item 2: expected a bytes-like object, int found
2018-03-24 19:10:13,973 [tornado_server.py:107] connection monitoring app started
2018-03-24 19:10:25,146 [tornado_server.py:107] connection monitoring app started
2018-03-24 19:10:25,148 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 35380)
2018-03-24 19:10:25,150 [tornado_server.py:58] got a new message from ('127.0.0.1', 35380) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:10:25,150 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:10:25,151 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:11:12,704 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:11:12,706 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 45510)
2018-03-24 19:11:12,708 [tornado_server.py:58] got a new message from ('127.0.0.1', 45510) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:11:12,709 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:11:12,709 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:11:30,109 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:11:45,994 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:11:45,995 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 48814)
2018-03-24 19:11:45,998 [tornado_server.py:58] got a new message from ('127.0.0.1', 48814) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:11:45,998 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:11:45,998 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:12:09,945 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:12:09,947 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 34004)
2018-03-24 19:12:09,949 [tornado_server.py:58] got a new message from ('127.0.0.1', 34004) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:12:09,950 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:12:09,950 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:12:34,588 [tornado_server.py:109] connection monitoring app started
2018-03-24 19:12:34,590 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 50838)
2018-03-24 19:12:34,592 [tornado_server.py:58] got a new message from ('127.0.0.1', 50838) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:12:34,592 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:12:34,593 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:14:07,108 [tornado_server.py:109] connection monitoring app started
2018-03-24 19:14:07,109 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 38824)
2018-03-24 19:14:07,112 [tornado_server.py:58] got a new message from ('127.0.0.1', 38824) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:14:07,112 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:14:07,112 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:18:10,057 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:18:20,443 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:18:20,445 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 42792)
2018-03-24 19:18:20,447 [tornado_server.py:58] got a new message from ('127.0.0.1', 42792) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:18:20,447 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:18:20,448 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:18:20,448 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = bytes_array(msg_xor)
NameError: name 'bytes_array' is not defined
2018-03-24 19:18:20,449 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f14bc2af598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = bytes_array(msg_xor)
NameError: name 'bytes_array' is not defined
2018-03-24 19:18:26,939 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:18:26,941 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 56994)
2018-03-24 19:18:26,943 [tornado_server.py:58] got a new message from ('127.0.0.1', 56994) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:18:26,943 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:18:26,943 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:18:26,944 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = bytesarray(msg_xor)
NameError: name 'bytesarray' is not defined
2018-03-24 19:18:26,945 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f636fc8c598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = bytesarray(msg_xor)
NameError: name 'bytesarray' is not defined
2018-03-24 19:18:41,116 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:18:41,117 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 41424)
2018-03-24 19:18:41,119 [tornado_server.py:58] got a new message from ('127.0.0.1', 41424) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:18:41,120 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:18:41,120 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:23:15,862 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:23:15,864 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 34860)
2018-03-24 19:23:15,866 [tornado_server.py:58] got a new message from ('127.0.0.1', 34860) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:23:15,866 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:23:15,866 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:30:30,208 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:30:30,210 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 40162)
2018-03-24 19:30:30,212 [tornado_server.py:58] got a new message from ('127.0.0.1', 40162) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:30:30,212 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:30:30,212 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:31:48,642 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:31:48,643 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 34844)
2018-03-24 19:31:48,645 [tornado_server.py:58] got a new message from ('127.0.0.1', 34844) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:31:48,646 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:31:48,646 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:31:48,646 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: ord() expected string of length 1, but int found
2018-03-24 19:31:48,648 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fd9e6fc6598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: ord() expected string of length 1, but int found
2018-03-24 19:32:02,658 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:32:02,660 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 34392)
2018-03-24 19:32:02,662 [tornado_server.py:58] got a new message from ('127.0.0.1', 34392) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:32:02,663 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:32:02,663 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:32:22,473 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:32:22,475 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 43296)
2018-03-24 19:32:22,477 [tornado_server.py:58] got a new message from ('127.0.0.1', 43296) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:32:22,478 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:32:22,478 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:32:22,478 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = bytearray(msg_xor.split())
TypeError: an integer is required
2018-03-24 19:32:22,480 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2a7d876598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = bytearray(msg_xor.split())
TypeError: an integer is required
2018-03-24 19:32:41,880 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:32:41,882 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 51888)
2018-03-24 19:32:41,884 [tornado_server.py:58] got a new message from ('127.0.0.1', 51888) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:32:41,885 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:32:41,885 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:32:41,885 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = msg_xor.split('')
TypeError: a bytes-like object is required, not 'str'
2018-03-24 19:32:41,887 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff4de9cf598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = msg_xor.split('')
TypeError: a bytes-like object is required, not 'str'
2018-03-24 19:32:51,158 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:32:51,160 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 58898)
2018-03-24 19:32:51,162 [tornado_server.py:58] got a new message from ('127.0.0.1', 58898) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:32:51,162 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:32:51,162 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:32:51,163 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'bytes'
2018-03-24 19:32:51,165 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f128074f598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'bytes'
2018-03-24 19:33:21,171 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:33:21,172 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 48604)
2018-03-24 19:33:21,174 [tornado_server.py:58] got a new message from ('127.0.0.1', 48604) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:33:21,175 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:33:21,175 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:33:21,176 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = msg_xor.split(b'')
ValueError: empty separator
2018-03-24 19:33:21,177 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f7877c04598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = msg_xor.split(b'')
ValueError: empty separator
2018-03-24 19:34:27,972 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:34:27,973 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 55430)
2018-03-24 19:34:27,976 [tornado_server.py:58] got a new message from ('127.0.0.1', 55430) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:34:27,976 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:34:27,976 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:34:27,976 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = memoryview(msg_xor).cast('H')
TypeError: memoryview: length is not a multiple of itemsize
2018-03-24 19:34:27,978 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f4db86b1598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = memoryview(msg_xor).cast('H')
TypeError: memoryview: length is not a multiple of itemsize
2018-03-24 19:34:48,246 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:34:48,247 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 46290)
2018-03-24 19:34:48,250 [tornado_server.py:58] got a new message from ('127.0.0.1', 46290) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:34:48,250 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:34:48,250 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:34:48,250 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:34:48,252 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fe2dcd1e598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:35:05,456 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:35:05,458 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 50732)
2018-03-24 19:35:05,460 [tornado_server.py:58] got a new message from ('127.0.0.1', 50732) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:35:05,460 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:35:05,461 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:35:05,461 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:35:05,462 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f8453d1a598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:35:58,767 [tornado_server.py:112] connection monitoring app started
2018-03-24 19:35:58,769 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 46920)
2018-03-24 19:35:58,771 [tornado_server.py:58] got a new message from ('127.0.0.1', 46920) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:35:58,772 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:35:58,772 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:35:58,772 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 87, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:35:58,774 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f66ed561598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 87, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:38:29,295 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:38:29,297 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 40446)
2018-03-24 19:38:29,299 [tornado_server.py:58] got a new message from ('127.0.0.1', 40446) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:38:29,299 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:38:29,299 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:38:29,300 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:38:29,301 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fe546994598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 86, in _on_read_header
    print(reduce(xor, bytes_arr, 0))
TypeError: unsupported operand type(s) for ^: 'int' and 'list'
2018-03-24 19:39:56,556 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:39:56,558 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 58140)
2018-03-24 19:39:56,560 [tornado_server.py:58] got a new message from ('127.0.0.1', 58140) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:39:56,561 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:39:56,561 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:39:56,561 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = mv = memoryview(value).cast('H')
NameError: name 'value' is not defined
2018-03-24 19:39:56,563 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f8b295c4598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 84, in _on_read_header
    bytes_arr = mv = memoryview(value).cast('H')
NameError: name 'value' is not defined
2018-03-24 19:40:13,407 [tornado_server.py:110] connection monitoring app started
2018-03-24 19:40:13,409 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 50020)
2018-03-24 19:40:13,411 [tornado_server.py:58] got a new message from ('127.0.0.1', 50020) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:40:13,411 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:40:13,411 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:40:30,193 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:40:30,195 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 37846)
2018-03-24 19:40:30,197 [tornado_server.py:58] got a new message from ('127.0.0.1', 37846) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:40:30,197 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:40:30,197 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:40:38,919 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:40:38,920 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 56280)
2018-03-24 19:40:38,922 [tornado_server.py:58] got a new message from ('127.0.0.1', 56280) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:40:38,923 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:40:38,923 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:41:40,726 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:41:40,728 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 50762)
2018-03-24 19:41:40,730 [tornado_server.py:58] got a new message from ('127.0.0.1', 50762) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:41:40,730 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:41:40,731 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:43:07,222 [tornado_server.py:111] connection monitoring app started
2018-03-24 19:43:07,224 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 41318)
2018-03-24 19:43:07,226 [tornado_server.py:58] got a new message from ('127.0.0.1', 41318) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:43:07,226 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:43:07,227 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:45:38,078 [tornado_server.py:109] connection monitoring app started
2018-03-24 19:45:38,080 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 45784)
2018-03-24 19:45:38,082 [tornado_server.py:58] got a new message from ('127.0.0.1', 45784) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:45:38,083 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:45:38,083 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:46:07,423 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:46:07,425 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 56788)
2018-03-24 19:46:07,427 [tornado_server.py:58] got a new message from ('127.0.0.1', 56788) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:46:07,427 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:46:07,427 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:46:22,584 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:46:22,586 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 52560)
2018-03-24 19:46:22,589 [tornado_server.py:58] got a new message from ('127.0.0.1', 52560) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:46:22,589 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:46:22,590 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:46:22,590 [tornado_server.py:95] answered ('127.0.0.1', 52560)
2018-03-24 19:46:22,591 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_line)
AttributeError: 'Connection' object has no attribute '_on_read_line'
2018-03-24 19:46:22,593 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f9419145d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_line)
AttributeError: 'Connection' object has no attribute '_on_read_line'
2018-03-24 19:46:22,595 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 101, in _on_close
    logger.info('client quit %s - %s', self.address, self.name)
AttributeError: 'Connection' object has no attribute 'name'
2018-03-24 19:46:22,601 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f941b3d5c80>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 101, in _on_close
    logger.info('client quit %s - %s', self.address, self.name)
AttributeError: 'Connection' object has no attribute 'name'
2018-03-24 19:46:57,794 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:46:57,795 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 33556)
2018-03-24 19:46:57,797 [tornado_server.py:58] got a new message from ('127.0.0.1', 33556) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:46:57,798 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:46:57,798 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:46:57,798 [tornado_server.py:95] answered ('127.0.0.1', 33556)
2018-03-24 19:46:57,799 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream._on_read_header(12, self._on_read_line)
AttributeError: 'IOStream' object has no attribute '_on_read_header'
2018-03-24 19:46:57,800 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2c6afe8d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream._on_read_header(12, self._on_read_line)
AttributeError: 'IOStream' object has no attribute '_on_read_header'
2018-03-24 19:46:57,802 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 101, in _on_close
    logger.info('client quit %s - %s', self.address, self.name)
AttributeError: 'Connection' object has no attribute 'name'
2018-03-24 19:46:57,803 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2c6d278c80>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 101, in _on_close
    logger.info('client quit %s - %s', self.address, self.name)
AttributeError: 'Connection' object has no attribute 'name'
2018-03-24 19:47:14,548 [tornado_server.py:107] connection monitoring app started
2018-03-24 19:47:14,549 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 45306)
2018-03-24 19:47:14,554 [tornado_server.py:58] got a new message from ('127.0.0.1', 45306) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:47:14,554 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:47:14,554 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:47:14,555 [tornado_server.py:95] answered ('127.0.0.1', 45306)
2018-03-24 19:47:14,555 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream._on_read_header(12, self._on_read_line)
AttributeError: 'IOStream' object has no attribute '_on_read_header'
2018-03-24 19:47:14,557 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fa751d3bd08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream._on_read_header(12, self._on_read_line)
AttributeError: 'IOStream' object has no attribute '_on_read_header'
2018-03-24 19:47:14,559 [tornado_server.py:100] client quit ('127.0.0.1', 45306) - valera01
2018-03-24 19:47:37,888 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:47:37,889 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 59300)
2018-03-24 19:47:37,891 [tornado_server.py:58] got a new message from ('127.0.0.1', 59300) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:47:37,892 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:47:37,892 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:47:37,893 [tornado_server.py:95] answered ('127.0.0.1', 59300)
2018-03-24 19:47:37,893 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_line)
AttributeError: 'Connection' object has no attribute '_on_read_line'
2018-03-24 19:47:37,895 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f4737aa9d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 97, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_line)
AttributeError: 'Connection' object has no attribute '_on_read_line'
2018-03-24 19:47:37,896 [tornado_server.py:101] client quit ('127.0.0.1', 59300) - valera01
2018-03-24 19:47:55,185 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:47:55,187 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 56794)
2018-03-24 19:47:55,189 [tornado_server.py:58] got a new message from ('127.0.0.1', 56794) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:47:55,189 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:47:55,189 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:47:55,190 [tornado_server.py:95] answered ('127.0.0.1', 56794)
2018-03-24 19:47:55,191 [tornado_server.py:58] got a new message from ('127.0.0.1', 56794) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 19:47:55,191 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:47:55,193 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f1b807bd9d8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:47:55,194 [tornado_server.py:101] client quit ('127.0.0.1', 56794) - ~~~~1   
2018-03-24 19:47:55,195 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 103, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:47:55,196 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f1b807bdd08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 103, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:50:28,443 [tornado_server.py:109] connection monitoring app started
2018-03-24 19:50:28,445 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 56456)
2018-03-24 19:50:28,447 [tornado_server.py:58] got a new message from ('127.0.0.1', 56456) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:50:28,447 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:50:28,448 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:50:28,448 [tornado_server.py:96] answered ('127.0.0.1', 56456)
2018-03-24 19:50:28,449 [tornado_server.py:58] got a new message from ('127.0.0.1', 56456) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 19:50:28,449 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:50:28,451 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fd77cb699d8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:50:28,452 [tornado_server.py:102] client quit ('127.0.0.1', 56456) - ~~~~1   
2018-03-24 19:50:28,453 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 104, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:50:28,453 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fd77cb69d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 104, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:52:54,666 [tornado_server.py:108] connection monitoring app started
2018-03-24 19:52:54,668 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 55376)
2018-03-24 19:52:54,670 [tornado_server.py:58] got a new message from ('127.0.0.1', 55376) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:52:54,670 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:52:54,670 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:52:54,677 [tornado_server.py:58] got a new message from ('127.0.0.1', 55376) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 19:52:54,677 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:52:54,678 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff249067f28>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:52:54,679 [tornado_server.py:101] client quit ('127.0.0.1', 55376) - ~~~~1   
2018-03-24 19:52:54,679 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 103, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:52:54,681 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff249303d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 103, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:53:55,075 [tornado_server.py:109] connection monitoring app started
2018-03-24 19:53:55,076 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 49292)
2018-03-24 19:53:55,078 [tornado_server.py:58] got a new message from ('127.0.0.1', 49292) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:53:55,079 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:53:55,079 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:53:55,080 [tornado_server.py:96] answered ('127.0.0.1', 49292)
2018-03-24 19:53:55,080 [tornado_server.py:58] got a new message from ('127.0.0.1', 49292) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 19:53:55,081 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:53:55,082 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f1e457a59d8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 63, in _on_read_header
    self.messages_num = data[12]
IndexError: index out of range
2018-03-24 19:53:55,084 [tornado_server.py:102] client quit ('127.0.0.1', 49292) - ~~~~1   
2018-03-24 19:53:55,084 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 104, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:53:55,085 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f1e457a5d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 104, in _on_close
    del self.connections[self.uid]
KeyError: '~~~~1\x00\x00\x00'
2018-03-24 19:54:45,471 [tornado_server.py:107] connection monitoring app started
2018-03-24 19:54:45,473 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 55064)
2018-03-24 19:54:45,475 [tornado_server.py:58] got a new message from ('127.0.0.1', 55064) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:54:45,475 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:54:45,476 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:56:26,657 [tornado_server.py:112] connection monitoring app started
2018-03-24 19:56:26,658 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 57088)
2018-03-24 19:56:26,660 [tornado_server.py:58] got a new message from ('127.0.0.1', 57088) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:56:26,660 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:56:26,661 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:56:26,661 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 92, in _on_read_header
    self.stream.read_bytes(messages_num*12, self._on_read_messages, partial=True)
NameError: name 'messages_num' is not defined
2018-03-24 19:56:26,663 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f9717257598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 92, in _on_read_header
    self.stream.read_bytes(messages_num*12, self._on_read_messages, partial=True)
NameError: name 'messages_num' is not defined
2018-03-24 19:56:26,664 [tornado_server.py:105] client quit ('127.0.0.1', 57088) - valera01
2018-03-24 19:56:38,586 [tornado_server.py:112] connection monitoring app started
2018-03-24 19:56:38,587 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 45116)
2018-03-24 19:56:38,589 [tornado_server.py:58] got a new message from ('127.0.0.1', 45116) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 19:56:38,590 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 19:56:38,590 [tornado_server.py:76] valera01 authenticated

2018-03-24 19:56:38,590 [tornado_server.py:96] got a new message from ('127.0.0.1', 45116) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:03:34,417 [tornado_server.py:120] connection monitoring app started
2018-03-24 20:03:34,418 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 59228)
2018-03-24 20:03:34,420 [tornado_server.py:58] got a new message from ('127.0.0.1', 59228) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:03:34,421 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:03:34,421 [tornado_server.py:76] valera01 authenticated

2018-03-24 20:03:34,421 [tornado_server.py:96] got a new message from ('127.0.0.1', 59228) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:03:34,422 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = range(self.num_messages)*12+1
AttributeError: 'Connection' object has no attribute 'num_messages'
2018-03-24 20:03:34,424 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fd4c1e4cd08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = range(self.num_messages)*12+1
AttributeError: 'Connection' object has no attribute 'num_messages'
2018-03-24 20:03:34,425 [tornado_server.py:113] client quit ('127.0.0.1', 59228) - valera01
2018-03-24 20:03:57,797 [tornado_server.py:120] connection monitoring app started
2018-03-24 20:03:57,799 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 37936)
2018-03-24 20:03:57,801 [tornado_server.py:58] got a new message from ('127.0.0.1', 37936) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:03:57,801 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:03:57,801 [tornado_server.py:76] valera01 authenticated

2018-03-24 20:03:57,802 [tornado_server.py:96] got a new message from ('127.0.0.1', 37936) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:03:57,802 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = range(self.messages_num)*12+1
TypeError: unsupported operand type(s) for *: 'range' and 'int'
2018-03-24 20:03:57,804 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f6e2460fd08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = range(self.messages_num)*12+1
TypeError: unsupported operand type(s) for *: 'range' and 'int'
2018-03-24 20:03:57,805 [tornado_server.py:113] client quit ('127.0.0.1', 37936) - valera01
2018-03-24 20:04:13,437 [tornado_server.py:120] connection monitoring app started
2018-03-24 20:04:13,438 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 56570)
2018-03-24 20:04:13,440 [tornado_server.py:58] got a new message from ('127.0.0.1', 56570) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:04:13,441 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:04:13,441 [tornado_server.py:76] valera01 authenticated

2018-03-24 20:04:13,441 [tornado_server.py:96] got a new message from ('127.0.0.1', 56570) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:04:13,442 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num))*12+1
TypeError: can only concatenate list (not "int") to list
2018-03-24 20:04:13,443 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7efecad13d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num))*12+1
TypeError: can only concatenate list (not "int") to list
2018-03-24 20:04:13,445 [tornado_server.py:113] client quit ('127.0.0.1', 56570) - valera01
2018-03-24 20:05:04,730 [tornado_server.py:120] connection monitoring app started
2018-03-24 20:05:04,732 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 53094)
2018-03-24 20:05:04,734 [tornado_server.py:58] got a new message from ('127.0.0.1', 53094) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:05:04,734 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:05:04,734 [tornado_server.py:76] valera01 authenticated

2018-03-24 20:05:04,735 [tornado_server.py:96] got a new message from ('127.0.0.1', 53094) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:05:04,735 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num))*12+1
TypeError: can only concatenate list (not "int") to list
2018-03-24 20:05:04,737 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f5b52306d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num))*12+1
TypeError: can only concatenate list (not "int") to list
2018-03-24 20:05:04,738 [tornado_server.py:113] client quit ('127.0.0.1', 53094) - valera01
2018-03-24 20:05:16,156 [tornado_server.py:120] connection monitoring app started
2018-03-24 20:05:16,158 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 52228)
2018-03-24 20:05:16,160 [tornado_server.py:58] got a new message from ('127.0.0.1', 52228) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:05:16,160 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:05:16,160 [tornado_server.py:76] valera01 authenticated

2018-03-24 20:05:16,161 [tornado_server.py:96] got a new message from ('127.0.0.1', 52228) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:05:16,161 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num)*12+1)
TypeError: unsupported operand type(s) for *: 'range' and 'int'
2018-03-24 20:05:16,163 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fcfd3aa8d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num)*12+1)
TypeError: unsupported operand type(s) for *: 'range' and 'int'
2018-03-24 20:05:16,164 [tornado_server.py:113] client quit ('127.0.0.1', 52228) - valera01
2018-03-24 20:05:34,615 [tornado_server.py:120] connection monitoring app started
2018-03-24 20:05:34,616 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 49712)
2018-03-24 20:05:34,618 [tornado_server.py:58] got a new message from ('127.0.0.1', 49712) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:05:34,619 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:05:34,619 [tornado_server.py:76] valera01 authenticated

2018-03-24 20:05:34,619 [tornado_server.py:96] got a new message from ('127.0.0.1', 49712) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:05:34,620 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num)+1)
TypeError: unsupported operand type(s) for +: 'range' and 'int'
2018-03-24 20:05:34,621 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7feb9bc78d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 98, in _on_read_messages
    ends = list(range(self.messages_num)+1)
TypeError: unsupported operand type(s) for +: 'range' and 'int'
2018-03-24 20:05:34,623 [tornado_server.py:113] client quit ('127.0.0.1', 49712) - valera01
2018-03-24 20:06:22,724 [tornado_server.py:120] connection monitoring app started
2018-03-24 20:06:22,726 [tornado_server.py:46] receive a new connection from ('127.0.0.1', 44934)
2018-03-24 20:06:22,728 [tornado_server.py:58] got a new message from ('127.0.0.1', 44934) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:06:22,728 [tornado_server.py:70] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:06:22,728 [tornado_server.py:76] valera01 authenticated

2018-03-24 20:06:22,729 [tornado_server.py:96] got a new message from ('127.0.0.1', 44934) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:07:25,004 [tornado_server.py:122] connection monitoring app started
2018-03-24 20:07:25,005 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 60904)
2018-03-24 20:07:25,007 [tornado_server.py:59] got a new message from ('127.0.0.1', 60904) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:07:25,007 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:07:25,008 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:07:25,008 [tornado_server.py:97] got a new message from ('127.0.0.1', 60904) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:07:44,792 [tornado_server.py:122] connection monitoring app started
2018-03-24 20:07:44,794 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 55424)
2018-03-24 20:07:44,796 [tornado_server.py:59] got a new message from ('127.0.0.1', 55424) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:07:44,796 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:07:44,796 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:07:44,797 [tornado_server.py:97] got a new message from ('127.0.0.1', 55424) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:11:39,568 [tornado_server.py:123] connection monitoring app started
2018-03-24 20:11:39,570 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 57892)
2018-03-24 20:11:39,572 [tornado_server.py:59] got a new message from ('127.0.0.1', 57892) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:11:39,572 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:11:39,572 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:11:39,573 [tornado_server.py:97] got a new message from ('127.0.0.1', 57892) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:11:39,573 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 106, in _on_read_messages
    value = struct.pack('>L', mess[9:13])
struct.error: required argument is not an integer
2018-03-24 20:11:39,575 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc547c23d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 106, in _on_read_messages
    value = struct.pack('>L', mess[9:13])
struct.error: required argument is not an integer
2018-03-24 20:11:39,576 [tornado_server.py:116] client quit ('127.0.0.1', 57892) - valera01
2018-03-24 20:11:49,615 [tornado_server.py:123] connection monitoring app started
2018-03-24 20:11:49,618 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 38634)
2018-03-24 20:11:49,620 [tornado_server.py:59] got a new message from ('127.0.0.1', 38634) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:11:49,621 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:11:49,621 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:11:49,621 [tornado_server.py:97] got a new message from ('127.0.0.1', 38634) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:11:49,622 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 106, in _on_read_messages
    value = struct.unpack('>L', mess[9:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:11:49,624 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff2b9827d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 106, in _on_read_messages
    value = struct.unpack('>L', mess[9:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:11:49,626 [tornado_server.py:116] client quit ('127.0.0.1', 38634) - valera01
2018-03-24 20:11:59,669 [tornado_server.py:123] connection monitoring app started
2018-03-24 20:11:59,671 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 40128)
2018-03-24 20:11:59,673 [tornado_server.py:59] got a new message from ('127.0.0.1', 40128) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:11:59,673 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:11:59,673 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:11:59,674 [tornado_server.py:97] got a new message from ('127.0.0.1', 40128) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:11:59,674 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 106, in _on_read_messages
    value = struct.unpack('>L', mess[10:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:11:59,676 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f9a9304cd08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 106, in _on_read_messages
    value = struct.unpack('>L', mess[10:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:11:59,678 [tornado_server.py:116] client quit ('127.0.0.1', 40128) - valera01
2018-03-24 20:12:09,675 [tornado_server.py:124] connection monitoring app started
2018-03-24 20:12:09,676 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 59374)
2018-03-24 20:12:09,678 [tornado_server.py:59] got a new message from ('127.0.0.1', 59374) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:12:09,679 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:12:09,679 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:12:09,679 [tornado_server.py:97] got a new message from ('127.0.0.1', 59374) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:12:09,680 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 107, in _on_read_messages
    value = struct.unpack('>L', mess[10:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:12:09,681 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fbc7f089d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 107, in _on_read_messages
    value = struct.unpack('>L', mess[10:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:12:09,683 [tornado_server.py:117] client quit ('127.0.0.1', 59374) - valera01
2018-03-24 20:12:18,663 [tornado_server.py:124] connection monitoring app started
2018-03-24 20:12:18,665 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 40074)
2018-03-24 20:12:18,667 [tornado_server.py:59] got a new message from ('127.0.0.1', 40074) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:12:18,667 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:12:18,668 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:12:18,668 [tornado_server.py:97] got a new message from ('127.0.0.1', 40074) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:12:18,669 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 107, in _on_read_messages
    value = struct.unpack('>L', mess[10:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:12:18,670 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f02cf5a3d08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 107, in _on_read_messages
    value = struct.unpack('>L', mess[10:13])
struct.error: unpack requires a bytes object of length 4
2018-03-24 20:12:18,672 [tornado_server.py:117] client quit ('127.0.0.1', 40074) - valera01
2018-03-24 20:12:25,893 [tornado_server.py:124] connection monitoring app started
2018-03-24 20:12:25,895 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 34622)
2018-03-24 20:12:25,897 [tornado_server.py:59] got a new message from ('127.0.0.1', 34622) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:12:25,897 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, messages_num: 1
2018-03-24 20:12:25,897 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:12:25,898 [tornado_server.py:97] got a new message from ('127.0.0.1', 34622) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:13:14,953 [tornado_server.py:124] connection monitoring app started
2018-03-24 20:13:14,955 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 33822)
2018-03-24 20:13:14,957 [tornado_server.py:59] got a new message from ('127.0.0.1', 33822) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:13:14,957 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 71, in _on_read_header
    self.messages_num,
AttributeError: 'Connection' object has no attribute 'messages_num'
2018-03-24 20:13:14,959 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fba589fb598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 71, in _on_read_header
    self.messages_num,
AttributeError: 'Connection' object has no attribute 'messages_num'
2018-03-24 20:13:14,960 [tornado_server.py:117] client quit ('127.0.0.1', 33822) - valera01
2018-03-24 20:13:14,960 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 119, in _on_close
    del self.connections[self.uid]
KeyError: 'valera01'
2018-03-24 20:13:14,961 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fba589fb620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 119, in _on_close
    del self.connections[self.uid]
KeyError: 'valera01'
2018-03-24 20:13:28,974 [tornado_server.py:124] connection monitoring app started
2018-03-24 20:13:28,976 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 60982)
2018-03-24 20:13:28,978 [tornado_server.py:59] got a new message from ('127.0.0.1', 60982) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:13:28,978 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:13:28,978 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:13:28,979 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 93, in _on_read_header
    self.stream.read_bytes(self.fields_num*12, self._on_read_messages, partial=True)
AttributeError: 'Connection' object has no attribute '_on_read_messages'
2018-03-24 20:13:28,980 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f1da3fac598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 93, in _on_read_header
    self.stream.read_bytes(self.fields_num*12, self._on_read_messages, partial=True)
AttributeError: 'Connection' object has no attribute '_on_read_messages'
2018-03-24 20:13:28,982 [tornado_server.py:117] client quit ('127.0.0.1', 60982) - valera01
2018-03-24 20:13:51,942 [tornado_server.py:124] connection monitoring app started
2018-03-24 20:13:51,944 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 44232)
2018-03-24 20:13:51,945 [tornado_server.py:59] got a new message from ('127.0.0.1', 44232) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:13:51,946 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:13:51,946 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:13:51,946 [tornado_server.py:97] got a new message from ('127.0.0.1', 44232) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:13:51,947 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 107, in _on_read_fields
    self.fields[name]
KeyError: '~~~~~~~1'
2018-03-24 20:13:51,948 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f83df4add08>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 107, in _on_read_fields
    self.fields[name]
KeyError: '~~~~~~~1'
2018-03-24 20:13:51,950 [tornado_server.py:117] client quit ('127.0.0.1', 44232) - valera01
2018-03-24 20:15:43,398 [tornado_server.py:124] connection monitoring app started
2018-03-24 20:15:43,400 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 43712)
2018-03-24 20:15:43,402 [tornado_server.py:59] got a new message from ('127.0.0.1', 43712) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:15:43,402 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:15:43,402 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:15:43,403 [tornado_server.py:97] got a new message from ('127.0.0.1', 43712) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:17:59,674 [tornado_server.py:129] connection monitoring app started
2018-03-24 20:17:59,675 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 40548)
2018-03-24 20:17:59,677 [tornado_server.py:59] got a new message from ('127.0.0.1', 40548) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:17:59,677 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:17:59,678 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:17:59,678 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 94, in _on_read_header
    self.write(msg)
AttributeError: 'Connection' object has no attribute 'write'
2018-03-24 20:17:59,680 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff726753620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 94, in _on_read_header
    self.write(msg)
AttributeError: 'Connection' object has no attribute 'write'
2018-03-24 20:17:59,681 [tornado_server.py:99] got a new message from ('127.0.0.1', 40548) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:17:59,682 [tornado_server.py:122] client quit ('127.0.0.1', 40548) - valera01
2018-03-24 20:18:18,850 [tornado_server.py:129] connection monitoring app started
2018-03-24 20:18:18,852 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 35696)
2018-03-24 20:18:18,853 [tornado_server.py:59] got a new message from ('127.0.0.1', 35696) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:18:18,854 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:18:18,854 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:18:18,855 [tornado_server.py:99] got a new message from ('127.0.0.1', 35696) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 20:18:18,856 [tornado_server.py:122] client quit ('127.0.0.1', 35696) - valera01
2018-03-24 20:19:05,502 [tornado_server.py:129] connection monitoring app started
2018-03-24 20:19:05,504 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 53322)
2018-03-24 20:19:05,506 [tornado_server.py:59] got a new message from ('127.0.0.1', 53322) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:19:05,506 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:19:05,506 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:19:32,348 [tornado_server.py:129] connection monitoring app started
2018-03-24 20:19:32,350 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 45358)
2018-03-24 20:19:32,353 [tornado_server.py:59] got a new message from ('127.0.0.1', 45358) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:19:32,353 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:19:32,353 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:21:20,049 [tornado_server.py:133] connection monitoring app started
2018-03-24 20:21:20,051 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 44110)
2018-03-24 20:21:20,053 [tornado_server.py:59] got a new message from ('127.0.0.1', 44110) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:21:20,054 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:21:20,054 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:21:20,054 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:21:20,056 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fe4d0135a60>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:21:52,276 [tornado_server.py:133] connection monitoring app started
2018-03-24 20:21:52,277 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 39330)
2018-03-24 20:21:52,280 [tornado_server.py:59] got a new message from ('127.0.0.1', 39330) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:21:52,280 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:21:52,280 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:21:52,281 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:21:52,282 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f856be72598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:22:38,135 [tornado_server.py:133] connection monitoring app started
2018-03-24 20:22:38,137 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 45908)
2018-03-24 20:22:38,139 [tornado_server.py:59] got a new message from ('127.0.0.1', 45908) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:22:38,140 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:22:38,140 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:22:38,140 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:22:38,142 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f5496861598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:22:45,069 [tornado_server.py:133] connection monitoring app started
2018-03-24 20:22:45,071 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 34780)
2018-03-24 20:22:45,073 [tornado_server.py:59] got a new message from ('127.0.0.1', 34780) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:22:45,073 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:22:45,073 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:22:45,074 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:22:45,076 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2532cb3598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:24:04,710 [tornado_server.py:133] connection monitoring app started
2018-03-24 20:24:04,712 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 49684)
2018-03-24 20:24:04,714 [tornado_server.py:59] got a new message from ('127.0.0.1', 49684) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:24:04,714 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:24:04,715 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:24:04,715 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:24:04,717 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f8d8180a598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self.stream.write(msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: an integer is required
2018-03-24 20:24:27,096 [tornado_server.py:132] connection monitoring app started
2018-03-24 20:24:27,098 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 41568)
2018-03-24 20:24:27,100 [tornado_server.py:59] got a new message from ('127.0.0.1', 41568) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:24:27,101 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:24:27,101 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:24:32,959 [tornado_server.py:132] connection monitoring app started
2018-03-24 20:24:32,961 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 35262)
2018-03-24 20:24:32,964 [tornado_server.py:59] got a new message from ('127.0.0.1', 35262) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:24:32,964 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:24:32,965 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:24:42,955 [tornado_server.py:132] connection monitoring app started
2018-03-24 20:24:42,957 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 35204)
2018-03-24 20:24:42,959 [tornado_server.py:59] got a new message from ('127.0.0.1', 35204) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:24:42,959 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:24:42,960 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:24:59,238 [tornado_server.py:132] connection monitoring app started
2018-03-24 20:24:59,239 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 39804)
2018-03-24 20:24:59,242 [tornado_server.py:59] got a new message from ('127.0.0.1', 39804) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:24:59,242 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:24:59,242 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:25:23,672 [tornado_server.py:132] connection monitoring app started
2018-03-24 20:25:23,674 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 41270)
2018-03-24 20:25:23,676 [tornado_server.py:59] got a new message from ('127.0.0.1', 41270) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:25:23,676 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:25:23,676 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:26:29,039 [tornado_server.py:133] connection monitoring app started
2018-03-24 20:26:29,040 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 40374)
2018-03-24 20:26:29,042 [tornado_server.py:59] got a new message from ('127.0.0.1', 40374) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:26:29,043 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:26:29,043 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:26:46,133 [tornado_server.py:133] connection monitoring app started
2018-03-24 20:26:46,134 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 45842)
2018-03-24 20:26:46,137 [tornado_server.py:59] got a new message from ('127.0.0.1', 45842) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:26:46,137 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:26:46,137 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:27:12,007 [tornado_server.py:134] connection monitoring app started
2018-03-24 20:27:12,009 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 44140)
2018-03-24 20:27:12,011 [tornado_server.py:59] got a new message from ('127.0.0.1', 44140) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:27:12,011 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:27:12,012 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:27:12,012 [tornado_server.py:95] [b'\x11', b'\x00\x01', b'\x00\x10']
2018-03-24 20:28:53,359 [tornado_server.py:134] connection monitoring app started
2018-03-24 20:28:53,361 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 49650)
2018-03-24 20:28:53,363 [tornado_server.py:59] got a new message from ('127.0.0.1', 49650) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:28:53,363 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:28:53,364 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:28:53,364 [tornado_server.py:95] [b'\x11', b'\x00\x01', b'\x10']
2018-03-24 20:29:15,540 [tornado_server.py:135] connection monitoring app started
2018-03-24 20:29:15,542 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 35904)
2018-03-24 20:29:15,544 [tornado_server.py:59] got a new message from ('127.0.0.1', 35904) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:29:15,545 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:29:15,545 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:29:15,545 [tornado_server.py:95] [b'\x11', b'\x00\x01', b'\x10']
2018-03-24 20:29:15,545 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 20:29:36,450 [tornado_server.py:135] connection monitoring app started
2018-03-24 20:29:36,451 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 41630)
2018-03-24 20:29:36,453 [tornado_server.py:59] got a new message from ('127.0.0.1', 41630) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:29:36,454 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:29:36,454 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:29:36,454 [tornado_server.py:95] [b'\x11', b'\x00\x01', b'\x10']
2018-03-24 20:29:36,454 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 20:30:05,858 [tornado_server.py:134] connection monitoring app started
2018-03-24 20:30:05,860 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 45656)
2018-03-24 20:30:05,862 [tornado_server.py:59] got a new message from ('127.0.0.1', 45656) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:30:05,862 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:30:05,862 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:30:20,984 [tornado_server.py:134] connection monitoring app started
2018-03-24 20:30:20,986 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 50360)
2018-03-24 20:30:20,988 [tornado_server.py:59] got a new message from ('127.0.0.1', 50360) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:30:20,988 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:30:20,989 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:30:45,418 [tornado_server.py:134] connection monitoring app started
2018-03-24 20:30:45,420 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 59074)
2018-03-24 20:30:45,422 [tornado_server.py:59] got a new message from ('127.0.0.1', 59074) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:30:45,422 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:30:45,422 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:33:36,097 [tornado_server.py:134] connection monitoring app started
2018-03-24 20:33:36,098 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 50738)
2018-03-24 20:33:36,101 [tornado_server.py:59] got a new message from ('127.0.0.1', 50738) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 20:33:36,101 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 20:33:36,101 [tornado_server.py:77] valera01 authenticated

2018-03-24 20:33:36,101 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 21:59:05,909 [tornado_server.py:134] connection monitoring app started
2018-03-24 21:59:05,911 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 53664)
2018-03-24 21:59:05,913 [tornado_server.py:59] got a new message from ('127.0.0.1', 53664) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 21:59:05,913 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 21:59:05,914 [tornado_server.py:77] valera01 authenticated

2018-03-24 21:59:05,914 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 21:59:05,914 [tornado_server.py:102] got a new message from ('127.0.0.1', 53664) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 21:59:05,915 [tornado_server.py:114] b'\x11\x00\x01\x10'
2018-03-24 21:59:05,916 [tornado_server.py:127] client quit ('127.0.0.1', 53664) - valera01
2018-03-24 22:02:09,790 [tornado_server.py:131] connection monitoring app started
2018-03-24 22:02:09,792 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 58400)
2018-03-24 22:02:09,794 [tornado_server.py:59] got a new message from ('127.0.0.1', 58400) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:02:09,794 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:02:09,794 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:02:09,795 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 114, in _on_message_complete
    self.stream.write(msg)
NameError: name 'msg' is not defined
2018-03-24 22:02:09,796 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fde99586730>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 114, in _on_message_complete
    self.stream.write(msg)
NameError: name 'msg' is not defined
2018-03-24 22:02:09,798 [tornado_server.py:101] got a new message from ('127.0.0.1', 58400) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:02:09,798 [tornado_server.py:124] client quit ('127.0.0.1', 58400) - valera01
2018-03-24 22:02:16,051 [tornado_server.py:134] connection monitoring app started
2018-03-24 22:02:16,053 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 35330)
2018-03-24 22:02:16,054 [tornado_server.py:59] got a new message from ('127.0.0.1', 35330) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:02:16,055 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:02:16,055 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:02:16,055 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 22:02:16,056 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 117, in _on_message_complete
    self.stream.write(msg)
NameError: name 'msg' is not defined
2018-03-24 22:02:16,057 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f3f84c1b7b8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 117, in _on_message_complete
    self.stream.write(msg)
NameError: name 'msg' is not defined
2018-03-24 22:02:16,059 [tornado_server.py:102] got a new message from ('127.0.0.1', 35330) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:02:16,059 [tornado_server.py:114] b'\x11\x00\x01\x10'
2018-03-24 22:02:16,060 [tornado_server.py:127] client quit ('127.0.0.1', 35330) - valera01
2018-03-24 22:02:27,738 [tornado_server.py:134] connection monitoring app started
2018-03-24 22:02:27,739 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 57692)
2018-03-24 22:02:27,741 [tornado_server.py:59] got a new message from ('127.0.0.1', 57692) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:02:27,742 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:02:27,742 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:02:27,743 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 22:02:27,743 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete(self.response_msg)
TypeError: _on_message_complete() takes 1 positional argument but 2 were given
2018-03-24 22:02:27,745 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f33e6c9b7b8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete(self.response_msg)
TypeError: _on_message_complete() takes 1 positional argument but 2 were given
2018-03-24 22:02:27,746 [tornado_server.py:102] got a new message from ('127.0.0.1', 57692) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:02:27,747 [tornado_server.py:114] b'\x11\x00\x01\x10'
2018-03-24 22:02:27,747 [tornado_server.py:127] client quit ('127.0.0.1', 57692) - valera01
2018-03-24 22:02:45,778 [tornado_server.py:134] connection monitoring app started
2018-03-24 22:02:45,780 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 35504)
2018-03-24 22:02:45,782 [tornado_server.py:59] got a new message from ('127.0.0.1', 35504) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:02:45,782 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:02:45,782 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:02:45,782 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 22:02:45,783 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete(self.response_msg)
TypeError: _on_message_complete() takes 1 positional argument but 2 were given
2018-03-24 22:02:45,784 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f79a92ed7b8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete(self.response_msg)
TypeError: _on_message_complete() takes 1 positional argument but 2 were given
2018-03-24 22:02:45,786 [tornado_server.py:102] got a new message from ('127.0.0.1', 35504) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:02:45,786 [tornado_server.py:114] b'\x11\x00\x01\x10'
2018-03-24 22:02:45,787 [tornado_server.py:127] client quit ('127.0.0.1', 35504) - valera01
2018-03-24 22:03:31,304 [tornado_server.py:134] connection monitoring app started
2018-03-24 22:03:31,306 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 59510)
2018-03-24 22:03:31,307 [tornado_server.py:59] got a new message from ('127.0.0.1', 59510) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:03:31,308 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:03:31,308 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:03:31,308 [tornado_server.py:97] b'\x11\x00\x01\x10'
2018-03-24 22:03:31,309 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete(self.response_msg)
TypeError: _on_message_complete() takes 1 positional argument but 2 were given
2018-03-24 22:03:31,310 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f9cb03bf7b8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 90, in _on_read_header
    self._on_message_complete(self.response_msg)
TypeError: _on_message_complete() takes 1 positional argument but 2 were given
2018-03-24 22:03:31,312 [tornado_server.py:102] got a new message from ('127.0.0.1', 59510) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:03:31,312 [tornado_server.py:114] b'\x11\x00\x01\x10'
2018-03-24 22:03:31,313 [tornado_server.py:127] client quit ('127.0.0.1', 59510) - valera01
2018-03-24 22:03:45,659 [tornado_server.py:131] connection monitoring app started
2018-03-24 22:03:45,661 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 34368)
2018-03-24 22:03:45,662 [tornado_server.py:59] got a new message from ('127.0.0.1', 34368) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:03:45,663 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:03:45,663 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:03:45,664 [tornado_server.py:102] got a new message from ('127.0.0.1', 34368) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:03:45,664 [tornado_server.py:114] b'\x11\x00\x01\x10'
2018-03-24 22:03:45,665 [tornado_server.py:124] client quit ('127.0.0.1', 34368) - valera01
2018-03-24 22:04:04,434 [tornado_server.py:128] connection monitoring app started
2018-03-24 22:04:04,435 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 34032)
2018-03-24 22:04:04,437 [tornado_server.py:59] got a new message from ('127.0.0.1', 34032) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:04:04,438 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:04:04,438 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:04:04,438 [tornado_server.py:102] got a new message from ('127.0.0.1', 34032) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:04:04,440 [tornado_server.py:121] client quit ('127.0.0.1', 34032) - valera01
2018-03-24 22:04:52,297 [tornado_server.py:128] connection monitoring app started
2018-03-24 22:04:52,299 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 33016)
2018-03-24 22:04:52,301 [tornado_server.py:59] got a new message from ('127.0.0.1', 33016) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:04:52,301 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:04:52,301 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:04:52,302 [tornado_server.py:102] got a new message from ('127.0.0.1', 33016) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:04:52,303 [tornado_server.py:121] client quit ('127.0.0.1', 33016) - valera01
2018-03-24 22:07:16,347 [tornado_server.py:128] connection monitoring app started
2018-03-24 22:07:16,349 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 53536)
2018-03-24 22:07:16,350 [tornado_server.py:59] got a new message from ('127.0.0.1', 53536) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:07:16,351 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:07:16,351 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:07:16,352 [tornado_server.py:102] got a new message from ('127.0.0.1', 53536) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:07:16,353 [tornado_server.py:121] client quit ('127.0.0.1', 53536) - valera01
2018-03-24 22:07:27,568 [tornado_server.py:128] connection monitoring app started
2018-03-24 22:07:27,569 [tornado_server.py:47] receive a new connection from ('127.0.0.1', 35074)
2018-03-24 22:07:27,571 [tornado_server.py:59] got a new message from ('127.0.0.1', 35074) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:07:27,572 [tornado_server.py:71] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:07:27,572 [tornado_server.py:77] valera01 authenticated

2018-03-24 22:07:27,573 [tornado_server.py:102] got a new message from ('127.0.0.1', 35074) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:07:27,574 [tornado_server.py:121] client quit ('127.0.0.1', 35074) - valera01
2018-03-24 22:30:37,295 [process.py:128] Starting 4 processes
2018-03-24 22:30:37,303 [tornado_server.py:127] connection monitoring app started
2018-03-24 22:30:37,304 [tornado_server.py:127] connection monitoring app started
2018-03-24 22:30:37,307 [tornado_server.py:127] connection monitoring app started
2018-03-24 22:30:37,307 [tornado_server.py:127] connection monitoring app started
2018-03-24 22:32:11,460 [tornado_server.py:127] connection monitoring app started
2018-03-24 22:39:31,301 [tornado_server.py:127] connection monitoring app started
2018-03-24 22:39:31,302 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 58244)
2018-03-24 22:39:31,304 [tornado_server.py:60] got a new message from ('127.0.0.1', 58244) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:39:31,305 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:39:31,305 [tornado_server.py:78] valera01 authenticated

2018-03-24 22:39:31,306 [tornado_server.py:103] got a new message from ('127.0.0.1', 58244) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:39:31,307 [tornado_server.py:120] client quit ('127.0.0.1', 58244) - valera01
2018-03-24 22:44:16,215 [tornado_server.py:130] connection monitoring app started
2018-03-24 22:44:16,216 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 39590)
2018-03-24 22:44:16,218 [tornado_server.py:60] got a new message from ('127.0.0.1', 39590) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:44:16,219 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:44:16,219 [tornado_server.py:78] valera01 authenticated

2018-03-24 22:44:16,219 [tornado_server.py:103] got a new message from ('127.0.0.1', 39590) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:44:16,220 [tornado_server.py:114] answered ('127.0.0.1', 39590)
2018-03-24 22:44:16,221 [tornado_server.py:123] client quit ('127.0.0.1', 39590) - valera01
2018-03-24 22:44:18,729 [tornado_server.py:130] connection monitoring app started
2018-03-24 22:45:21,982 [tornado_server.py:130] connection monitoring app started
2018-03-24 22:45:21,984 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 45534)
2018-03-24 22:45:21,986 [tornado_server.py:60] got a new message from ('127.0.0.1', 45534) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:45:21,986 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:45:21,986 [tornado_server.py:78] valera01 authenticated

2018-03-24 22:45:21,987 [tornado_server.py:103] got a new message from ('127.0.0.1', 45534) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:45:21,987 [tornado_server.py:114] answered ('127.0.0.1', 45534)
2018-03-24 22:45:21,988 [tornado_server.py:123] client quit ('127.0.0.1', 45534) - valera01
2018-03-24 22:45:32,425 [tornado_server.py:130] connection monitoring app started
2018-03-24 22:45:32,427 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47766)
2018-03-24 22:45:32,429 [tornado_server.py:60] got a new message from ('127.0.0.1', 47766) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:45:32,429 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:45:32,429 [tornado_server.py:78] valera01 authenticated

2018-03-24 22:45:32,430 [tornado_server.py:103] got a new message from ('127.0.0.1', 47766) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:45:32,430 [tornado_server.py:114] answered ('127.0.0.1', 47766)
2018-03-24 22:45:32,432 [tornado_server.py:123] client quit ('127.0.0.1', 47766) - valera01
2018-03-24 22:59:27,857 [tornado_server.py:130] connection monitoring app started
2018-03-24 22:59:27,858 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 52188)
2018-03-24 22:59:27,860 [tornado_server.py:60] got a new message from ('127.0.0.1', 52188) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 22:59:27,861 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 22:59:27,861 [tornado_server.py:78] valera01 authenticated

2018-03-24 22:59:27,861 [tornado_server.py:103] got a new message from ('127.0.0.1', 52188) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 22:59:27,862 [tornado_server.py:114] answered ('127.0.0.1', 52188)
2018-03-24 22:59:27,863 [tornado_server.py:123] client quit ('127.0.0.1', 52188) - valera01
2018-03-24 23:00:13,231 [tornado_server.py:130] connection monitoring app started
2018-03-24 23:00:13,232 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 32954)
2018-03-24 23:00:13,234 [tornado_server.py:60] got a new message from ('127.0.0.1', 32954) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 23:00:13,235 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 23:00:13,235 [tornado_server.py:78] valera01 authenticated

2018-03-24 23:00:13,235 [tornado_server.py:103] got a new message from ('127.0.0.1', 32954) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 23:00:13,236 [tornado_server.py:114] answered ('127.0.0.1', 32954)
2018-03-24 23:00:13,237 [tornado_server.py:123] client quit ('127.0.0.1', 32954) - valera01
2018-03-24 23:01:10,005 [tornado_server.py:130] connection monitoring app started
2018-03-24 23:01:10,007 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 44966)
2018-03-24 23:01:10,009 [tornado_server.py:60] got a new message from ('127.0.0.1', 44966) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 23:01:10,009 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 23:01:10,010 [tornado_server.py:78] valera01 authenticated

2018-03-24 23:01:10,011 [tornado_server.py:103] got a new message from ('127.0.0.1', 44966) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 23:01:10,011 [tornado_server.py:114] answered ('127.0.0.1', 44966)
2018-03-24 23:01:49,238 [tornado_server.py:130] connection monitoring app started
2018-03-24 23:01:49,239 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 52270)
2018-03-24 23:01:49,241 [tornado_server.py:60] got a new message from ('127.0.0.1', 52270) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 23:01:49,242 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 23:01:49,242 [tornado_server.py:78] valera01 authenticated

2018-03-24 23:01:49,242 [tornado_server.py:103] got a new message from ('127.0.0.1', 52270) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 23:01:49,243 [tornado_server.py:114] answered ('127.0.0.1', 52270)
2018-03-24 23:01:49,244 [tornado_server.py:123] client quit ('127.0.0.1', 52270) - valera01
2018-03-24 23:02:12,223 [tornado_server.py:130] connection monitoring app started
2018-03-24 23:02:12,225 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 34284)
2018-03-24 23:02:12,227 [tornado_server.py:60] got a new message from ('127.0.0.1', 34284) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 23:02:12,227 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 23:02:12,227 [tornado_server.py:78] valera01 authenticated

2018-03-24 23:02:12,228 [tornado_server.py:103] got a new message from ('127.0.0.1', 34284) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 23:02:12,228 [tornado_server.py:114] answered ('127.0.0.1', 34284)
2018-03-24 23:02:12,230 [tornado_server.py:123] client quit ('127.0.0.1', 34284) - valera01
2018-03-24 23:02:29,036 [tornado_server.py:130] connection monitoring app started
2018-03-24 23:02:29,038 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 38878)
2018-03-24 23:02:29,040 [tornado_server.py:60] got a new message from ('127.0.0.1', 38878) - b'\x01\x00\x01valera01\x02\x01'
2018-03-24 23:02:29,040 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-24 23:02:29,040 [tornado_server.py:78] valera01 authenticated

2018-03-24 23:02:29,041 [tornado_server.py:103] got a new message from ('127.0.0.1', 38878) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-24 23:02:29,041 [tornado_server.py:114] answered ('127.0.0.1', 38878)
2018-03-24 23:02:29,042 [tornado_server.py:123] client quit ('127.0.0.1', 38878) - valera01
2018-03-25 10:19:30,244 [tornado_server.py:130] connection monitoring app started
2018-03-25 10:19:32,606 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47000)
2018-03-25 10:19:32,609 [tornado_server.py:60] got a new message from ('127.0.0.1', 47000) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:19:32,611 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:19:32,612 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:19:32,613 [tornado_server.py:103] got a new message from ('127.0.0.1', 47000) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:19:32,614 [tornado_server.py:114] answered ('127.0.0.1', 47000)
2018-03-25 10:19:32,615 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_header)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 418, in read_bytes
    self._try_inline_read()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 857, in _try_inline_read
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:19:32,621 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc3d29f92f0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_header)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 418, in read_bytes
    self._try_inline_read()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 857, in _try_inline_read
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:19:32,625 [tornado_server.py:123] client quit ('127.0.0.1', 47000) - valera01
2018-03-25 10:20:18,683 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47002)
2018-03-25 10:20:18,685 [tornado_server.py:60] got a new message from ('127.0.0.1', 47002) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:20:18,685 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:20:18,686 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:20:18,687 [tornado_server.py:103] got a new message from ('127.0.0.1', 47002) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:20:18,687 [tornado_server.py:114] answered ('127.0.0.1', 47002)
2018-03-25 10:20:18,688 [tornado_server.py:123] client quit ('127.0.0.1', 47002) - valera01
2018-03-25 10:20:28,912 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47004)
2018-03-25 10:20:28,914 [tornado_server.py:60] got a new message from ('127.0.0.1', 47004) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:20:28,915 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:20:28,915 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:20:28,918 [tornado_server.py:103] got a new message from ('127.0.0.1', 47004) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:20:28,919 [tornado_server.py:114] answered ('127.0.0.1', 47004)
2018-03-25 10:20:28,920 [tornado_server.py:123] client quit ('127.0.0.1', 47004) - valera01
2018-03-25 10:21:09,378 [tornado_server.py:131] connection monitoring app started
2018-03-25 10:21:11,899 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47008)
2018-03-25 10:21:11,902 [tornado_server.py:60] got a new message from ('127.0.0.1', 47008) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:21:11,906 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:21:11,906 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:21:11,907 [tornado_server.py:103] got a new message from ('127.0.0.1', 47008) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:21:11,908 [tornado_server.py:115] answered ('127.0.0.1', 47008)
2018-03-25 10:21:11,909 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_header)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 418, in read_bytes
    self._try_inline_read()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 857, in _try_inline_read
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:21:11,912 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f7b9dff0048>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.stream.read_bytes(12, self._on_read_header)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 418, in read_bytes
    self._try_inline_read()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 857, in _try_inline_read
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:21:11,914 [tornado_server.py:124] client quit ('127.0.0.1', 47008) - valera01
2018-03-25 10:21:49,957 [tornado_server.py:132] connection monitoring app started
2018-03-25 10:22:03,276 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47010)
2018-03-25 10:22:03,279 [tornado_server.py:60] got a new message from ('127.0.0.1', 47010) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:22:03,280 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:22:03,280 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:22:03,281 [tornado_server.py:103] got a new message from ('127.0.0.1', 47010) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:22:03,283 [tornado_server.py:125] client quit ('127.0.0.1', 47010) - valera01
2018-03-25 10:22:23,079 [tornado_server.py:132] connection monitoring app started
2018-03-25 10:22:25,162 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47016)
2018-03-25 10:22:25,165 [tornado_server.py:60] got a new message from ('127.0.0.1', 47016) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:22:25,166 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:22:25,167 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:22:25,168 [tornado_server.py:103] got a new message from ('127.0.0.1', 47016) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:22:25,170 [tornado_server.py:125] client quit ('127.0.0.1', 47016) - valera01
2018-03-25 10:22:58,458 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47018)
2018-03-25 10:22:58,459 [tornado_server.py:60] got a new message from ('127.0.0.1', 47018) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:22:58,460 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:22:58,460 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:22:58,461 [tornado_server.py:103] got a new message from ('127.0.0.1', 47018) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:22:58,461 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 121, in _read_more
    self.stream.write(self.response_msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:22:58,464 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a927c0d0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 121, in _read_more
    self.stream.write(self.response_msg)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:22:58,466 [tornado_server.py:125] client quit ('127.0.0.1', 47018) - valera01
2018-03-25 10:23:30,932 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47020)
2018-03-25 10:23:30,933 [tornado_server.py:60] got a new message from ('127.0.0.1', 47020) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:23:30,933 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:23:30,934 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:23:30,935 [tornado_server.py:103] got a new message from ('127.0.0.1', 47020) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:23:30,935 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:23:30,937 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:23:30,939 [tornado_server.py:125] client quit ('127.0.0.1', 47020) - valera01
2018-03-25 10:25:20,941 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47022)
2018-03-25 10:25:20,943 [tornado_server.py:60] got a new message from ('127.0.0.1', 47022) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:25:20,944 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:25:20,945 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:25:20,946 [tornado_server.py:103] got a new message from ('127.0.0.1', 47022) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:25:20,947 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:20,949 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:20,950 [tornado_server.py:125] client quit ('127.0.0.1', 47022) - valera01
2018-03-25 10:25:29,177 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47024)
2018-03-25 10:25:29,178 [tornado_server.py:60] got a new message from ('127.0.0.1', 47024) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:25:29,179 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:25:29,180 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:25:29,181 [tornado_server.py:103] got a new message from ('127.0.0.1', 47024) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:25:29,183 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:29,184 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:29,185 [tornado_server.py:125] client quit ('127.0.0.1', 47024) - valera01
2018-03-25 10:25:30,071 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47026)
2018-03-25 10:25:30,073 [tornado_server.py:60] got a new message from ('127.0.0.1', 47026) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:25:30,073 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:25:30,074 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:25:30,076 [tornado_server.py:103] got a new message from ('127.0.0.1', 47026) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:25:30,077 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:30,078 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:30,079 [tornado_server.py:125] client quit ('127.0.0.1', 47026) - valera01
2018-03-25 10:25:30,891 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47028)
2018-03-25 10:25:30,892 [tornado_server.py:60] got a new message from ('127.0.0.1', 47028) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:25:30,893 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:25:30,893 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:25:30,894 [tornado_server.py:103] got a new message from ('127.0.0.1', 47028) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:25:30,895 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:30,896 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:30,897 [tornado_server.py:125] client quit ('127.0.0.1', 47028) - valera01
2018-03-25 10:25:31,463 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47030)
2018-03-25 10:25:31,465 [tornado_server.py:60] got a new message from ('127.0.0.1', 47030) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:25:31,466 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:25:31,467 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:25:31,468 [tornado_server.py:103] got a new message from ('127.0.0.1', 47030) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:25:31,469 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:31,471 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:31,472 [tornado_server.py:125] client quit ('127.0.0.1', 47030) - valera01
2018-03-25 10:25:31,830 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47032)
2018-03-25 10:25:31,832 [tornado_server.py:60] got a new message from ('127.0.0.1', 47032) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:25:31,833 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:25:31,833 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:25:31,835 [tornado_server.py:103] got a new message from ('127.0.0.1', 47032) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:25:31,836 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:31,837 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:31,838 [tornado_server.py:125] client quit ('127.0.0.1', 47032) - valera01
2018-03-25 10:25:32,130 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47034)
2018-03-25 10:25:32,131 [tornado_server.py:60] got a new message from ('127.0.0.1', 47034) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:25:32,131 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:25:32,132 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:25:32,133 [tornado_server.py:103] got a new message from ('127.0.0.1', 47034) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:25:32,133 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:32,135 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f41a9308598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
  File "tornado_server.py", line 121, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:25:32,137 [tornado_server.py:125] client quit ('127.0.0.1', 47034) - valera01
2018-03-25 10:26:53,356 [tornado_server.py:134] connection monitoring app started
2018-03-25 10:26:56,490 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47040)
2018-03-25 10:26:56,493 [tornado_server.py:60] got a new message from ('127.0.0.1', 47040) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:26:56,495 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:26:56,496 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:26:56,498 [tornado_server.py:103] got a new message from ('127.0.0.1', 47040) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:26:56,499 [tornado_server.py:114] answered ('127.0.0.1', 47040)
2018-03-25 10:26:56,499 [tornado_server.py:60] got a new message from ('127.0.0.1', 47040) - b'\x01\x00\x01valera01\x02'
2018-03-25 10:26:56,499 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 65, in _on_read_header
    self.fields_num = data[12]
IndexError: index out of range
2018-03-25 10:26:56,501 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f75ee267d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 65, in _on_read_header
    self.fields_num = data[12]
IndexError: index out of range
2018-03-25 10:26:56,502 [tornado_server.py:127] client quit ('127.0.0.1', 47040) - valera01
2018-03-25 10:28:01,890 [tornado_server.py:135] connection monitoring app started
2018-03-25 10:28:03,748 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47042)
2018-03-25 10:28:03,754 [tornado_server.py:60] got a new message from ('127.0.0.1', 47042) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:28:03,754 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:28:03,755 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:28:03,756 [tornado_server.py:102] got a new message from ('127.0.0.1', 47042) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:28:03,756 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 111, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 124, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:28:03,759 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f58ab9841e0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 111, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 124, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:28:03,760 [tornado_server.py:128] client quit ('127.0.0.1', 47042) - valera01
2018-03-25 10:28:11,624 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47044)
2018-03-25 10:28:11,626 [tornado_server.py:60] got a new message from ('127.0.0.1', 47044) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:28:11,627 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:28:11,627 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:28:11,629 [tornado_server.py:102] got a new message from ('127.0.0.1', 47044) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:28:11,630 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 111, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 124, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:28:11,634 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f58aba0c620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 111, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 124, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:28:11,635 [tornado_server.py:128] client quit ('127.0.0.1', 47044) - valera01
2018-03-25 10:28:23,035 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47046)
2018-03-25 10:28:23,037 [tornado_server.py:60] got a new message from ('127.0.0.1', 47046) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:28:23,038 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:28:23,039 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:28:23,040 [tornado_server.py:102] got a new message from ('127.0.0.1', 47046) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:28:23,040 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 111, in _on_read_fields
    self.fields[name] = value
  File "tornado_server.py", line 124, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:28:23,042 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f58aba0c620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 111, in _on_read_fields
    self.fields[name] = value
  File "tornado_server.py", line 124, in _read_more
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:28:23,043 [tornado_server.py:128] client quit ('127.0.0.1', 47046) - valera01
2018-03-25 10:28:26,285 [tornado_server.py:134] connection monitoring app started
2018-03-25 10:28:27,897 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47048)
2018-03-25 10:28:27,900 [tornado_server.py:60] got a new message from ('127.0.0.1', 47048) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:28:27,901 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:28:27,901 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:28:27,903 [tornado_server.py:103] got a new message from ('127.0.0.1', 47048) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:28:27,904 [tornado_server.py:114] answered ('127.0.0.1', 47048)
2018-03-25 10:28:27,904 [tornado_server.py:60] got a new message from ('127.0.0.1', 47048) - b'\x01\x00\x01valera01\x02'
2018-03-25 10:28:27,905 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 65, in _on_read_header
    self.fields_num = data[12]
IndexError: index out of range
2018-03-25 10:28:27,908 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fb84c53bd90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 65, in _on_read_header
    self.fields_num = data[12]
IndexError: index out of range
2018-03-25 10:28:27,910 [tornado_server.py:127] client quit ('127.0.0.1', 47048) - valera01
2018-03-25 10:30:43,539 [tornado_server.py:134] connection monitoring app started
2018-03-25 10:30:46,871 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47054)
2018-03-25 10:30:46,875 [tornado_server.py:60] got a new message from ('127.0.0.1', 47054) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:30:46,876 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:30:46,876 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:30:46,878 [tornado_server.py:103] got a new message from ('127.0.0.1', 47054) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:30:46,879 [tornado_server.py:114] answered ('127.0.0.1', 47054)
2018-03-25 10:30:46,880 [tornado_server.py:60] got a new message from ('127.0.0.1', 47054) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:30:46,881 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:30:46,882 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 91, in _on_read_header
    self._read_more()
  File "tornado_server.py", line 123, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:30:46,884 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f3f8925ad90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 91, in _on_read_header
    self._read_more()
  File "tornado_server.py", line 123, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:30:46,886 [tornado_server.py:103] got a new message from ('127.0.0.1', 47054) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:30:46,886 [tornado_server.py:127] client quit ('127.0.0.1', 47054) - valera01
2018-03-25 10:31:39,626 [tornado_server.py:130] connection monitoring app started
2018-03-25 10:31:41,528 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47062)
2018-03-25 10:31:41,531 [tornado_server.py:60] got a new message from ('127.0.0.1', 47062) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:31:41,532 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:31:41,533 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:31:41,535 [tornado_server.py:106] got a new message from ('127.0.0.1', 47062) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:31:41,536 [tornado_server.py:117] answered ('127.0.0.1', 47062)
2018-03-25 10:31:41,537 [tornado_server.py:60] got a new message from ('127.0.0.1', 47062) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:31:41,538 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:31:41,539 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 94, in _on_read_header
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:31:41,540 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc8f1243f28>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 94, in _on_read_header
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:31:41,542 [tornado_server.py:106] got a new message from ('127.0.0.1', 47062) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:31:41,543 [tornado_server.py:123] client quit ('127.0.0.1', 47062) - valera01
2018-03-25 10:32:52,815 [tornado_server.py:136] connection monitoring app started
2018-03-25 10:32:55,089 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47068)
2018-03-25 10:32:55,092 [tornado_server.py:60] got a new message from ('127.0.0.1', 47068) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:32:55,093 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:32:55,094 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:32:55,096 [tornado_server.py:102] got a new message from ('127.0.0.1', 47068) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:32:55,097 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 125, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:32:55,100 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc0e25e61e0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 112, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 125, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:32:55,102 [tornado_server.py:129] client quit ('127.0.0.1', 47068) - valera01
2018-03-25 10:35:05,906 [tornado_server.py:136] connection monitoring app started
2018-03-25 10:35:09,044 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47074)
2018-03-25 10:35:09,048 [tornado_server.py:60] got a new message from ('127.0.0.1', 47074) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:35:09,049 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:35:09,049 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:35:09,051 [tornado_server.py:103] got a new message from ('127.0.0.1', 47074) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:35:09,052 [tornado_server.py:116] answered ('127.0.0.1', 47074)
2018-03-25 10:35:09,053 [tornado_server.py:60] got a new message from ('127.0.0.1', 47074) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:35:09,054 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:35:09,055 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 91, in _on_read_header
    self._read_more()
  File "tornado_server.py", line 125, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:35:09,058 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f4c1ca71d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 91, in _on_read_header
    self._read_more()
  File "tornado_server.py", line 125, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:35:09,060 [tornado_server.py:103] got a new message from ('127.0.0.1', 47074) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:35:09,060 [tornado_server.py:129] client quit ('127.0.0.1', 47074) - valera01
2018-03-25 10:35:29,761 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47078)
2018-03-25 10:35:29,763 [tornado_server.py:60] got a new message from ('127.0.0.1', 47078) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:35:29,764 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:35:29,764 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:35:29,766 [tornado_server.py:103] got a new message from ('127.0.0.1', 47078) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:35:29,767 [tornado_server.py:116] answered ('127.0.0.1', 47078)
2018-03-25 10:35:29,768 [tornado_server.py:60] got a new message from ('127.0.0.1', 47078) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:35:29,768 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:35:29,768 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 91, in _on_read_header
    self._read_more()
  File "tornado_server.py", line 125, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:35:29,769 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f4c20686510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 91, in _on_read_header
    self._read_more()
  File "tornado_server.py", line 125, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 10:35:29,770 [tornado_server.py:103] got a new message from ('127.0.0.1', 47078) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:35:29,771 [tornado_server.py:129] client quit ('127.0.0.1', 47078) - valera01
2018-03-25 10:37:07,600 [tornado_server.py:136] connection monitoring app started
2018-03-25 10:37:09,418 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47104)
2018-03-25 10:37:09,421 [tornado_server.py:60] got a new message from ('127.0.0.1', 47104) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:37:09,422 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:37:09,423 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:37:09,424 [tornado_server.py:103] got a new message from ('127.0.0.1', 47104) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:37:09,424 [tornado_server.py:116] answered ('127.0.0.1', 47104)
2018-03-25 10:37:09,425 [tornado_server.py:60] got a new message from ('127.0.0.1', 47104) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:37:09,426 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:37:09,427 [tornado_server.py:103] got a new message from ('127.0.0.1', 47104) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:37:09,427 [tornado_server.py:116] answered ('127.0.0.1', 47104)
2018-03-25 10:37:09,432 [tornado_server.py:129] client quit ('127.0.0.1', 47104) - valera01
2018-03-25 10:38:24,499 [tornado_server.py:136] connection monitoring app started
2018-03-25 10:38:24,501 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 39342)
2018-03-25 10:38:24,503 [tornado_server.py:60] got a new message from ('127.0.0.1', 39342) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:38:24,503 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:38:24,503 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:38:24,504 [tornado_server.py:103] got a new message from ('127.0.0.1', 39342) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:38:24,504 [tornado_server.py:116] answered ('127.0.0.1', 39342)
2018-03-25 10:38:24,505 [tornado_server.py:129] client quit ('127.0.0.1', 39342) - valera01
2018-03-25 10:47:02,312 [tornado_server.py:133] connection monitoring app started
2018-03-25 10:47:02,314 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56034)
2018-03-25 10:47:02,316 [tornado_server.py:60] got a new message from ('127.0.0.1', 56034) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:47:02,316 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:47:02,316 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:47:02,317 [tornado_server.py:100] got a new message from ('127.0.0.1', 56034) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:47:02,317 [tornado_server.py:113] answered ('127.0.0.1', 56034)
2018-03-25 10:47:02,319 [tornado_server.py:126] client quit ('127.0.0.1', 56034) - valera01
2018-03-25 10:47:04,845 [tornado_server.py:133] connection monitoring app started
2018-03-25 10:47:06,404 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47356)
2018-03-25 10:47:06,405 [tornado_server.py:60] got a new message from ('127.0.0.1', 47356) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:47:06,406 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:47:06,406 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:47:06,407 [tornado_server.py:100] got a new message from ('127.0.0.1', 47356) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:47:06,407 [tornado_server.py:113] answered ('127.0.0.1', 47356)
2018-03-25 10:47:06,408 [tornado_server.py:60] got a new message from ('127.0.0.1', 47356) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:47:06,409 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:47:06,409 [tornado_server.py:100] got a new message from ('127.0.0.1', 47356) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:47:06,410 [tornado_server.py:113] answered ('127.0.0.1', 47356)
2018-03-25 10:47:06,415 [tornado_server.py:126] client quit ('127.0.0.1', 47356) - valera01
2018-03-25 10:47:17,549 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47358)
2018-03-25 10:47:17,551 [tornado_server.py:60] got a new message from ('127.0.0.1', 47358) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:47:17,552 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:47:17,553 [tornado_server.py:78] valera01 authenticated

2018-03-25 10:47:17,554 [tornado_server.py:100] got a new message from ('127.0.0.1', 47358) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:47:17,555 [tornado_server.py:113] answered ('127.0.0.1', 47358)
2018-03-25 10:47:17,557 [tornado_server.py:60] got a new message from ('127.0.0.1', 47358) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 10:47:17,558 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 10:47:17,558 [tornado_server.py:100] got a new message from ('127.0.0.1', 47358) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 10:47:17,559 [tornado_server.py:113] answered ('127.0.0.1', 47358)
2018-03-25 10:47:17,569 [tornado_server.py:126] client quit ('127.0.0.1', 47358) - valera01
2018-03-25 11:49:19,754 [tornado_server.py:133] connection monitoring app started
2018-03-25 11:49:19,756 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 36700)
2018-03-25 11:49:19,758 [tornado_server.py:60] got a new message from ('127.0.0.1', 36700) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 11:49:19,758 [tornado_server.py:72] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 11:49:19,758 [tornado_server.py:78] valera01 authenticated

2018-03-25 11:49:19,759 [tornado_server.py:100] got a new message from ('127.0.0.1', 36700) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 11:49:19,759 [tornado_server.py:113] answered ('127.0.0.1', 36700)
2018-03-25 11:49:19,761 [tornado_server.py:126] client quit ('127.0.0.1', 36700) - valera01
2018-03-25 12:19:22,401 [tornado_server.py:53] PikaClient: __init__
2018-03-25 12:19:22,401 [tornado_server.py:213] connection monitoring app started
2018-03-25 12:19:22,402 [tornado_server.py:68] PikaClient: Connecting to RabbitMQ
2018-03-25 12:19:22,406 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f0069daae18>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/pika/connection.py", line 1836, in _on_connect_timer
    error)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/pika/callback.py", line 60, in wrapper
    return function(*tuple(args), **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/pika/callback.py", line 92, in wrapper
    return function(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/pika/callback.py", line 236, in process
    callback(*args, **keywords)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/pika/connection.py", line 1768, in _on_connection_error
    self.params.connection_attempts)
pika.exceptions.AMQPConnectionError: Connection to 127.0.0.1:5672 failed: [Errno 111] Connection refused
2018-03-25 12:21:24,293 [tornado_server.py:53] PikaClient: __init__
2018-03-25 12:21:24,294 [tornado_server.py:213] connection monitoring app started
2018-03-25 12:21:24,294 [tornado_server.py:68] PikaClient: Connecting to RabbitMQ
2018-03-25 12:21:24,308 [tornado_server.py:85] PikaClient: connected to RabbitMQ
2018-03-25 12:21:24,313 [tornado_server.py:91] PikaClient: Channel open, Declaring exchange
2018-03-25 12:21:53,607 [tornado_server.py:127] receive a new connection from ('127.0.0.1', 49218)
2018-03-25 12:21:53,610 [tornado_server.py:140] got a new message from ('127.0.0.1', 49218) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:21:53,611 [tornado_server.py:152] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:21:53,611 [tornado_server.py:158] valera01 authenticated

2018-03-25 12:21:53,613 [tornado_server.py:180] got a new message from ('127.0.0.1', 49218) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:21:53,614 [tornado_server.py:193] answered ('127.0.0.1', 49218)
2018-03-25 12:21:53,615 [tornado_server.py:140] got a new message from ('127.0.0.1', 49218) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:21:53,616 [tornado_server.py:152] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:21:53,616 [tornado_server.py:180] got a new message from ('127.0.0.1', 49218) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:21:53,617 [tornado_server.py:193] answered ('127.0.0.1', 49218)
2018-03-25 12:21:53,623 [tornado_server.py:206] client quit ('127.0.0.1', 49218) - valera01
2018-03-25 12:43:49,309 [tornado_server.py:53] PikaClient: __init__
2018-03-25 12:43:49,309 [tornado_server.py:224] connection monitoring app started
2018-03-25 12:43:49,309 [tornado_server.py:68] PikaClient: Connecting to RabbitMQ
2018-03-25 12:43:49,318 [tornado_server.py:85] PikaClient: connected to RabbitMQ
2018-03-25 12:43:49,320 [tornado_server.py:91] PikaClient: Channel open, Declaring exchange
2018-03-25 12:43:53,298 [tornado_server.py:127] receive a new connection from ('127.0.0.1', 49690)
2018-03-25 12:43:53,301 [tornado_server.py:140] got a new message from ('127.0.0.1', 49690) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:43:53,302 [tornado_server.py:152] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:43:53,302 [tornado_server.py:158] valera01 authenticated

2018-03-25 12:43:53,304 [tornado_server.py:180] got a new message from ('127.0.0.1', 49690) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:43:53,305 [tornado_server.py:204] answered ('127.0.0.1', 49690)
2018-03-25 12:43:53,307 [tornado_server.py:140] got a new message from ('127.0.0.1', 49690) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:43:53,308 [tornado_server.py:152] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:43:53,309 [tornado_server.py:180] got a new message from ('127.0.0.1', 49690) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:43:53,310 [tornado_server.py:204] answered ('127.0.0.1', 49690)
2018-03-25 12:43:53,317 [tornado_server.py:217] client quit ('127.0.0.1', 49690) - valera01
2018-03-25 12:44:24,501 [tornado_server.py:225] connection monitoring app started
2018-03-25 12:44:24,502 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 231, in handle_stream
    Connection(stream, address, conns, self.pc)
AttributeError: 'StatusServer' object has no attribute 'pc'
2018-03-25 12:44:48,890 [tornado_server.py:53] PikaClient: __init__
2018-03-25 12:44:48,891 [tornado_server.py:225] connection monitoring app started
2018-03-25 12:44:48,891 [tornado_server.py:68] PikaClient: Connecting to RabbitMQ
2018-03-25 12:44:48,899 [tornado_server.py:85] PikaClient: connected to RabbitMQ
2018-03-25 12:44:48,902 [tornado_server.py:91] PikaClient: Channel open, Declaring exchange
2018-03-25 12:44:51,088 [tornado_server.py:127] receive a new connection from ('127.0.0.1', 49696)
2018-03-25 12:44:51,090 [tornado_server.py:140] got a new message from ('127.0.0.1', 49696) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:44:51,091 [tornado_server.py:152] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:44:51,092 [tornado_server.py:158] valera01 authenticated

2018-03-25 12:44:51,093 [tornado_server.py:180] got a new message from ('127.0.0.1', 49696) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:44:51,094 [tornado_server.py:204] answered ('127.0.0.1', 49696)
2018-03-25 12:44:51,095 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 206, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 192, in _notify_about_message
    body  = json.dumps({
NameError: name 'json' is not defined
2018-03-25 12:44:51,097 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fe4cff6b8c8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 206, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 192, in _notify_about_message
    body  = json.dumps({
NameError: name 'json' is not defined
2018-03-25 12:44:51,099 [tornado_server.py:218] client quit ('127.0.0.1', 49696) - valera01
2018-03-25 12:45:06,663 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:45:06,664 [tornado_server.py:227] connection monitoring app started
2018-03-25 12:45:06,664 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:45:06,672 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 12:45:06,674 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 12:45:08,461 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49700)
2018-03-25 12:45:08,462 [tornado_server.py:142] got a new message from ('127.0.0.1', 49700) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:45:08,463 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:45:08,463 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:45:08,464 [tornado_server.py:182] got a new message from ('127.0.0.1', 49700) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:45:08,465 [tornado_server.py:206] answered ('127.0.0.1', 49700)
2018-03-25 12:45:08,465 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 199, in _notify_about_message
    self.fields
TypeError: unhashable type: 'dict'
2018-03-25 12:45:08,468 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f49d9bcb8c8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 199, in _notify_about_message
    self.fields
TypeError: unhashable type: 'dict'
2018-03-25 12:45:08,471 [tornado_server.py:220] client quit ('127.0.0.1', 49700) - valera01
2018-03-25 12:46:02,174 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:46:02,174 [tornado_server.py:227] connection monitoring app started
2018-03-25 12:46:02,175 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:46:02,183 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 12:46:02,185 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 12:46:04,068 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49704)
2018-03-25 12:46:04,071 [tornado_server.py:142] got a new message from ('127.0.0.1', 49704) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:46:04,071 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:46:04,072 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:46:04,072 [tornado_server.py:182] got a new message from ('127.0.0.1', 49704) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:46:04,073 [tornado_server.py:206] answered ('127.0.0.1', 49704)
2018-03-25 12:46:04,074 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 201, in _notify_about_message
    self.output_channel.basic_publish(
AttributeError: 'Connection' object has no attribute 'output_channel'
2018-03-25 12:46:04,077 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fdd0788d8c8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 201, in _notify_about_message
    self.output_channel.basic_publish(
AttributeError: 'Connection' object has no attribute 'output_channel'
2018-03-25 12:46:04,079 [tornado_server.py:220] client quit ('127.0.0.1', 49704) - valera01
2018-03-25 12:46:19,334 [tornado_server.py:227] connection monitoring app started
2018-03-25 12:46:19,335 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 233, in handle_stream
    Connection(stream, address, conns, self.pc)
AttributeError: 'StatusServer' object has no attribute 'pc'
2018-03-25 12:46:53,781 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:46:53,782 [tornado_server.py:227] connection monitoring app started
2018-03-25 12:46:53,782 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:46:53,790 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 12:46:53,792 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 12:46:56,952 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49718)
2018-03-25 12:46:56,954 [tornado_server.py:142] got a new message from ('127.0.0.1', 49718) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:46:56,954 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:46:56,954 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:46:56,955 [tornado_server.py:182] got a new message from ('127.0.0.1', 49718) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:46:56,956 [tornado_server.py:206] answered ('127.0.0.1', 49718)
2018-03-25 12:46:56,956 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 201, in _notify_about_message
    self.channel.basic_publish(
AttributeError: 'Connection' object has no attribute 'channel'
2018-03-25 12:46:56,959 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f11b0a068c8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 201, in _notify_about_message
    self.channel.basic_publish(
AttributeError: 'Connection' object has no attribute 'channel'
2018-03-25 12:46:56,961 [tornado_server.py:220] client quit ('127.0.0.1', 49718) - valera01
2018-03-25 12:47:13,972 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:47:13,972 [tornado_server.py:227] connection monitoring app started
2018-03-25 12:47:13,972 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:47:13,980 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 12:47:13,982 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 12:47:16,118 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49722)
2018-03-25 12:47:16,120 [tornado_server.py:142] got a new message from ('127.0.0.1', 49722) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:47:16,121 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:47:16,122 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:47:16,123 [tornado_server.py:182] got a new message from ('127.0.0.1', 49722) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:47:16,124 [tornado_server.py:206] answered ('127.0.0.1', 49722)
2018-03-25 12:47:16,125 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 203, in _notify_about_message
    body=body)
TypeError: basic_publish() missing 1 required positional argument: 'routing_key'
2018-03-25 12:47:16,128 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff58dd5d8c8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 208, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 203, in _notify_about_message
    body=body)
TypeError: basic_publish() missing 1 required positional argument: 'routing_key'
2018-03-25 12:47:16,130 [tornado_server.py:220] client quit ('127.0.0.1', 49722) - valera01
2018-03-25 12:47:35,757 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:47:35,758 [tornado_server.py:228] connection monitoring app started
2018-03-25 12:47:35,758 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:47:35,765 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 12:47:35,767 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 12:47:37,080 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49726)
2018-03-25 12:47:37,083 [tornado_server.py:142] got a new message from ('127.0.0.1', 49726) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:47:37,083 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:47:37,083 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:47:37,084 [tornado_server.py:182] got a new message from ('127.0.0.1', 49726) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:47:37,085 [tornado_server.py:207] answered ('127.0.0.1', 49726)
2018-03-25 12:47:37,086 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 203, in _notify_about_message
    routing_key=self.name,
AttributeError: 'Connection' object has no attribute 'name'
2018-03-25 12:47:37,089 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f22118609d8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 203, in _notify_about_message
    routing_key=self.name,
AttributeError: 'Connection' object has no attribute 'name'
2018-03-25 12:47:37,091 [tornado_server.py:221] client quit ('127.0.0.1', 49726) - valera01
2018-03-25 12:47:38,791 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49728)
2018-03-25 12:47:38,793 [tornado_server.py:142] got a new message from ('127.0.0.1', 49728) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:47:38,794 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:47:38,795 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:47:38,795 [tornado_server.py:182] got a new message from ('127.0.0.1', 49728) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:47:38,796 [tornado_server.py:207] answered ('127.0.0.1', 49728)
2018-03-25 12:47:38,797 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 203, in _notify_about_message
    routing_key=self.name,
AttributeError: 'Connection' object has no attribute 'name'
2018-03-25 12:47:38,798 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f22115b90d0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "tornado_server.py", line 203, in _notify_about_message
    routing_key=self.name,
AttributeError: 'Connection' object has no attribute 'name'
2018-03-25 12:47:38,799 [tornado_server.py:221] client quit ('127.0.0.1', 49728) - valera01
2018-03-25 12:47:44,698 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:47:44,699 [tornado_server.py:228] connection monitoring app started
2018-03-25 12:47:44,699 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:47:44,707 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 12:47:44,709 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 12:47:46,920 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49732)
2018-03-25 12:47:46,923 [tornado_server.py:142] got a new message from ('127.0.0.1', 49732) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:47:46,924 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:47:46,925 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:47:46,926 [tornado_server.py:182] got a new message from ('127.0.0.1', 49732) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:47:46,927 [tornado_server.py:207] answered ('127.0.0.1', 49732)
2018-03-25 12:47:46,929 [tornado_server.py:142] got a new message from ('127.0.0.1', 49732) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:47:46,930 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:47:46,931 [tornado_server.py:182] got a new message from ('127.0.0.1', 49732) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:47:46,932 [tornado_server.py:207] answered ('127.0.0.1', 49732)
2018-03-25 12:47:46,939 [tornado_server.py:221] client quit ('127.0.0.1', 49732) - valera01
2018-03-25 12:48:17,764 [tornado_server.py:228] connection monitoring app started
2018-03-25 12:48:17,766 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 234, in handle_stream
    Connection(stream, address, conns, self.pc)
AttributeError: 'StatusServer' object has no attribute 'pc'
2018-03-25 12:52:44,998 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:52:44,998 [tornado_server.py:228] connection monitoring app started
2018-03-25 12:52:44,998 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:52:45,001 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 54678)
2018-03-25 12:52:45,003 [tornado_server.py:142] got a new message from ('127.0.0.1', 54678) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:52:45,004 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:52:45,004 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:52:45,005 [tornado_server.py:182] got a new message from ('127.0.0.1', 54678) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:52:45,005 [tornado_server.py:207] answered ('127.0.0.1', 54678)
2018-03-25 12:52:45,006 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 201, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 12:52:45,008 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f767c1100d0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 201, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 12:52:45,010 [tornado_server.py:221] client quit ('127.0.0.1', 54678) - valera01
2018-03-25 12:54:44,960 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:54:44,961 [tornado_server.py:228] connection monitoring app started
2018-03-25 12:54:44,961 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:54:44,969 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 12:54:44,972 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 12:54:46,588 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 49826)
2018-03-25 12:54:46,590 [tornado_server.py:142] got a new message from ('127.0.0.1', 49826) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:54:46,590 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:54:46,591 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:54:46,591 [tornado_server.py:182] got a new message from ('127.0.0.1', 49826) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:54:46,592 [tornado_server.py:207] answered ('127.0.0.1', 49826)
2018-03-25 12:54:46,594 [tornado_server.py:142] got a new message from ('127.0.0.1', 49826) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:54:46,595 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:54:46,595 [tornado_server.py:182] got a new message from ('127.0.0.1', 49826) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:54:46,596 [tornado_server.py:207] answered ('127.0.0.1', 49826)
2018-03-25 12:54:46,600 [tornado_server.py:221] client quit ('127.0.0.1', 49826) - valera01
2018-03-25 12:55:41,454 [tornado_server.py:55] PikaClient: __init__
2018-03-25 12:55:41,455 [tornado_server.py:228] connection monitoring app started
2018-03-25 12:55:41,455 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 12:55:41,458 [tornado_server.py:129] receive a new connection from ('127.0.0.1', 39104)
2018-03-25 12:55:41,460 [tornado_server.py:142] got a new message from ('127.0.0.1', 39104) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 12:55:41,461 [tornado_server.py:154] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 12:55:41,461 [tornado_server.py:160] valera01 authenticated

2018-03-25 12:55:41,461 [tornado_server.py:182] got a new message from ('127.0.0.1', 39104) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 12:55:41,462 [tornado_server.py:207] answered ('127.0.0.1', 39104)
2018-03-25 12:55:41,463 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 201, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 12:55:41,464 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f3eda8760d0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 209, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 201, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 12:55:41,466 [tornado_server.py:221] client quit ('127.0.0.1', 39104) - valera01
2018-03-25 13:00:07,197 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:00:07,198 [tornado_server.py:206] connection monitoring app started
2018-03-25 13:00:07,198 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:00:07,200 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 35318)
2018-03-25 13:00:07,203 [tornado_server.py:120] got a new message from ('127.0.0.1', 35318) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:00:07,203 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:00:07,204 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:00:07,204 [tornado_server.py:160] got a new message from ('127.0.0.1', 35318) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:00:07,205 [tornado_server.py:185] answered ('127.0.0.1', 35318)
2018-03-25 13:00:07,205 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 187, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 179, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:00:07,207 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f65de4c1e18>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 187, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 179, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:00:07,209 [tornado_server.py:199] client quit ('127.0.0.1', 35318) - valera01
2018-03-25 13:01:01,912 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:01:01,912 [tornado_server.py:207] connection monitoring app started
2018-03-25 13:01:01,913 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:01:01,915 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 44136)
2018-03-25 13:01:01,918 [tornado_server.py:120] got a new message from ('127.0.0.1', 44136) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:01:01,918 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:01:01,918 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:01:01,919 [tornado_server.py:160] got a new message from ('127.0.0.1', 44136) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:01:01,919 [tornado_server.py:186] answered ('127.0.0.1', 44136)
2018-03-25 13:01:01,920 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 188, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 180, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:01:01,922 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fe31a217d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 188, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 180, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:01:01,924 [tornado_server.py:200] client quit ('127.0.0.1', 44136) - valera01
2018-03-25 13:01:25,976 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:01:25,977 [tornado_server.py:208] connection monitoring app started
2018-03-25 13:01:25,977 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:01:25,979 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 42756)
2018-03-25 13:01:25,982 [tornado_server.py:120] got a new message from ('127.0.0.1', 42756) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:01:25,983 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:01:25,983 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:01:25,983 [tornado_server.py:160] got a new message from ('127.0.0.1', 42756) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:01:25,984 [tornado_server.py:187] answered ('127.0.0.1', 42756)
2018-03-25 13:01:25,984 [tornado_server.py:180] fuck
2018-03-25 13:01:25,984 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:01:25,986 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fd17f869e18>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:01:25,988 [tornado_server.py:201] client quit ('127.0.0.1', 42756) - valera01
2018-03-25 13:01:42,177 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:01:42,177 [tornado_server.py:208] connection monitoring app started
2018-03-25 13:01:42,177 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:01:42,180 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 38722)
2018-03-25 13:01:42,182 [tornado_server.py:120] got a new message from ('127.0.0.1', 38722) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:01:42,183 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:01:42,183 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:01:42,184 [tornado_server.py:160] got a new message from ('127.0.0.1', 38722) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:01:42,184 [tornado_server.py:187] answered ('127.0.0.1', 38722)
2018-03-25 13:01:42,185 [tornado_server.py:179] <tornado_server.PikaClient object at 0x7fbb253691d0>
2018-03-25 13:01:42,185 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:01:42,187 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fbb25366d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:01:42,189 [tornado_server.py:201] client quit ('127.0.0.1', 38722) - valera01
2018-03-25 13:03:01,189 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:03:01,189 [tornado_server.py:208] connection monitoring app started
2018-03-25 13:03:01,189 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:03:01,192 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 44334)
2018-03-25 13:03:01,195 [tornado_server.py:120] got a new message from ('127.0.0.1', 44334) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:03:01,195 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:03:01,195 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:03:01,196 [tornado_server.py:160] got a new message from ('127.0.0.1', 44334) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:03:01,196 [tornado_server.py:187] answered ('127.0.0.1', 44334)
2018-03-25 13:03:01,197 [tornado_server.py:179] <tornado_server.PikaClient object at 0x7f2530f650b8>
2018-03-25 13:03:01,197 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:03:01,199 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2530f5ed90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:03:01,201 [tornado_server.py:201] client quit ('127.0.0.1', 44334) - valera01
2018-03-25 13:03:54,836 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:03:54,837 [tornado_server.py:208] connection monitoring app started
2018-03-25 13:03:54,837 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:03:54,839 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 53306)
2018-03-25 13:03:54,842 [tornado_server.py:120] got a new message from ('127.0.0.1', 53306) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:03:54,842 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:03:54,843 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:03:54,843 [tornado_server.py:160] got a new message from ('127.0.0.1', 53306) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:03:54,844 [tornado_server.py:187] answered ('127.0.0.1', 53306)
2018-03-25 13:03:54,858 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:03:54,860 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f4a5ededd90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 189, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:03:54,862 [tornado_server.py:201] client quit ('127.0.0.1', 53306) - valera01
2018-03-25 13:04:16,759 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:04:16,759 [tornado_server.py:208] connection monitoring app started
2018-03-25 13:04:16,759 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:04:16,762 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 51104)
2018-03-25 13:04:16,764 [tornado_server.py:120] got a new message from ('127.0.0.1', 51104) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:04:16,765 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:04:16,765 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:04:16,765 [tornado_server.py:160] got a new message from ('127.0.0.1', 51104) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:04:16,766 [tornado_server.py:187] answered ('127.0.0.1', 51104)
2018-03-25 13:04:16,774 [tornado_server.py:201] client quit ('127.0.0.1', 51104) - valera01
2018-03-25 13:04:33,622 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:04:33,622 [tornado_server.py:208] connection monitoring app started
2018-03-25 13:04:33,623 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:04:33,625 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 40844)
2018-03-25 13:04:33,628 [tornado_server.py:120] got a new message from ('127.0.0.1', 40844) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:04:33,628 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:04:33,628 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:04:33,629 [tornado_server.py:160] got a new message from ('127.0.0.1', 40844) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:04:33,630 [tornado_server.py:187] answered ('127.0.0.1', 40844)
2018-03-25 13:04:33,632 [tornado_server.py:201] client quit ('127.0.0.1', 40844) - valera01
2018-03-25 13:05:43,532 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:05:43,532 [tornado_server.py:212] connection monitoring app started
2018-03-25 13:05:43,532 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:05:43,535 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 48234)
2018-03-25 13:05:43,537 [tornado_server.py:120] got a new message from ('127.0.0.1', 48234) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:05:43,538 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:05:43,538 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:05:43,539 [tornado_server.py:160] got a new message from ('127.0.0.1', 48234) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:05:43,539 [tornado_server.py:191] answered ('127.0.0.1', 48234)
2018-03-25 13:05:43,540 [tornado_server.py:67] PikaClient: Already connecting to RabbitMQ
2018-03-25 13:05:43,540 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 193, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 183, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:05:43,542 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fd873766e18>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 193, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 183, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:05:43,544 [tornado_server.py:205] client quit ('127.0.0.1', 48234) - valera01
2018-03-25 13:06:09,345 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:06:09,345 [tornado_server.py:209] connection monitoring app started
2018-03-25 13:06:09,346 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:06:09,348 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 53240)
2018-03-25 13:06:09,351 [tornado_server.py:120] got a new message from ('127.0.0.1', 53240) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:06:09,351 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:06:09,352 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:06:09,352 [tornado_server.py:160] got a new message from ('127.0.0.1', 53240) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:06:09,353 [tornado_server.py:188] answered ('127.0.0.1', 53240)
2018-03-25 13:06:09,353 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 190, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:06:09,355 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f963eab2d90>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 190, in _on_write_complete
    self._notify_about_message()
  File "/home/usr/dev/tornado_task/tornado_server.py", line 181, in _notify_about_message
    self.pc.channel.basic_publish(
AttributeError: 'NoneType' object has no attribute 'basic_publish'
2018-03-25 13:06:09,357 [tornado_server.py:202] client quit ('127.0.0.1', 53240) - valera01
2018-03-25 13:06:20,457 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:06:20,457 [tornado_server.py:209] connection monitoring app started
2018-03-25 13:06:20,457 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:06:20,460 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 46682)
2018-03-25 13:06:20,462 [tornado_server.py:120] got a new message from ('127.0.0.1', 46682) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:06:20,463 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:06:20,463 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:06:20,464 [tornado_server.py:160] got a new message from ('127.0.0.1', 46682) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:06:20,464 [tornado_server.py:188] answered ('127.0.0.1', 46682)
2018-03-25 13:06:20,466 [tornado_server.py:202] client quit ('127.0.0.1', 46682) - valera01
2018-03-25 13:13:23,488 [tornado_server.py:55] PikaClient: __init__
2018-03-25 13:13:23,489 [tornado_server.py:209] connection monitoring app started
2018-03-25 13:13:23,489 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 13:13:23,497 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 13:13:23,499 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 13:13:32,188 [tornado_server.py:107] receive a new connection from ('127.0.0.1', 50144)
2018-03-25 13:13:32,190 [tornado_server.py:120] got a new message from ('127.0.0.1', 50144) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:13:32,191 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:13:32,192 [tornado_server.py:138] valera01 authenticated

2018-03-25 13:13:32,193 [tornado_server.py:160] got a new message from ('127.0.0.1', 50144) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:13:32,194 [tornado_server.py:188] answered ('127.0.0.1', 50144)
2018-03-25 13:13:32,197 [tornado_server.py:120] got a new message from ('127.0.0.1', 50144) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 13:13:32,198 [tornado_server.py:132] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 13:13:32,199 [tornado_server.py:160] got a new message from ('127.0.0.1', 50144) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 13:13:32,199 [tornado_server.py:188] answered ('127.0.0.1', 50144)
2018-03-25 13:13:32,206 [tornado_server.py:202] client quit ('127.0.0.1', 50144) - valera01
2018-03-25 13:30:26,663 [tornado_server.py:149] connection monitoring app started
2018-03-25 13:30:34,152 [tornado_server.py:134] receive a new connection from ('127.0.0.1', 50290)
2018-03-25 13:30:34,153 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 155, in handle_stream
    Connection(stream, address, conns)
  File "tornado_server.py", line 139, in __init__
    self.stream.set_close_callback(self._on_close)
AttributeError: 'Connection' object has no attribute '_on_close'
2018-03-25 13:30:57,116 [tornado_server.py:156] connection monitoring app started
2018-03-25 13:31:03,875 [tornado_server.py:134] receive a new connection from ('127.0.0.1', 50292)
2018-03-25 13:31:03,877 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 162, in handle_stream
    Connection(stream, address, conns)
  File "tornado_server.py", line 140, in __init__
    self.stream.read_bytes(13, self._on_read_header, partial=True)
AttributeError: 'Connection' object has no attribute '_on_read_header'
2018-03-25 13:31:17,452 [tornado_server.py:155] connection monitoring app started
2018-03-25 13:31:21,052 [tornado_server.py:155] connection monitoring app started
2018-03-25 13:31:44,734 [tornado_server.py:134] receive a new connection from ('127.0.0.1', 50296)
2018-03-25 13:31:44,735 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 161, in handle_stream
    Connection(stream, address, conns)
  File "tornado_server.py", line 142, in __init__
    logger.log(self.stream)
TypeError: log() missing 1 required positional argument: 'msg'
2018-03-25 13:32:41,573 [tornado_server.py:155] connection monitoring app started
2018-03-25 13:32:50,173 [tornado_server.py:155] connection monitoring app started
2018-03-25 13:32:50,175 [tornado_server.py:168] connection monitoring app started
2018-03-25 13:32:59,434 [tornado_server.py:155] connection monitoring app started
2018-03-25 13:32:59,437 [tornado_server.py:168] connection notificaiton app started
2018-03-25 13:34:22,036 [tornado_server.py:155] connection monitoring app started
2018-03-25 13:34:22,039 [tornado_server.py:168] connection notification app started
2018-03-25 14:12:05,740 [tornado_server.py:55] PikaClient: __init__
2018-03-25 14:12:05,740 [tornado_server.py:209] connection monitoring app started
2018-03-25 14:12:05,740 [tornado_server.py:70] PikaClient: Connecting to RabbitMQ
2018-03-25 14:12:05,748 [tornado_server.py:87] PikaClient: connected to RabbitMQ
2018-03-25 14:12:05,751 [tornado_server.py:93] PikaClient: Channel open, Declaring exchange
2018-03-25 14:12:11,694 [tornado_server.py:155] connection monitoring app started
2018-03-25 14:12:11,696 [tornado_server.py:168] connection notification app started
2018-03-25 14:12:39,098 [tornado_server.py:155] connection monitoring app started
2018-03-25 14:12:39,100 [tornado_server.py:168] connection notification app started
2018-03-25 14:21:25,408 [tornado_server.py:157] connection monitoring app started
2018-03-25 14:21:25,410 [tornado_server.py:170] connection notification app started
2018-03-25 14:21:28,550 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 163, in handle_stream
    Connection(stream, address, conns, notify_server)
NameError: name 'notify_server' is not defined
2018-03-25 14:21:52,824 [tornado_server.py:157] connection monitoring app started
2018-03-25 14:21:52,827 [tornado_server.py:170] connection notification app started
2018-03-25 14:21:54,845 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 51846)
2018-03-25 14:21:54,848 [tornado_server.py:61] got a new message from ('127.0.0.1', 51846) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:21:54,849 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:21:54,849 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:21:54,850 [tornado_server.py:101] got a new message from ('127.0.0.1', 51846) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:21:54,852 [tornado_server.py:114] answered ('127.0.0.1', 51846)
2018-03-25 14:21:54,853 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    conn.write('blabal')
AttributeError: 'str' object has no attribute 'write'
2018-03-25 14:21:54,855 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f3437374510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    conn.write('blabal')
AttributeError: 'str' object has no attribute 'write'
2018-03-25 14:21:54,857 [tornado_server.py:128] client quit ('127.0.0.1', 51846) - valera01
2018-03-25 14:22:09,453 [tornado_server.py:157] connection monitoring app started
2018-03-25 14:22:09,455 [tornado_server.py:170] connection notification app started
2018-03-25 14:22:12,038 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 51848)
2018-03-25 14:22:12,041 [tornado_server.py:61] got a new message from ('127.0.0.1', 51848) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:22:12,042 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:22:12,042 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:22:12,043 [tornado_server.py:101] got a new message from ('127.0.0.1', 51848) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:22:12,044 [tornado_server.py:114] answered ('127.0.0.1', 51848)
2018-03-25 14:22:12,045 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 184, in message_all
    conn.write('blabal')
AttributeError: 'str' object has no attribute 'write'
2018-03-25 14:22:12,047 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f562e493510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 184, in message_all
    conn.write('blabal')
AttributeError: 'str' object has no attribute 'write'
2018-03-25 14:22:12,050 [tornado_server.py:128] client quit ('127.0.0.1', 51848) - valera01
2018-03-25 14:24:14,934 [tornado_server.py:156] connection monitoring app started
2018-03-25 14:24:14,937 [tornado_server.py:169] connection notification app started
2018-03-25 14:24:29,620 [tornado_server.py:156] connection monitoring app started
2018-03-25 14:24:29,622 [tornado_server.py:169] connection notification app started
2018-03-25 14:28:45,947 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:28:45,950 [tornado_server.py:170] connection notification app started
2018-03-25 14:28:51,871 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 51880)
2018-03-25 14:28:51,873 [tornado_server.py:61] got a new message from ('127.0.0.1', 51880) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:28:51,874 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:28:51,874 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:28:51,875 [tornado_server.py:101] got a new message from ('127.0.0.1', 51880) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:28:51,876 [tornado_server.py:114] answered ('127.0.0.1', 51880)
2018-03-25 14:28:51,876 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    conn.write('blabal')
AttributeError: 'str' object has no attribute 'write'
2018-03-25 14:28:51,879 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fecbd42c510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    conn.write('blabal')
AttributeError: 'str' object has no attribute 'write'
2018-03-25 14:28:51,882 [tornado_server.py:128] client quit ('127.0.0.1', 51880) - valera01
2018-03-25 14:29:28,837 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:29:28,839 [tornado_server.py:170] connection notification app started
2018-03-25 14:29:29,847 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 51886)
2018-03-25 14:29:29,850 [tornado_server.py:61] got a new message from ('127.0.0.1', 51886) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:29:29,851 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:29:29,852 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:29:29,853 [tornado_server.py:101] got a new message from ('127.0.0.1', 51886) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:29:29,854 [tornado_server.py:114] answered ('127.0.0.1', 51886)
2018-03-25 14:29:29,856 [tornado_server.py:61] got a new message from ('127.0.0.1', 51886) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:29:29,857 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:29:29,858 [tornado_server.py:101] got a new message from ('127.0.0.1', 51886) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:29:29,859 [tornado_server.py:114] answered ('127.0.0.1', 51886)
2018-03-25 14:29:29,865 [tornado_server.py:128] client quit ('127.0.0.1', 51886) - valera01
2018-03-25 14:32:32,532 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:32:32,535 [tornado_server.py:169] connection notification app started
2018-03-25 14:32:36,689 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 51950)
2018-03-25 14:32:36,691 [tornado_server.py:61] got a new message from ('127.0.0.1', 51950) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:32:36,692 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:32:36,692 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:32:36,693 [tornado_server.py:101] got a new message from ('127.0.0.1', 51950) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:32:36,694 [tornado_server.py:114] answered ('127.0.0.1', 51950)
2018-03-25 14:32:36,695 [tornado_server.py:61] got a new message from ('127.0.0.1', 51950) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:32:36,695 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:32:36,696 [tornado_server.py:101] got a new message from ('127.0.0.1', 51950) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:32:36,696 [tornado_server.py:114] answered ('127.0.0.1', 51950)
2018-03-25 14:32:36,701 [tornado_server.py:128] client quit ('127.0.0.1', 51950) - valera01
2018-03-25 14:33:02,679 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:33:02,682 [tornado_server.py:169] connection notification app started
2018-03-25 14:33:04,180 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 51952)
2018-03-25 14:33:04,183 [tornado_server.py:61] got a new message from ('127.0.0.1', 51952) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:33:04,184 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:33:04,185 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:33:04,186 [tornado_server.py:101] got a new message from ('127.0.0.1', 51952) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:33:04,187 [tornado_server.py:114] answered ('127.0.0.1', 51952)
2018-03-25 14:33:04,189 [tornado_server.py:61] got a new message from ('127.0.0.1', 51952) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:33:04,190 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:33:04,191 [tornado_server.py:101] got a new message from ('127.0.0.1', 51952) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:33:04,192 [tornado_server.py:114] answered ('127.0.0.1', 51952)
2018-03-25 14:33:04,197 [tornado_server.py:128] client quit ('127.0.0.1', 51952) - valera01
2018-03-25 14:33:17,850 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 51954)
2018-03-25 14:33:17,852 [tornado_server.py:61] got a new message from ('127.0.0.1', 51954) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:33:17,852 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:33:17,853 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:33:17,853 [tornado_server.py:101] got a new message from ('127.0.0.1', 51954) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:33:17,854 [tornado_server.py:114] answered ('127.0.0.1', 51954)
2018-03-25 14:33:17,855 [tornado_server.py:61] got a new message from ('127.0.0.1', 51954) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:33:17,856 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:33:17,856 [tornado_server.py:101] got a new message from ('127.0.0.1', 51954) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:33:17,857 [tornado_server.py:114] answered ('127.0.0.1', 51954)
2018-03-25 14:33:27,877 [tornado_server.py:128] client quit ('127.0.0.1', 51954) - valera01
2018-03-25 14:51:53,588 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:51:53,591 [tornado_server.py:170] connection notification app started
2018-03-25 14:54:30,193 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:54:30,195 [tornado_server.py:170] connection notification app started
2018-03-25 14:54:31,668 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53142)
2018-03-25 14:54:31,670 [tornado_server.py:61] got a new message from ('127.0.0.1', 53142) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:54:31,670 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:54:31,671 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:54:31,672 [tornado_server.py:101] got a new message from ('127.0.0.1', 53142) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:54:31,673 [tornado_server.py:114] answered ('127.0.0.1', 53142)
2018-03-25 14:54:31,674 [tornado_server.py:61] got a new message from ('127.0.0.1', 53142) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:54:31,674 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:54:31,675 [tornado_server.py:101] got a new message from ('127.0.0.1', 53142) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:54:31,676 [tornado_server.py:114] answered ('127.0.0.1', 53142)
2018-03-25 14:54:41,687 [tornado_server.py:128] client quit ('127.0.0.1', 53142) - valera01
2018-03-25 14:54:58,016 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53146)
2018-03-25 14:54:58,017 [tornado_server.py:61] got a new message from ('127.0.0.1', 53146) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:54:58,018 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:54:58,018 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:54:58,019 [tornado_server.py:101] got a new message from ('127.0.0.1', 53146) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:54:58,020 [tornado_server.py:114] answered ('127.0.0.1', 53146)
2018-03-25 14:54:58,021 [tornado_server.py:128] client quit ('127.0.0.1', 53146) - valera01
2018-03-25 14:55:04,766 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:55:04,769 [tornado_server.py:170] connection notification app started
2018-03-25 14:55:06,812 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53148)
2018-03-25 14:55:06,814 [tornado_server.py:61] got a new message from ('127.0.0.1', 53148) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:55:06,814 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:55:06,815 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:55:06,815 [tornado_server.py:101] got a new message from ('127.0.0.1', 53148) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:55:06,817 [tornado_server.py:114] answered ('127.0.0.1', 53148)
2018-03-25 14:55:06,817 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 118, in _on_write_complete
    self.stream.read_bytes(13, self._on_read_header)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 418, in read_bytes
    self._try_inline_read()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 857, in _try_inline_read
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 14:55:06,821 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f46bbe15510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 118, in _on_write_complete
    self.stream.read_bytes(13, self._on_read_header)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 418, in read_bytes
    self._try_inline_read()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 857, in _try_inline_read
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 14:55:06,823 [tornado_server.py:128] client quit ('127.0.0.1', 53148) - valera01
2018-03-25 14:55:22,724 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:55:22,727 [tornado_server.py:170] connection notification app started
2018-03-25 14:55:24,708 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53150)
2018-03-25 14:55:24,711 [tornado_server.py:61] got a new message from ('127.0.0.1', 53150) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:55:24,712 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:55:24,713 [tornado_server.py:79] valera01 authenticated

2018-03-25 14:55:24,714 [tornado_server.py:101] got a new message from ('127.0.0.1', 53150) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:55:24,715 [tornado_server.py:114] answered ('127.0.0.1', 53150)
2018-03-25 14:55:24,717 [tornado_server.py:61] got a new message from ('127.0.0.1', 53150) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 14:55:24,718 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 14:55:24,719 [tornado_server.py:101] got a new message from ('127.0.0.1', 53150) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 14:55:24,719 [tornado_server.py:114] answered ('127.0.0.1', 53150)
2018-03-25 14:55:39,860 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53908)
2018-03-25 14:55:39,861 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 176, in handle_stream
    Notification(stream, address, conns, notify_conns)
  File "tornado_server.py", line 152, in __init__
    self.connections = connections
NameError: name 'connections' is not defined
2018-03-25 14:56:12,045 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:56:12,048 [tornado_server.py:170] connection notification app started
2018-03-25 14:56:16,147 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53910)
2018-03-25 14:56:16,151 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 162, in _on_close
    logger.info('notification client quit %s - %s', self.address, self.uid)
AttributeError: 'Notification' object has no attribute 'uid'
2018-03-25 14:56:16,154 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff80547c598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 162, in _on_close
    logger.info('notification client quit %s - %s', self.address, self.uid)
AttributeError: 'Notification' object has no attribute 'uid'
2018-03-25 14:56:47,238 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:56:47,241 [tornado_server.py:171] connection notification app started
2018-03-25 14:56:49,625 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53912)
2018-03-25 14:56:49,626 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 177, in handle_stream
    Notification(stream, address, conns, notify_conns)
  File "tornado_server.py", line 156, in __init__
    self.uid = uuid.uuid()
AttributeError: module 'uuid' has no attribute 'uuid'
2018-03-25 14:56:49,629 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 163, in _on_close
    logger.info('notification client quit %s - %s', self.address, self.uid)
AttributeError: 'Notification' object has no attribute 'uid'
2018-03-25 14:56:49,631 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc77bff5840>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 163, in _on_close
    logger.info('notification client quit %s - %s', self.address, self.uid)
AttributeError: 'Notification' object has no attribute 'uid'
2018-03-25 14:57:01,961 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:57:01,963 [tornado_server.py:171] connection notification app started
2018-03-25 14:57:03,276 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53914)
2018-03-25 14:57:03,278 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 177, in handle_stream
    Notification(stream, address, conns, notify_conns)
  File "tornado_server.py", line 156, in __init__
    self.uid = uuid.uuid()
AttributeError: module 'uuid' has no attribute 'uuid'
2018-03-25 14:57:03,282 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 163, in _on_close
    logger.info('notification client quit %s - %s', self.address, self.uid)
AttributeError: 'Notification' object has no attribute 'uid'
2018-03-25 14:57:03,285 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc4076c8840>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 163, in _on_close
    logger.info('notification client quit %s - %s', self.address, self.uid)
AttributeError: 'Notification' object has no attribute 'uid'
2018-03-25 14:57:42,065 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:57:42,067 [tornado_server.py:171] connection notification app started
2018-03-25 14:57:44,590 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53924)
2018-03-25 14:57:44,595 [tornado_server.py:163] notification client quit ('127.0.0.1', 53924) - 68d6ece8-6e5f-429e-9373-a875e4072f88
2018-03-25 14:57:44,596 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 165, in _on_close
    del self.connections[self.uid]
KeyError: UUID('68d6ece8-6e5f-429e-9373-a875e4072f88')
2018-03-25 14:57:44,597 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7efc94a15598>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 165, in _on_close
    del self.connections[self.uid]
KeyError: UUID('68d6ece8-6e5f-429e-9373-a875e4072f88')
2018-03-25 14:58:14,972 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:58:14,975 [tornado_server.py:168] connection notification app started
2018-03-25 14:58:16,496 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53930)
2018-03-25 14:58:16,499 [tornado_server.py:163] notification client quit ('127.0.0.1', 53930) - a12e3c63-893b-48c6-be45-b61b17cf6814
2018-03-25 14:58:48,151 [tornado_server.py:136] connection monitoring app started
2018-03-25 14:58:48,153 [tornado_server.py:168] connection notification app started
2018-03-25 14:58:50,304 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53932)
2018-03-25 14:59:00,323 [tornado_server.py:163] notification client quit ('127.0.0.1', 53932) - 6942a26e-13ac-4d91-b1b9-c5572d6d7e0d
2018-03-25 15:00:51,501 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:00:51,503 [tornado_server.py:168] connection notification app started
2018-03-25 15:00:53,296 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53952)
2018-03-25 15:00:53,300 [tornado_server.py:163] notification client quit ('127.0.0.1', 53952) - 2433fc10-5943-4e68-847c-01079c7afada
2018-03-25 15:01:07,741 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:01:07,743 [tornado_server.py:168] connection notification app started
2018-03-25 15:01:09,012 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53954)
2018-03-25 15:01:09,017 [tornado_server.py:163] notification client quit ('127.0.0.1', 53954) - 20297210-49e7-4e68-97a6-fb52caee1c39
2018-03-25 15:01:34,643 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53956)
2018-03-25 15:01:34,647 [tornado_server.py:163] notification client quit ('127.0.0.1', 53956) - ac78320a-3e1c-46d1-a1eb-6da8db9d8723
2018-03-25 15:03:21,735 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54106)
2018-03-25 15:03:21,739 [tornado_server.py:163] notification client quit ('127.0.0.1', 54106) - 49e970ab-09c3-4e8e-ba8c-dc3216c034bc
2018-03-25 15:17:03,431 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54326)
2018-03-25 15:17:03,435 [tornado_server.py:163] notification client quit ('127.0.0.1', 54326) - 8ad7d4f9-e2e8-44f5-8472-474e2e4645ed
2018-03-25 15:17:05,655 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54328)
2018-03-25 15:17:05,660 [tornado_server.py:163] notification client quit ('127.0.0.1', 54328) - 1a6c46a7-3316-4707-85c7-6538b05eafc3
2018-03-25 15:17:12,001 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54330)
2018-03-25 15:17:12,005 [tornado_server.py:163] notification client quit ('127.0.0.1', 54330) - 00ae9da0-f7b0-4a27-8fb8-d997c8537acf
2018-03-25 15:17:14,248 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54332)
2018-03-25 15:17:14,251 [tornado_server.py:163] notification client quit ('127.0.0.1', 54332) - 23f42cda-35cd-4d4d-919b-882cf786ebd3
2018-03-25 15:17:58,567 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54342)
2018-03-25 15:17:58,573 [tornado_server.py:163] notification client quit ('127.0.0.1', 54342) - 8d8a7cda-5289-49be-b45c-a7c8edeef936
2018-03-25 15:18:06,090 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54344)
2018-03-25 15:18:12,610 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53590)
2018-03-25 15:18:12,612 [tornado_server.py:61] got a new message from ('127.0.0.1', 53590) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:18:12,612 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:18:12,612 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:18:12,613 [tornado_server.py:101] got a new message from ('127.0.0.1', 53590) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:18:12,614 [tornado_server.py:114] answered ('127.0.0.1', 53590)
2018-03-25 15:18:12,615 [tornado_server.py:61] got a new message from ('127.0.0.1', 53590) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:18:12,616 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:18:12,617 [tornado_server.py:101] got a new message from ('127.0.0.1', 53590) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:18:12,617 [tornado_server.py:114] answered ('127.0.0.1', 53590)
2018-03-25 15:18:26,506 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:18:26,509 [tornado_server.py:168] connection notification app started
2018-03-25 15:18:29,041 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53596)
2018-03-25 15:18:29,044 [tornado_server.py:61] got a new message from ('127.0.0.1', 53596) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:18:29,045 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:18:29,046 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:18:29,047 [tornado_server.py:101] got a new message from ('127.0.0.1', 53596) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:18:29,048 [tornado_server.py:114] answered ('127.0.0.1', 53596)
2018-03-25 15:18:29,050 [tornado_server.py:61] got a new message from ('127.0.0.1', 53596) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:18:29,050 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:18:29,051 [tornado_server.py:101] got a new message from ('127.0.0.1', 53596) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:18:29,051 [tornado_server.py:114] answered ('127.0.0.1', 53596)
2018-03-25 15:18:51,280 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:18:51,282 [tornado_server.py:168] connection notification app started
2018-03-25 15:18:53,187 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53598)
2018-03-25 15:18:53,189 [tornado_server.py:61] got a new message from ('127.0.0.1', 53598) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:18:53,189 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:18:53,190 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:18:53,190 [tornado_server.py:101] got a new message from ('127.0.0.1', 53598) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:18:53,191 [tornado_server.py:114] answered ('127.0.0.1', 53598)
2018-03-25 15:18:53,191 [tornado_server.py:61] got a new message from ('127.0.0.1', 53598) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:18:53,192 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:18:53,192 [tornado_server.py:101] got a new message from ('127.0.0.1', 53598) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:18:53,193 [tornado_server.py:114] answered ('127.0.0.1', 53598)
2018-03-25 15:19:37,597 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:19:37,600 [tornado_server.py:168] connection notification app started
2018-03-25 15:19:39,442 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53600)
2018-03-25 15:19:39,443 [tornado_server.py:61] got a new message from ('127.0.0.1', 53600) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:19:39,444 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:19:39,444 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:19:39,444 [tornado_server.py:101] got a new message from ('127.0.0.1', 53600) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:19:39,445 [tornado_server.py:114] answered ('127.0.0.1', 53600)
2018-03-25 15:19:39,445 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:19:39,446 [tornado_server.py:61] got a new message from ('127.0.0.1', 53600) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:19:39,446 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:19:39,447 [tornado_server.py:101] got a new message from ('127.0.0.1', 53600) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:19:39,448 [tornado_server.py:114] answered ('127.0.0.1', 53600)
2018-03-25 15:19:39,448 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:19:59,421 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:19:59,423 [tornado_server.py:168] connection notification app started
2018-03-25 15:20:01,354 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54358)
2018-03-25 15:20:57,902 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:20:57,905 [tornado_server.py:168] connection notification app started
2018-03-25 15:21:06,015 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54378)
2018-03-25 15:21:35,378 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53624)
2018-03-25 15:21:35,380 [tornado_server.py:61] got a new message from ('127.0.0.1', 53624) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:21:35,381 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:21:35,382 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:21:35,383 [tornado_server.py:101] got a new message from ('127.0.0.1', 53624) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:21:35,384 [tornado_server.py:114] answered ('127.0.0.1', 53624)
2018-03-25 15:21:35,385 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:21:35,387 [tornado_server.py:61] got a new message from ('127.0.0.1', 53624) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:21:35,387 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:21:35,388 [tornado_server.py:101] got a new message from ('127.0.0.1', 53624) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:21:35,390 [tornado_server.py:114] answered ('127.0.0.1', 53624)
2018-03-25 15:21:35,391 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:21:58,897 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:21:58,900 [tornado_server.py:168] connection notification app started
2018-03-25 15:22:02,594 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54382)
2018-03-25 15:22:14,536 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53632)
2018-03-25 15:22:14,538 [tornado_server.py:61] got a new message from ('127.0.0.1', 53632) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:22:14,539 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:22:14,540 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:22:14,541 [tornado_server.py:101] got a new message from ('127.0.0.1', 53632) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:22:14,542 [tornado_server.py:114] answered ('127.0.0.1', 53632)
2018-03-25 15:22:14,543 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:22:14,544 [tornado_server.py:61] got a new message from ('127.0.0.1', 53632) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:22:14,544 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:22:14,545 [tornado_server.py:101] got a new message from ('127.0.0.1', 53632) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:22:14,545 [tornado_server.py:114] answered ('127.0.0.1', 53632)
2018-03-25 15:22:14,546 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:22:47,510 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:22:47,513 [tornado_server.py:168] connection notification app started
2018-03-25 15:22:53,314 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54390)
2018-03-25 15:22:56,015 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53636)
2018-03-25 15:22:56,016 [tornado_server.py:61] got a new message from ('127.0.0.1', 53636) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:22:56,017 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:22:56,017 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:22:56,017 [tornado_server.py:101] got a new message from ('127.0.0.1', 53636) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:22:56,018 [tornado_server.py:114] answered ('127.0.0.1', 53636)
2018-03-25 15:22:56,018 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:22:56,019 [tornado_server.py:61] got a new message from ('127.0.0.1', 53636) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:22:56,019 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:22:56,020 [tornado_server.py:101] got a new message from ('127.0.0.1', 53636) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:22:56,020 [tornado_server.py:114] answered ('127.0.0.1', 53636)
2018-03-25 15:22:56,021 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:23:10,731 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:23:10,733 [tornado_server.py:168] connection notification app started
2018-03-25 15:23:28,762 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54394)
2018-03-25 15:23:33,808 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53640)
2018-03-25 15:23:33,811 [tornado_server.py:61] got a new message from ('127.0.0.1', 53640) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:23:33,812 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:23:33,812 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:23:33,814 [tornado_server.py:101] got a new message from ('127.0.0.1', 53640) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:23:33,814 [tornado_server.py:114] answered ('127.0.0.1', 53640)
2018-03-25 15:23:33,815 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:23:33,815 [tornado_server.py:180] {}
2018-03-25 15:23:33,816 [tornado_server.py:61] got a new message from ('127.0.0.1', 53640) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:23:33,816 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:23:33,817 [tornado_server.py:101] got a new message from ('127.0.0.1', 53640) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:23:33,818 [tornado_server.py:114] answered ('127.0.0.1', 53640)
2018-03-25 15:23:33,818 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:23:33,818 [tornado_server.py:180] {}
2018-03-25 15:23:59,478 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:23:59,481 [tornado_server.py:168] connection notification app started
2018-03-25 15:24:07,913 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54402)
2018-03-25 15:24:15,854 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53648)
2018-03-25 15:24:15,855 [tornado_server.py:61] got a new message from ('127.0.0.1', 53648) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:24:15,856 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:24:15,856 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:24:15,856 [tornado_server.py:101] got a new message from ('127.0.0.1', 53648) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:24:15,857 [tornado_server.py:114] answered ('127.0.0.1', 53648)
2018-03-25 15:24:15,857 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:24:15,858 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 180, in message_all
    logger.info(self.connections)
AttributeError: 'NotifyServer' object has no attribute 'connections'
2018-03-25 15:24:15,860 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fab368246a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 180, in message_all
    logger.info(self.connections)
AttributeError: 'NotifyServer' object has no attribute 'connections'
2018-03-25 15:24:15,862 [tornado_server.py:128] client quit ('127.0.0.1', 53648) - valera01
2018-03-25 15:25:08,417 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:25:08,419 [tornado_server.py:169] connection notification app started
2018-03-25 15:25:12,215 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53650)
2018-03-25 15:25:12,218 [tornado_server.py:61] got a new message from ('127.0.0.1', 53650) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:25:12,219 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:25:12,219 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:25:12,220 [tornado_server.py:101] got a new message from ('127.0.0.1', 53650) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:25:12,221 [tornado_server.py:114] answered ('127.0.0.1', 53650)
2018-03-25 15:25:12,221 [tornado_server.py:180] notifying all subscribers
2018-03-25 15:25:12,230 [tornado_server.py:61] got a new message from ('127.0.0.1', 53650) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:25:12,230 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:25:12,231 [tornado_server.py:101] got a new message from ('127.0.0.1', 53650) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:25:12,231 [tornado_server.py:114] answered ('127.0.0.1', 53650)
2018-03-25 15:25:12,232 [tornado_server.py:180] notifying all subscribers
2018-03-25 15:25:37,403 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:25:37,405 [tornado_server.py:169] connection notification app started
2018-03-25 15:25:40,105 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53652)
2018-03-25 15:25:40,107 [tornado_server.py:61] got a new message from ('127.0.0.1', 53652) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:25:40,107 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:25:40,107 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:25:40,108 [tornado_server.py:101] got a new message from ('127.0.0.1', 53652) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:25:40,108 [tornado_server.py:114] answered ('127.0.0.1', 53652)
2018-03-25 15:25:40,109 [tornado_server.py:180] notifying all subscribers
2018-03-25 15:25:40,114 [tornado_server.py:61] got a new message from ('127.0.0.1', 53652) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:25:40,114 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:25:40,115 [tornado_server.py:101] got a new message from ('127.0.0.1', 53652) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:25:40,115 [tornado_server.py:114] answered ('127.0.0.1', 53652)
2018-03-25 15:25:40,116 [tornado_server.py:180] notifying all subscribers
2018-03-25 15:26:00,998 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:26:01,001 [tornado_server.py:169] connection notification app started
2018-03-25 15:26:04,544 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53654)
2018-03-25 15:26:04,545 [tornado_server.py:61] got a new message from ('127.0.0.1', 53654) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:26:04,545 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:26:04,546 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:26:04,546 [tornado_server.py:101] got a new message from ('127.0.0.1', 53654) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:26:04,547 [tornado_server.py:114] answered ('127.0.0.1', 53654)
2018-03-25 15:26:04,547 [tornado_server.py:180] notifying all subscribers
2018-03-25 15:26:04,547 [tornado_server.py:181] {}
2018-03-25 15:26:04,548 [tornado_server.py:61] got a new message from ('127.0.0.1', 53654) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:26:04,548 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:26:04,549 [tornado_server.py:101] got a new message from ('127.0.0.1', 53654) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:26:04,549 [tornado_server.py:114] answered ('127.0.0.1', 53654)
2018-03-25 15:26:04,549 [tornado_server.py:180] notifying all subscribers
2018-03-25 15:26:04,550 [tornado_server.py:181] {}
2018-03-25 15:27:16,237 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:27:16,239 [tornado_server.py:168] connection notification app started
2018-03-25 15:27:21,424 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53660)
2018-03-25 15:27:21,425 [tornado_server.py:61] got a new message from ('127.0.0.1', 53660) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:27:21,426 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:27:21,426 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:27:21,427 [tornado_server.py:101] got a new message from ('127.0.0.1', 53660) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:27:21,428 [tornado_server.py:114] answered ('127.0.0.1', 53660)
2018-03-25 15:27:21,429 [tornado_server.py:179] notifying all subscribers
2018-03-25 15:27:21,429 [tornado_server.py:180] {'valera01': <__main__.Connection object at 0x7fa13515b470>}
2018-03-25 15:27:21,429 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 181, in message_all
    for client_name, client_interface in self.connections.items():
AttributeError: 'NotifyServer' object has no attribute 'connections'
2018-03-25 15:27:21,432 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fa13515e510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 181, in message_all
    for client_name, client_interface in self.connections.items():
AttributeError: 'NotifyServer' object has no attribute 'connections'
2018-03-25 15:27:21,435 [tornado_server.py:128] client quit ('127.0.0.1', 53660) - valera01
2018-03-25 15:28:22,588 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:28:22,590 [tornado_server.py:169] connection notification app started
2018-03-25 15:29:12,166 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:29:12,169 [tornado_server.py:170] connection notification app started
2018-03-25 15:29:18,739 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53666)
2018-03-25 15:29:18,741 [tornado_server.py:61] got a new message from ('127.0.0.1', 53666) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:29:18,741 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:29:18,741 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:29:18,742 [tornado_server.py:101] got a new message from ('127.0.0.1', 53666) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:29:18,743 [tornado_server.py:114] answered ('127.0.0.1', 53666)
2018-03-25 15:29:18,743 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:29:18,743 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7fc1951aa438>}
2018-03-25 15:29:18,743 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    for client_name, client_interface in self.connections.items():
AttributeError: 'NotifyServer' object has no attribute 'connections'
2018-03-25 15:29:18,746 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc1951af510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    for client_name, client_interface in self.connections.items():
AttributeError: 'NotifyServer' object has no attribute 'connections'
2018-03-25 15:29:18,747 [tornado_server.py:128] client quit ('127.0.0.1', 53666) - valera01
2018-03-25 15:30:25,119 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:30:25,121 [tornado_server.py:170] connection notification app started
2018-03-25 15:30:30,273 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54428)
2018-03-25 15:30:32,506 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53674)
2018-03-25 15:30:32,508 [tornado_server.py:61] got a new message from ('127.0.0.1', 53674) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:30:32,508 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:30:32,509 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:30:32,509 [tornado_server.py:101] got a new message from ('127.0.0.1', 53674) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:30:32,510 [tornado_server.py:114] answered ('127.0.0.1', 53674)
2018-03-25 15:30:32,511 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:30:32,511 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7f8c93cb7518>}
2018-03-25 15:30:32,512 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    for client_name, client_interface in notify_conns:
TypeError: 'UUID' object is not iterable
2018-03-25 15:30:32,515 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f8c93cbb620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 183, in message_all
    for client_name, client_interface in notify_conns:
TypeError: 'UUID' object is not iterable
2018-03-25 15:30:32,517 [tornado_server.py:128] client quit ('127.0.0.1', 53674) - valera01
2018-03-25 15:30:49,553 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:30:49,558 [tornado_server.py:170] connection notification app started
2018-03-25 15:30:52,433 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54432)
2018-03-25 15:30:54,547 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53678)
2018-03-25 15:30:54,550 [tornado_server.py:61] got a new message from ('127.0.0.1', 53678) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:30:54,551 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:30:54,552 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:30:54,554 [tornado_server.py:101] got a new message from ('127.0.0.1', 53678) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:30:54,555 [tornado_server.py:114] answered ('127.0.0.1', 53678)
2018-03-25 15:30:54,557 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:30:54,557 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7efcae5df518>}
2018-03-25 15:30:54,563 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write('blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: string argument without an encoding
2018-03-25 15:30:54,564 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7efcae5e4620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write('blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: string argument without an encoding
2018-03-25 15:30:54,565 [tornado_server.py:128] client quit ('127.0.0.1', 53678) - valera01
2018-03-25 15:31:17,710 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:31:17,715 [tornado_server.py:170] connection notification app started
2018-03-25 15:31:19,814 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54436)
2018-03-25 15:31:21,001 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53682)
2018-03-25 15:31:21,003 [tornado_server.py:61] got a new message from ('127.0.0.1', 53682) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:31:21,004 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:31:21,005 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:31:21,006 [tornado_server.py:101] got a new message from ('127.0.0.1', 53682) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:31:21,007 [tornado_server.py:114] answered ('127.0.0.1', 53682)
2018-03-25 15:31:21,008 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:31:21,009 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7ff6e3844518>}
2018-03-25 15:31:21,009 [tornado_server.py:184] (UUID('6bf4f5f5-91df-48f4-9f0b-a200f7302a51'), <__main__.Notification object at 0x7ff6e3844400>)
2018-03-25 15:31:21,010 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write('blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: string argument without an encoding
2018-03-25 15:31:21,013 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7ff6e3849620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write('blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 530, in write
    self._write_buffer.append(data)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 156, in append
    self._buffers.append((False, bytearray(data)))
TypeError: string argument without an encoding
2018-03-25 15:31:21,014 [tornado_server.py:128] client quit ('127.0.0.1', 53682) - valera01
2018-03-25 15:32:02,474 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:32:02,477 [tornado_server.py:170] connection notification app started
2018-03-25 15:32:04,249 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54440)
2018-03-25 15:32:06,174 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53686)
2018-03-25 15:32:06,175 [tornado_server.py:61] got a new message from ('127.0.0.1', 53686) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:32:06,176 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:32:06,176 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:32:06,177 [tornado_server.py:101] got a new message from ('127.0.0.1', 53686) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:32:06,178 [tornado_server.py:114] answered ('127.0.0.1', 53686)
2018-03-25 15:32:06,178 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:32:06,179 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7f3973ef44e0>}
2018-03-25 15:32:06,179 [tornado_server.py:184] (UUID('ad92293e-090f-48f3-9fa6-a9a7ba8304fd'), <__main__.Notification object at 0x7f3973ef43c8>)
2018-03-25 15:32:06,181 [tornado_server.py:61] got a new message from ('127.0.0.1', 53686) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:32:06,181 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:32:06,182 [tornado_server.py:101] got a new message from ('127.0.0.1', 53686) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:32:06,183 [tornado_server.py:114] answered ('127.0.0.1', 53686)
2018-03-25 15:32:06,184 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:32:06,184 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7f3973ef44e0>}
2018-03-25 15:32:06,184 [tornado_server.py:184] (UUID('ad92293e-090f-48f3-9fa6-a9a7ba8304fd'), <__main__.Notification object at 0x7f3973ef43c8>)
2018-03-25 15:32:06,185 [tornado_server.py:165] notification client quit ('127.0.0.1', 54440) - ad92293e-090f-48f3-9fa6-a9a7ba8304fd
2018-03-25 15:32:47,706 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54444)
2018-03-25 15:32:47,707 [tornado_server.py:161] valera01
2018-03-25 15:32:53,045 [tornado_server.py:128] client quit ('127.0.0.1', 53686) - valera01
2018-03-25 15:32:53,352 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53706)
2018-03-25 15:32:53,353 [tornado_server.py:61] got a new message from ('127.0.0.1', 53706) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:32:53,353 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:32:53,354 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:32:53,354 [tornado_server.py:101] got a new message from ('127.0.0.1', 53706) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:32:53,355 [tornado_server.py:114] answered ('127.0.0.1', 53706)
2018-03-25 15:32:53,355 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:32:53,355 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7f3973ef4400>}
2018-03-25 15:32:53,355 [tornado_server.py:184] (UUID('ad92293e-090f-48f3-9fa6-a9a7ba8304fd'), <__main__.Notification object at 0x7f3973ef43c8>)
2018-03-25 15:32:53,356 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write(b'blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 15:32:53,358 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f3973ef98c8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write(b'blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 15:32:53,360 [tornado_server.py:128] client quit ('127.0.0.1', 53706) - valera01
2018-03-25 15:33:06,297 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53710)
2018-03-25 15:33:06,298 [tornado_server.py:61] got a new message from ('127.0.0.1', 53710) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:33:06,299 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:33:06,299 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:33:06,299 [tornado_server.py:101] got a new message from ('127.0.0.1', 53710) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:33:06,300 [tornado_server.py:114] answered ('127.0.0.1', 53710)
2018-03-25 15:33:06,300 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:33:06,300 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7f3973ef4748>}
2018-03-25 15:33:06,301 [tornado_server.py:184] (UUID('ad92293e-090f-48f3-9fa6-a9a7ba8304fd'), <__main__.Notification object at 0x7f3973ef43c8>)
2018-03-25 15:33:06,301 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write(b'blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 15:33:06,302 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f3977b05510>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 116, in _on_write_complete
    self.notify_server.message_all()
  File "tornado_server.py", line 185, in message_all
    client_interface.stream.write(b'blabal')
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 15:33:06,303 [tornado_server.py:128] client quit ('127.0.0.1', 53710) - valera01
2018-03-25 15:33:16,870 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:33:16,872 [tornado_server.py:170] connection notification app started
2018-03-25 15:33:40,538 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 54468)
2018-03-25 15:33:47,063 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53714)
2018-03-25 15:33:47,065 [tornado_server.py:61] got a new message from ('127.0.0.1', 53714) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:33:47,065 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:33:47,066 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:33:47,066 [tornado_server.py:101] got a new message from ('127.0.0.1', 53714) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:33:47,067 [tornado_server.py:114] answered ('127.0.0.1', 53714)
2018-03-25 15:33:47,067 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:33:47,067 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7f6819a2b518>}
2018-03-25 15:33:47,067 [tornado_server.py:184] (UUID('961cd399-2567-46d8-b1f6-5cc12b749875'), <__main__.Notification object at 0x7f6819a2b400>)
2018-03-25 15:33:47,069 [tornado_server.py:61] got a new message from ('127.0.0.1', 53714) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:33:47,070 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:33:47,070 [tornado_server.py:101] got a new message from ('127.0.0.1', 53714) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:33:47,071 [tornado_server.py:114] answered ('127.0.0.1', 53714)
2018-03-25 15:33:47,071 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:33:47,071 [tornado_server.py:182] {'valera01': <__main__.Connection object at 0x7f6819a2b518>}
2018-03-25 15:33:47,072 [tornado_server.py:184] (UUID('961cd399-2567-46d8-b1f6-5cc12b749875'), <__main__.Notification object at 0x7f6819a2b400>)
2018-03-25 15:35:27,178 [tornado_server.py:128] client quit ('127.0.0.1', 53714) - valera01
2018-03-25 15:42:55,804 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:42:55,806 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "/home/usr/dev/tornado_task/tornado_server.py", line 142, in handle_stream
    Connection(stream, address, conns, self.notify_server)
AttributeError: 'StatusServer' object has no attribute 'notify_server'
2018-03-25 15:44:14,722 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:44:22,609 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:44:22,609 [tornado_server.py:170] connection notification app started
2018-03-25 15:44:46,223 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:44:46,224 [tornado_server.py:170] connection notification app started
2018-03-25 15:44:46,225 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 39188)
2018-03-25 15:44:46,227 [tornado_server.py:61] got a new message from ('127.0.0.1', 39188) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:44:46,228 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:44:46,228 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:44:46,229 [tornado_server.py:101] got a new message from ('127.0.0.1', 39188) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:44:46,229 [tornado_server.py:114] answered ('127.0.0.1', 39188)
2018-03-25 15:44:46,230 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:44:46,230 [tornado_server.py:182] {'valera01': <tornado_server.Connection object at 0x7f5538323080>}
2018-03-25 15:44:46,232 [tornado_server.py:128] client quit ('127.0.0.1', 39188) - valera01
2018-03-25 15:46:20,102 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:46:20,103 [tornado_server.py:170] connection notification app started
2018-03-25 15:46:20,107 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 48922)
2018-03-25 15:46:20,110 [tornado_server.py:61] got a new message from ('127.0.0.1', 48922) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:46:20,110 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:46:20,111 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:46:20,111 [tornado_server.py:101] got a new message from ('127.0.0.1', 48922) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:46:20,112 [tornado_server.py:114] answered ('127.0.0.1', 48922)
2018-03-25 15:46:20,112 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:46:20,113 [tornado_server.py:182] {'valera01': <tornado_server.Connection object at 0x7effbf9541d0>}
2018-03-25 15:46:20,114 [tornado_server.py:128] client quit ('127.0.0.1', 48922) - valera01
2018-03-25 15:46:20,116 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:46:20,116 [tornado_server.py:170] connection notification app started
2018-03-25 15:46:20,118 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 46392)
2018-03-25 15:47:21,554 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:47:21,555 [tornado_server.py:170] connection notification app started
2018-03-25 15:47:21,557 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 49760)
2018-03-25 15:47:21,559 [tornado_server.py:61] got a new message from ('127.0.0.1', 49760) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:47:21,560 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:47:21,560 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:47:21,561 [tornado_server.py:101] got a new message from ('127.0.0.1', 49760) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:47:21,562 [tornado_server.py:114] answered ('127.0.0.1', 49760)
2018-03-25 15:47:21,563 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:47:21,564 [tornado_server.py:182] {'valera01': <tornado_server.Connection object at 0x7f1cf155b198>}
2018-03-25 15:47:21,568 [tornado_server.py:128] client quit ('127.0.0.1', 49760) - valera01
2018-03-25 15:47:21,571 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:47:21,571 [tornado_server.py:170] connection notification app started
2018-03-25 15:47:21,573 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 58220)
2018-03-25 15:49:09,570 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:49:09,570 [tornado_server.py:170] connection notification app started
2018-03-25 15:49:09,572 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 49644)
2018-03-25 15:49:09,578 [tornado_server.py:61] got a new message from ('127.0.0.1', 49644) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:49:09,579 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:49:09,579 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:49:09,579 [tornado_server.py:101] got a new field from ('127.0.0.1', 49644) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:49:09,580 [tornado_server.py:114] answered ('127.0.0.1', 49644)
2018-03-25 15:49:09,581 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:49:09,581 [tornado_server.py:182] {'valera01': <tornado_server.Connection object at 0x7f035a249240>}
2018-03-25 15:49:09,582 [tornado_server.py:128] client quit ('127.0.0.1', 49644) - valera01
2018-03-25 15:49:09,584 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:49:09,584 [tornado_server.py:170] connection notification app started
2018-03-25 15:49:09,585 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 60324)
2018-03-25 15:49:24,784 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:49:24,785 [tornado_server.py:170] connection notification app started
2018-03-25 15:49:24,787 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 57082)
2018-03-25 15:49:24,789 [tornado_server.py:61] got a new message from ('127.0.0.1', 57082) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:49:24,789 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:49:24,790 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:49:24,790 [tornado_server.py:101] got a new field from ('127.0.0.1', 57082) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:49:24,791 [tornado_server.py:114] answered ('127.0.0.1', 57082)
2018-03-25 15:49:24,792 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:49:24,792 [tornado_server.py:182] {'valera01': <tornado_server.Connection object at 0x7f8dcd3df198>}
2018-03-25 15:49:24,794 [tornado_server.py:128] client quit ('127.0.0.1', 57082) - valera01
2018-03-25 15:49:24,795 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:49:24,796 [tornado_server.py:170] connection notification app started
2018-03-25 15:49:24,797 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 50172)
2018-03-25 15:49:24,800 [tornado_server.py:165] notification client quit ('127.0.0.1', 50172) - e162d188-0172-4bdf-97cf-56af0c7c4b84
2018-03-25 15:53:41,713 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:53:41,714 [tornado_server.py:170] connection notification app started
2018-03-25 15:53:41,715 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 59986)
2018-03-25 15:53:41,717 [tornado_server.py:61] got a new message from ('127.0.0.1', 59986) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:53:41,718 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:53:41,718 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:53:41,718 [tornado_server.py:101] got a new field from ('127.0.0.1', 59986) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:53:41,719 [tornado_server.py:114] answered ('127.0.0.1', 59986)
2018-03-25 15:53:41,719 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:53:41,719 [tornado_server.py:182] {'valera01': <tornado_server.Connection object at 0x7f8911bff198>}
2018-03-25 15:53:41,721 [tornado_server.py:128] client quit ('127.0.0.1', 59986) - valera01
2018-03-25 15:53:41,722 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:53:41,722 [tornado_server.py:170] connection notification app started
2018-03-25 15:53:41,723 [tornado_server.py:150] receive a new connection from ('127.0.0.1', 53902)
2018-03-25 15:53:41,725 [tornado_server.py:165] notification client quit ('127.0.0.1', 53902) - 08d5a7d1-e6f9-4898-bfe1-67d858a9e22a
2018-03-25 15:53:51,219 [tornado_server.py:136] connection monitoring app started
2018-03-25 15:53:51,219 [tornado_server.py:170] connection notification app started
2018-03-25 15:53:51,221 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 47748)
2018-03-25 15:53:51,227 [tornado_server.py:61] got a new message from ('127.0.0.1', 47748) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 15:53:51,228 [tornado_server.py:73] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 15:53:51,228 [tornado_server.py:79] valera01 authenticated

2018-03-25 15:53:51,230 [tornado_server.py:101] got a new field from ('127.0.0.1', 47748) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 15:53:51,231 [tornado_server.py:114] answered ('127.0.0.1', 47748)
2018-03-25 15:53:51,231 [tornado_server.py:181] notifying all subscribers
2018-03-25 15:53:51,232 [tornado_server.py:182] {'valera01': <tornado_server.Connection object at 0x7f37723bf080>}
2018-03-25 15:53:51,233 [tornado_server.py:128] client quit ('127.0.0.1', 47748) - valera01
2018-03-25 16:30:57,700 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:30:57,701 [tornado_server.py:187] connection notification app started
2018-03-25 16:30:57,703 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 41940)
2018-03-25 16:30:57,708 [tornado_server.py:61] got a new message from ('127.0.0.1', 41940) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:30:57,709 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:30:57,709 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:30:57,711 [tornado_server.py:102] got a new field from ('127.0.0.1', 41940) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:30:57,711 [tornado_server.py:115] answered ('127.0.0.1', 41940)
2018-03-25 16:30:57,712 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:30:57,713 [tornado_server.py:199] {'valera01': <tornado_server.Connection object at 0x7f57e56a1198>}
2018-03-25 16:30:57,715 [tornado_server.py:129] client quit ('127.0.0.1', 41940) - valera01
2018-03-25 16:31:00,072 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:31:00,074 [tornado_server.py:187] connection notification app started
2018-03-25 16:31:03,214 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55408)
2018-03-25 16:31:05,548 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54654)
2018-03-25 16:31:05,550 [tornado_server.py:61] got a new message from ('127.0.0.1', 54654) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:31:05,550 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:31:05,551 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:31:05,551 [tornado_server.py:102] got a new field from ('127.0.0.1', 54654) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:31:05,552 [tornado_server.py:115] answered ('127.0.0.1', 54654)
2018-03-25 16:31:05,553 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:31:05,558 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7f9c6c536668>}
2018-03-25 16:31:05,559 [tornado_server.py:201] (UUID('6d7b8cfa-3207-46be-afa2-eb98644a705a'), <__main__.Notification object at 0x7f9c6c536550>)
2018-03-25 16:31:05,559 [tornado_server.py:61] got a new message from ('127.0.0.1', 54654) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:31:05,560 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:31:05,561 [tornado_server.py:102] got a new field from ('127.0.0.1', 54654) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:31:05,561 [tornado_server.py:115] answered ('127.0.0.1', 54654)
2018-03-25 16:31:05,562 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:31:05,562 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7f9c6c536668>}
2018-03-25 16:31:05,562 [tornado_server.py:201] (UUID('6d7b8cfa-3207-46be-afa2-eb98644a705a'), <__main__.Notification object at 0x7f9c6c536550>)
2018-03-25 16:31:23,302 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:31:23,305 [tornado_server.py:187] connection notification app started
2018-03-25 16:31:27,830 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55412)
2018-03-25 16:31:42,857 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54658)
2018-03-25 16:31:42,859 [tornado_server.py:61] got a new message from ('127.0.0.1', 54658) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:31:42,859 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:31:42,860 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:31:42,861 [tornado_server.py:102] got a new field from ('127.0.0.1', 54658) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:31:42,861 [tornado_server.py:115] answered ('127.0.0.1', 54658)
2018-03-25 16:31:42,862 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:31:42,863 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7ffa145f9668>}
2018-03-25 16:31:42,863 [tornado_server.py:201] (UUID('90342055-d662-48e5-90c9-c30b89ff4db1'), <__main__.Notification object at 0x7ffa145f9550>)
2018-03-25 16:31:42,864 [tornado_server.py:61] got a new message from ('127.0.0.1', 54658) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:31:42,865 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:31:42,866 [tornado_server.py:102] got a new field from ('127.0.0.1', 54658) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:31:42,867 [tornado_server.py:115] answered ('127.0.0.1', 54658)
2018-03-25 16:31:42,867 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:31:42,867 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7ffa145f9668>}
2018-03-25 16:31:42,868 [tornado_server.py:201] (UUID('90342055-d662-48e5-90c9-c30b89ff4db1'), <__main__.Notification object at 0x7ffa145f9550>)
2018-03-25 16:31:51,410 [tornado_server.py:182] notification client quit ('127.0.0.1', 55412) - 90342055-d662-48e5-90c9-c30b89ff4db1
2018-03-25 16:31:59,457 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:31:59,460 [tornado_server.py:187] connection notification app started
2018-03-25 16:32:03,987 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54660)
2018-03-25 16:32:03,988 [tornado_server.py:61] got a new message from ('127.0.0.1', 54660) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:32:03,989 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:32:03,989 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:32:03,990 [tornado_server.py:102] got a new field from ('127.0.0.1', 54660) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:32:03,991 [tornado_server.py:115] answered ('127.0.0.1', 54660)
2018-03-25 16:32:03,992 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:32:03,992 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7efe6a8f5550>}
2018-03-25 16:32:03,993 [tornado_server.py:61] got a new message from ('127.0.0.1', 54660) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:32:03,993 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:32:03,994 [tornado_server.py:102] got a new field from ('127.0.0.1', 54660) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:32:03,995 [tornado_server.py:115] answered ('127.0.0.1', 54660)
2018-03-25 16:32:03,995 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:32:03,996 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7efe6a8f5550>}
2018-03-25 16:32:06,240 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55418)
2018-03-25 16:32:06,241 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 193, in handle_stream
    Notification(stream, address, conns, notify_conns)
  File "tornado_server.py", line 166, in __init__
    for field_key, field_value in client_interface.fields:
ValueError: too many values to unpack (expected 2)
2018-03-25 16:32:35,482 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:32:35,485 [tornado_server.py:187] connection notification app started
2018-03-25 16:32:41,065 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54664)
2018-03-25 16:32:41,067 [tornado_server.py:61] got a new message from ('127.0.0.1', 54664) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:32:41,068 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:32:41,068 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:32:41,069 [tornado_server.py:102] got a new field from ('127.0.0.1', 54664) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:32:41,070 [tornado_server.py:115] answered ('127.0.0.1', 54664)
2018-03-25 16:32:41,070 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:32:41,071 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7f99a1fb4550>}
2018-03-25 16:32:41,072 [tornado_server.py:61] got a new message from ('127.0.0.1', 54664) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:32:41,072 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:32:41,073 [tornado_server.py:102] got a new field from ('127.0.0.1', 54664) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:32:41,074 [tornado_server.py:115] answered ('127.0.0.1', 54664)
2018-03-25 16:32:41,074 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:32:41,075 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7f99a1fb4550>}
2018-03-25 16:32:42,915 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55422)
2018-03-25 16:32:42,916 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 193, in handle_stream
    Notification(stream, address, conns, notify_conns)
  File "tornado_server.py", line 166, in __init__
    for field_key, field_value in client_interface.fields:
ValueError: too many values to unpack (expected 2)
2018-03-25 16:33:06,264 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:33:06,266 [tornado_server.py:187] connection notification app started
2018-03-25 16:33:10,873 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54668)
2018-03-25 16:33:10,876 [tornado_server.py:61] got a new message from ('127.0.0.1', 54668) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:33:10,877 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:33:10,877 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:33:10,878 [tornado_server.py:102] got a new field from ('127.0.0.1', 54668) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:33:10,879 [tornado_server.py:115] answered ('127.0.0.1', 54668)
2018-03-25 16:33:10,880 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:33:10,880 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7fd546e62550>}
2018-03-25 16:33:10,881 [tornado_server.py:61] got a new message from ('127.0.0.1', 54668) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:33:10,881 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:33:10,881 [tornado_server.py:102] got a new field from ('127.0.0.1', 54668) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:33:10,882 [tornado_server.py:115] answered ('127.0.0.1', 54668)
2018-03-25 16:33:10,883 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:33:10,883 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7fd546e62550>}
2018-03-25 16:33:13,027 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55426)
2018-03-25 16:33:13,028 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 193, in handle_stream
    Notification(stream, address, conns, notify_conns)
  File "tornado_server.py", line 173, in __init__
    (self.status).to_bytes(1, byteorder='big'),
AttributeError: 'Notification' object has no attribute 'status'
2018-03-25 16:33:43,657 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:33:43,679 [tornado_server.py:187] connection notification app started
2018-03-25 16:33:46,326 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54672)
2018-03-25 16:33:46,329 [tornado_server.py:61] got a new message from ('127.0.0.1', 54672) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:33:46,329 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:33:46,329 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:33:46,330 [tornado_server.py:102] got a new field from ('127.0.0.1', 54672) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:33:46,330 [tornado_server.py:115] answered ('127.0.0.1', 54672)
2018-03-25 16:33:46,331 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:33:46,331 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7fc44ded7550>}
2018-03-25 16:33:46,332 [tornado_server.py:61] got a new message from ('127.0.0.1', 54672) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:33:46,333 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:33:46,335 [tornado_server.py:102] got a new field from ('127.0.0.1', 54672) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:33:46,336 [tornado_server.py:115] answered ('127.0.0.1', 54672)
2018-03-25 16:33:46,336 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:33:46,337 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7fc44ded7550>}
2018-03-25 16:33:48,895 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55430)
2018-03-25 16:33:48,896 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 193, in handle_stream
    Notification(stream, address, conns, notify_conns)
  File "tornado_server.py", line 174, in __init__
    struct.pack('>Q', current_time - client_interface.last_message_time)
TypeError: append() takes exactly one argument (7 given)
2018-03-25 16:34:25,302 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:34:25,305 [tornado_server.py:185] connection notification app started
2018-03-25 16:34:27,465 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54680)
2018-03-25 16:34:27,466 [tornado_server.py:61] got a new message from ('127.0.0.1', 54680) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:34:27,467 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:34:27,467 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:34:27,468 [tornado_server.py:102] got a new field from ('127.0.0.1', 54680) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:34:27,468 [tornado_server.py:115] answered ('127.0.0.1', 54680)
2018-03-25 16:34:27,469 [tornado_server.py:196] notifying all subscribers
2018-03-25 16:34:27,469 [tornado_server.py:197] {'valera01': <__main__.Connection object at 0x7f7aec1bb550>}
2018-03-25 16:34:27,470 [tornado_server.py:61] got a new message from ('127.0.0.1', 54680) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:34:27,470 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:34:27,470 [tornado_server.py:102] got a new field from ('127.0.0.1', 54680) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:34:27,471 [tornado_server.py:115] answered ('127.0.0.1', 54680)
2018-03-25 16:34:27,472 [tornado_server.py:196] notifying all subscribers
2018-03-25 16:34:27,472 [tornado_server.py:197] {'valera01': <__main__.Connection object at 0x7f7aec1bb550>}
2018-03-25 16:34:28,974 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55438)
2018-03-25 16:34:28,975 [tornado_server.py:174] [b'[', b'valera01', b']', b'\x00\x01', b'|', b'\x02', b'\x00\x00\x00\x00\x00\x00\x05\xe6']
2018-03-25 16:36:06,219 [tornado_server.py:137] connection monitoring app started
2018-03-25 16:36:06,222 [tornado_server.py:187] connection notification app started
2018-03-25 16:36:08,029 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 54688)
2018-03-25 16:36:08,030 [tornado_server.py:61] got a new message from ('127.0.0.1', 54688) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:36:08,031 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:36:08,031 [tornado_server.py:80] valera01 authenticated

2018-03-25 16:36:08,032 [tornado_server.py:102] got a new field from ('127.0.0.1', 54688) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:36:08,032 [tornado_server.py:115] answered ('127.0.0.1', 54688)
2018-03-25 16:36:08,032 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:36:08,033 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7f5978609550>}
2018-03-25 16:36:08,033 [tornado_server.py:61] got a new message from ('127.0.0.1', 54688) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 16:36:08,034 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 16:36:08,034 [tornado_server.py:102] got a new field from ('127.0.0.1', 54688) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 16:36:08,035 [tornado_server.py:115] answered ('127.0.0.1', 54688)
2018-03-25 16:36:08,035 [tornado_server.py:198] notifying all subscribers
2018-03-25 16:36:08,035 [tornado_server.py:199] {'valera01': <__main__.Connection object at 0x7f5978609550>}
2018-03-25 16:36:16,981 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 55446)
2018-03-25 16:36:16,983 [tornado_server.py:176] [b'[valera01]\x00\x01|\x02\x00\x00\x00\x00\x00\x00"\xf8']
2018-03-25 16:37:48,143 [tornado_server.py:129] client quit ('127.0.0.1', 54688) - valera01
2018-03-25 18:01:33,198 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:01:33,200 [tornado_server.py:184] connection notification app started
2018-03-25 18:01:35,567 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56084)
2018-03-25 18:01:37,491 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55330)
2018-03-25 18:01:37,493 [tornado_server.py:61] got a new message from ('127.0.0.1', 55330) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:01:37,494 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:01:37,495 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:01:37,495 [tornado_server.py:102] got a new field from ('127.0.0.1', 55330) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:01:37,496 [tornado_server.py:115] answered ('127.0.0.1', 55330)
2018-03-25 18:01:37,497 [tornado_server.py:195] notifying all subscribers
2018-03-25 18:01:37,497 [tornado_server.py:196] {'valera01': <__main__.Connection object at 0x7f2b373aa7b8>}
2018-03-25 18:01:37,498 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 199, in new_message
    for field_key, field_value in client_interface.fields.items():
AttributeError: 'Notification' object has no attribute 'fields'
2018-03-25 18:01:37,501 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2b373b2730>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 199, in new_message
    for field_key, field_value in client_interface.fields.items():
AttributeError: 'Notification' object has no attribute 'fields'
2018-03-25 18:01:37,503 [tornado_server.py:129] client quit ('127.0.0.1', 55330) - valera01
2018-03-25 18:04:56,614 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:04:56,616 [tornado_server.py:183] connection notification app started
2018-03-25 18:04:58,951 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56112)
2018-03-25 18:05:01,827 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55360)
2018-03-25 18:05:01,829 [tornado_server.py:61] got a new message from ('127.0.0.1', 55360) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:05:01,829 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:05:01,830 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:05:01,830 [tornado_server.py:102] got a new field from ('127.0.0.1', 55360) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:05:01,831 [tornado_server.py:115] answered ('127.0.0.1', 55360)
2018-03-25 18:05:01,832 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:05:01,832 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f2cf4abc7f0>}
2018-03-25 18:05:01,832 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 198, in new_message
    for field_key, field_value in client_interface.fields.items():
AttributeError: 'Notification' object has no attribute 'fields'
2018-03-25 18:05:01,836 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f2cf4ac56a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 198, in new_message
    for field_key, field_value in client_interface.fields.items():
AttributeError: 'Notification' object has no attribute 'fields'
2018-03-25 18:05:01,838 [tornado_server.py:129] client quit ('127.0.0.1', 55360) - valera01
2018-03-25 18:05:51,813 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:05:51,815 [tornado_server.py:183] connection notification app started
2018-03-25 18:05:56,015 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56118)
2018-03-25 18:05:58,072 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55364)
2018-03-25 18:05:58,074 [tornado_server.py:61] got a new message from ('127.0.0.1', 55364) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:05:58,075 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:05:58,075 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:05:58,077 [tornado_server.py:102] got a new field from ('127.0.0.1', 55364) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:05:58,078 [tornado_server.py:115] answered ('127.0.0.1', 55364)
2018-03-25 18:05:58,079 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:05:58,079 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f134f6c1828>}
2018-03-25 18:05:58,079 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 200, in new_message
    for field_key, field_value in client_interface.fields.items():
AttributeError: 'Notification' object has no attribute 'fields'
2018-03-25 18:05:58,082 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f134f6cc6a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 200, in new_message
    for field_key, field_value in client_interface.fields.items():
AttributeError: 'Notification' object has no attribute 'fields'
2018-03-25 18:05:58,084 [tornado_server.py:129] client quit ('127.0.0.1', 55364) - valera01
2018-03-25 18:11:56,259 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:11:56,261 [tornado_server.py:183] connection notification app started
2018-03-25 18:11:59,129 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56188)
2018-03-25 18:12:01,476 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55434)
2018-03-25 18:12:01,477 [tornado_server.py:61] got a new message from ('127.0.0.1', 55434) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:12:01,478 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:12:01,478 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:12:01,478 [tornado_server.py:102] got a new field from ('127.0.0.1', 55434) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:12:01,479 [tornado_server.py:115] answered ('127.0.0.1', 55434)
2018-03-25 18:12:01,480 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:12:01,480 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fa4909b8828>}
2018-03-25 18:12:01,480 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 202, in new_message
    for field_key, field_value in conn.fields:
AttributeError: 'tuple' object has no attribute 'fields'
2018-03-25 18:12:01,483 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fa4909b96a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 202, in new_message
    for field_key, field_value in conn.fields:
AttributeError: 'tuple' object has no attribute 'fields'
2018-03-25 18:12:01,485 [tornado_server.py:129] client quit ('127.0.0.1', 55434) - valera01
2018-03-25 18:13:25,376 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:13:25,378 [tornado_server.py:183] connection notification app started
2018-03-25 18:13:33,722 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56200)
2018-03-25 18:13:35,624 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55446)
2018-03-25 18:13:35,625 [tornado_server.py:61] got a new message from ('127.0.0.1', 55446) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:13:35,626 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:13:35,626 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:13:35,627 [tornado_server.py:102] got a new field from ('127.0.0.1', 55446) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:13:35,628 [tornado_server.py:115] answered ('127.0.0.1', 55446)
2018-03-25 18:13:35,629 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:13:35,629 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fc8bbf37860>}
2018-03-25 18:13:35,630 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 202, in new_message
    for field_key, field_value in conn.fields:
ValueError: too many values to unpack (expected 2)
2018-03-25 18:13:35,632 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc8bbf3d6a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 202, in new_message
    for field_key, field_value in conn.fields:
ValueError: too many values to unpack (expected 2)
2018-03-25 18:13:35,634 [tornado_server.py:129] client quit ('127.0.0.1', 55446) - valera01
2018-03-25 18:13:52,906 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:13:52,909 [tornado_server.py:183] connection notification app started
2018-03-25 18:13:55,465 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56204)
2018-03-25 18:13:57,211 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55450)
2018-03-25 18:13:57,213 [tornado_server.py:61] got a new message from ('127.0.0.1', 55450) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:13:57,214 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:13:57,215 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:13:57,216 [tornado_server.py:102] got a new field from ('127.0.0.1', 55450) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:13:57,218 [tornado_server.py:115] answered ('127.0.0.1', 55450)
2018-03-25 18:13:57,218 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:13:57,219 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f5a2f55b860>}
2018-03-25 18:13:57,220 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 206, in new_message
    client_name.encode('ascii'),
AttributeError: 'UUID' object has no attribute 'encode'
2018-03-25 18:13:57,224 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f5a2f5616a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 206, in new_message
    client_name.encode('ascii'),
AttributeError: 'UUID' object has no attribute 'encode'
2018-03-25 18:13:57,225 [tornado_server.py:129] client quit ('127.0.0.1', 55450) - valera01
2018-03-25 18:14:06,489 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:14:06,489 [tornado_server.py:183] connection notification app started
2018-03-25 18:14:06,491 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 34780)
2018-03-25 18:14:06,493 [tornado_server.py:61] got a new message from ('127.0.0.1', 34780) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:14:06,493 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:14:06,493 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:14:06,494 [tornado_server.py:102] got a new field from ('127.0.0.1', 34780) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:14:06,494 [tornado_server.py:115] answered ('127.0.0.1', 34780)
2018-03-25 18:14:06,495 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:14:06,495 [tornado_server.py:195] {'valera01': <tornado_server.Connection object at 0x7f1595bcb198>}
2018-03-25 18:14:06,496 [tornado_server.py:129] client quit ('127.0.0.1', 34780) - valera01
2018-03-25 18:16:28,791 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:16:28,791 [tornado_server.py:183] connection notification app started
2018-03-25 18:16:28,793 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 40726)
2018-03-25 18:16:28,795 [tornado_server.py:61] got a new message from ('127.0.0.1', 40726) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:16:28,795 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:16:28,795 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:16:28,796 [tornado_server.py:102] got a new field from ('127.0.0.1', 40726) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:16:28,797 [tornado_server.py:115] answered ('127.0.0.1', 40726)
2018-03-25 18:16:28,797 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:16:28,797 [tornado_server.py:195] {'valera01': <tornado_server.Connection object at 0x7f66084501d0>}
2018-03-25 18:16:28,798 [tornado_server.py:129] client quit ('127.0.0.1', 40726) - valera01
2018-03-25 18:16:33,072 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:16:33,074 [tornado_server.py:183] connection notification app started
2018-03-25 18:16:35,986 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56220)
2018-03-25 18:16:39,806 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55466)
2018-03-25 18:16:39,807 [tornado_server.py:61] got a new message from ('127.0.0.1', 55466) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:16:39,807 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:16:39,808 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:16:39,808 [tornado_server.py:102] got a new field from ('127.0.0.1', 55466) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:16:39,809 [tornado_server.py:115] answered ('127.0.0.1', 55466)
2018-03-25 18:16:39,810 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:16:39,810 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fafcc866828>}
2018-03-25 18:16:39,810 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 208, in new_message
    field_key.decode('ascii'),
AttributeError: 'str' object has no attribute 'decode'
2018-03-25 18:16:39,813 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fafcc8706a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 208, in new_message
    field_key.decode('ascii'),
AttributeError: 'str' object has no attribute 'decode'
2018-03-25 18:16:39,815 [tornado_server.py:129] client quit ('127.0.0.1', 55466) - valera01
2018-03-25 18:17:10,334 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:17:10,336 [tornado_server.py:183] connection notification app started
2018-03-25 18:17:12,479 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56224)
2018-03-25 18:17:14,569 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55470)
2018-03-25 18:17:14,570 [tornado_server.py:61] got a new message from ('127.0.0.1', 55470) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:17:14,570 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:17:14,571 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:17:14,571 [tornado_server.py:102] got a new field from ('127.0.0.1', 55470) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:17:14,572 [tornado_server.py:115] answered ('127.0.0.1', 55470)
2018-03-25 18:17:14,572 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:17:14,573 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f2968706828>}
2018-03-25 18:17:14,573 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 208, in new_message
    field_key.decode('ascii'),
AttributeError: 'str' object has no attribute 'decode'
2018-03-25 18:17:14,575 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f296870c6a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 208, in new_message
    field_key.decode('ascii'),
AttributeError: 'str' object has no attribute 'decode'
2018-03-25 18:17:14,577 [tornado_server.py:129] client quit ('127.0.0.1', 55470) - valera01
2018-03-25 18:17:25,540 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:17:25,543 [tornado_server.py:183] connection notification app started
2018-03-25 18:17:27,311 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56228)
2018-03-25 18:17:28,993 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55474)
2018-03-25 18:17:28,994 [tornado_server.py:61] got a new message from ('127.0.0.1', 55474) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:17:28,995 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:17:28,995 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:17:28,996 [tornado_server.py:102] got a new field from ('127.0.0.1', 55474) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:17:28,997 [tornado_server.py:115] answered ('127.0.0.1', 55474)
2018-03-25 18:17:28,997 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:17:28,997 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fe39eef4860>}
2018-03-25 18:17:28,998 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 210, in new_message
    field_value.encode('ascii'),
AttributeError: 'tuple' object has no attribute 'encode'
2018-03-25 18:17:29,001 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fe39eefa6a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 210, in new_message
    field_value.encode('ascii'),
AttributeError: 'tuple' object has no attribute 'encode'
2018-03-25 18:17:29,003 [tornado_server.py:129] client quit ('127.0.0.1', 55474) - valera01
2018-03-25 18:17:53,813 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:17:53,815 [tornado_server.py:183] connection notification app started
2018-03-25 18:17:56,122 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56232)
2018-03-25 18:17:57,761 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55478)
2018-03-25 18:17:57,763 [tornado_server.py:61] got a new message from ('127.0.0.1', 55478) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:17:57,764 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:17:57,764 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:17:57,765 [tornado_server.py:102] got a new field from ('127.0.0.1', 55478) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:17:57,767 [tornado_server.py:115] answered ('127.0.0.1', 55478)
2018-03-25 18:17:57,768 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:17:57,768 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f6387970828>}
2018-03-25 18:17:57,770 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    field_value.encode('ascii'),
AttributeError: 'tuple' object has no attribute 'encode'
2018-03-25 18:17:57,773 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f63879766a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    field_value.encode('ascii'),
AttributeError: 'tuple' object has no attribute 'encode'
2018-03-25 18:17:57,775 [tornado_server.py:129] client quit ('127.0.0.1', 55478) - valera01
2018-03-25 18:18:36,512 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:18:36,514 [tornado_server.py:183] connection notification app started
2018-03-25 18:18:38,630 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56242)
2018-03-25 18:18:40,416 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55488)
2018-03-25 18:18:40,417 [tornado_server.py:61] got a new message from ('127.0.0.1', 55488) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:18:40,418 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:18:40,419 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:18:40,419 [tornado_server.py:102] got a new field from ('127.0.0.1', 55488) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:18:40,420 [tornado_server.py:115] answered ('127.0.0.1', 55488)
2018-03-25 18:18:40,421 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:18:40,421 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f63127ca828>}
2018-03-25 18:18:40,422 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    field_value.encode('ascii'),
AttributeError: 'int' object has no attribute 'encode'
2018-03-25 18:18:40,425 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f63127d46a8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    field_value.encode('ascii'),
AttributeError: 'int' object has no attribute 'encode'
2018-03-25 18:18:40,427 [tornado_server.py:129] client quit ('127.0.0.1', 55488) - valera01
2018-03-25 18:20:21,633 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:20:21,635 [tornado_server.py:183] connection notification app started
2018-03-25 18:20:24,103 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56276)
2018-03-25 18:20:26,038 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55524)
2018-03-25 18:20:26,039 [tornado_server.py:61] got a new message from ('127.0.0.1', 55524) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:20:26,040 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:20:26,040 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:20:26,041 [tornado_server.py:102] got a new field from ('127.0.0.1', 55524) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:20:26,042 [tornado_server.py:115] answered ('127.0.0.1', 55524)
2018-03-25 18:20:26,043 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:20:26,043 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fad40eca860>}
2018-03-25 18:20:26,044 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    fstruct.pack('>L', field_value),
NameError: name 'fstruct' is not defined
2018-03-25 18:20:26,047 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fad40ed0620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    fstruct.pack('>L', field_value),
NameError: name 'fstruct' is not defined
2018-03-25 18:20:26,049 [tornado_server.py:129] client quit ('127.0.0.1', 55524) - valera01
2018-03-25 18:20:33,969 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:20:33,972 [tornado_server.py:183] connection notification app started
2018-03-25 18:20:35,515 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56282)
2018-03-25 18:20:37,566 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55528)
2018-03-25 18:20:37,567 [tornado_server.py:61] got a new message from ('127.0.0.1', 55528) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:20:37,567 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:20:37,567 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:20:37,568 [tornado_server.py:102] got a new field from ('127.0.0.1', 55528) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:20:37,569 [tornado_server.py:115] answered ('127.0.0.1', 55528)
2018-03-25 18:20:37,569 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:20:37,569 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f061b66d828>}
2018-03-25 18:20:37,570 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 215, in new_message
    self.stream.write(b''.join(exit_lines))
AttributeError: 'NotifyServer' object has no attribute 'stream'
2018-03-25 18:20:37,572 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7f061b673620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 215, in new_message
    self.stream.write(b''.join(exit_lines))
AttributeError: 'NotifyServer' object has no attribute 'stream'
2018-03-25 18:20:37,573 [tornado_server.py:129] client quit ('127.0.0.1', 55528) - valera01
2018-03-25 18:21:08,711 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:21:08,714 [tornado_server.py:183] connection notification app started
2018-03-25 18:21:10,481 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56286)
2018-03-25 18:21:12,157 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55532)
2018-03-25 18:21:12,158 [tornado_server.py:61] got a new message from ('127.0.0.1', 55532) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:21:12,159 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:21:12,159 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:21:12,159 [tornado_server.py:102] got a new field from ('127.0.0.1', 55532) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:21:12,160 [tornado_server.py:115] answered ('127.0.0.1', 55532)
2018-03-25 18:21:12,161 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:21:12,161 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f192aa24860>}
2018-03-25 18:21:12,162 [tornado_server.py:61] got a new message from ('127.0.0.1', 55532) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:21:12,163 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:21:12,164 [tornado_server.py:102] got a new field from ('127.0.0.1', 55532) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:21:12,164 [tornado_server.py:115] answered ('127.0.0.1', 55532)
2018-03-25 18:21:12,165 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:21:12,165 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f192aa24860>}
2018-03-25 18:21:35,654 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:21:35,656 [tornado_server.py:183] connection notification app started
2018-03-25 18:21:45,146 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56290)
2018-03-25 18:21:47,830 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55536)
2018-03-25 18:21:47,831 [tornado_server.py:61] got a new message from ('127.0.0.1', 55536) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:21:47,832 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:21:47,832 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:21:47,833 [tornado_server.py:102] got a new field from ('127.0.0.1', 55536) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:21:47,834 [tornado_server.py:115] answered ('127.0.0.1', 55536)
2018-03-25 18:21:47,834 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:21:47,835 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fbcbb17a828>}
2018-03-25 18:21:47,836 [tornado_server.py:61] got a new message from ('127.0.0.1', 55536) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:21:47,837 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:21:47,838 [tornado_server.py:102] got a new field from ('127.0.0.1', 55536) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:21:47,839 [tornado_server.py:115] answered ('127.0.0.1', 55536)
2018-03-25 18:21:47,840 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:21:47,840 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fbcbb17a828>}
2018-03-25 18:23:27,927 [tornado_server.py:129] client quit ('127.0.0.1', 55536) - valera01
2018-03-25 18:23:39,231 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55556)
2018-03-25 18:23:39,231 [tornado_server.py:61] got a new message from ('127.0.0.1', 55556) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:23:39,232 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:23:39,232 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:23:39,233 [tornado_server.py:102] got a new field from ('127.0.0.1', 55556) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:23:39,233 [tornado_server.py:115] answered ('127.0.0.1', 55556)
2018-03-25 18:23:39,234 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:23:39,234 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fbcbb17a748>}
2018-03-25 18:23:39,235 [tornado_server.py:61] got a new message from ('127.0.0.1', 55556) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:23:39,236 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:23:39,236 [tornado_server.py:102] got a new field from ('127.0.0.1', 55556) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:23:39,237 [tornado_server.py:115] answered ('127.0.0.1', 55556)
2018-03-25 18:23:39,237 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:23:39,238 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fbcbb17a748>}
2018-03-25 18:25:19,263 [tornado_server.py:129] client quit ('127.0.0.1', 55556) - valera01
2018-03-25 18:26:49,788 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:26:49,790 [tornado_server.py:183] connection notification app started
2018-03-25 18:26:52,106 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56520)
2018-03-25 18:26:54,502 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55766)
2018-03-25 18:26:54,503 [tornado_server.py:61] got a new message from ('127.0.0.1', 55766) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:26:54,504 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:26:54,504 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:26:54,505 [tornado_server.py:102] got a new field from ('127.0.0.1', 55766) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:26:54,506 [tornado_server.py:115] answered ('127.0.0.1', 55766)
2018-03-25 18:26:54,506 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:26:54,507 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f424e23f860>}
2018-03-25 18:26:54,508 [tornado_server.py:61] got a new message from ('127.0.0.1', 55766) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:26:54,509 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:26:54,510 [tornado_server.py:102] got a new field from ('127.0.0.1', 55766) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:26:54,511 [tornado_server.py:115] answered ('127.0.0.1', 55766)
2018-03-25 18:26:54,511 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:26:54,511 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f424e23f860>}
2018-03-25 18:28:34,617 [tornado_server.py:129] client quit ('127.0.0.1', 55766) - valera01
2018-03-25 18:30:32,780 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:30:32,782 [tornado_server.py:183] connection notification app started
2018-03-25 18:30:34,874 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56528)
2018-03-25 18:30:36,728 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 143, in handle_stream
    Connection(stream, address, conns, self.notify_server)
NameError: name 'conns' is not defined
2018-03-25 18:30:53,521 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:30:53,524 [tornado_server.py:183] connection notification app started
2018-03-25 18:30:55,847 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56532)
2018-03-25 18:30:57,900 [tcpserver.py:300] Error in connection callback
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/tcpserver.py", line 295, in _handle_connection
    future = self.handle_stream(stream, address)
  File "tornado_server.py", line 143, in handle_stream
    Connection(stream, address, client_connections, self.notify_server)
NameError: name 'client_connections' is not defined
2018-03-25 18:31:08,875 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:31:08,877 [tornado_server.py:183] connection notification app started
2018-03-25 18:31:10,530 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56536)
2018-03-25 18:31:12,416 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55782)
2018-03-25 18:31:12,417 [tornado_server.py:61] got a new message from ('127.0.0.1', 55782) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:31:12,417 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:31:12,418 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:31:12,418 [tornado_server.py:102] got a new field from ('127.0.0.1', 55782) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:31:12,419 [tornado_server.py:115] answered ('127.0.0.1', 55782)
2018-03-25 18:31:12,419 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:31:12,419 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fc660597828>}
2018-03-25 18:31:12,420 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    exit_lines.append(b''.join(buff))
UnboundLocalError: local variable 'exit_lines' referenced before assignment
2018-03-25 18:31:12,422 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fc6605a0620>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 117, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 211, in new_message
    exit_lines.append(b''.join(buff))
UnboundLocalError: local variable 'exit_lines' referenced before assignment
2018-03-25 18:31:12,423 [tornado_server.py:129] client quit ('127.0.0.1', 55782) - valera01
2018-03-25 18:31:36,682 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:31:36,685 [tornado_server.py:183] connection notification app started
2018-03-25 18:31:38,647 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56540)
2018-03-25 18:31:40,313 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55786)
2018-03-25 18:31:40,315 [tornado_server.py:61] got a new message from ('127.0.0.1', 55786) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:31:40,316 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:31:40,316 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:31:40,317 [tornado_server.py:102] got a new field from ('127.0.0.1', 55786) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:31:40,319 [tornado_server.py:115] answered ('127.0.0.1', 55786)
2018-03-25 18:31:40,319 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:31:40,319 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f7511294860>}
2018-03-25 18:31:40,320 [tornado_server.py:61] got a new message from ('127.0.0.1', 55786) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:31:40,321 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:31:40,322 [tornado_server.py:102] got a new field from ('127.0.0.1', 55786) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:31:40,323 [tornado_server.py:115] answered ('127.0.0.1', 55786)
2018-03-25 18:31:40,323 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:31:40,323 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f7511294860>}
2018-03-25 18:32:22,710 [tornado_server.py:178] notification client quit ('127.0.0.1', 56540) - a5e77a67-25a1-4998-99ba-55a4f11b0282
2018-03-25 18:32:23,141 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56544)
2018-03-25 18:32:23,147 [tornado_server.py:178] notification client quit ('127.0.0.1', 56544) - 8b5e8036-3645-4108-9cba-095171a4841d
2018-03-25 18:32:29,414 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:32:29,417 [tornado_server.py:183] connection notification app started
2018-03-25 18:32:30,950 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55790)
2018-03-25 18:32:30,953 [tornado_server.py:61] got a new message from ('127.0.0.1', 55790) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:32:30,954 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:32:30,955 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:32:30,956 [tornado_server.py:102] got a new field from ('127.0.0.1', 55790) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:32:30,957 [tornado_server.py:115] answered ('127.0.0.1', 55790)
2018-03-25 18:32:30,958 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:32:30,958 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fe981e8f710>}
2018-03-25 18:32:30,959 [tornado_server.py:61] got a new message from ('127.0.0.1', 55790) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:32:30,960 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:32:30,960 [tornado_server.py:102] got a new field from ('127.0.0.1', 55790) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:32:30,961 [tornado_server.py:115] answered ('127.0.0.1', 55790)
2018-03-25 18:32:30,961 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:32:30,962 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7fe981e8f710>}
2018-03-25 18:34:11,068 [tornado_server.py:129] client quit ('127.0.0.1', 55790) - valera01
2018-03-25 18:35:09,833 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:35:09,835 [tornado_server.py:183] connection notification app started
2018-03-25 18:35:12,034 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56552)
2018-03-25 18:35:14,208 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55798)
2018-03-25 18:35:14,210 [tornado_server.py:61] got a new message from ('127.0.0.1', 55798) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:35:14,211 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:35:14,211 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:35:14,213 [tornado_server.py:102] got a new field from ('127.0.0.1', 55798) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:35:14,214 [tornado_server.py:115] answered ('127.0.0.1', 55798)
2018-03-25 18:35:14,215 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:35:14,215 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f0e18cfe860>}
2018-03-25 18:35:14,218 [tornado_server.py:61] got a new message from ('127.0.0.1', 55798) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:35:14,218 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:35:14,219 [tornado_server.py:102] got a new field from ('127.0.0.1', 55798) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:35:14,220 [tornado_server.py:115] answered ('127.0.0.1', 55798)
2018-03-25 18:35:14,220 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:35:14,220 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f0e18cfe860>}
2018-03-25 18:35:53,425 [tornado_server.py:178] notification client quit ('127.0.0.1', 56552) - 978c0d92-d4fa-4958-bfa5-ed047c1b47fe
2018-03-25 18:35:57,906 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56556)
2018-03-25 18:36:33,977 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:36:33,979 [tornado_server.py:183] connection notification app started
2018-03-25 18:36:35,415 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56558)
2018-03-25 18:36:37,067 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55804)
2018-03-25 18:36:37,070 [tornado_server.py:61] got a new message from ('127.0.0.1', 55804) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:36:37,071 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:36:37,072 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:36:37,073 [tornado_server.py:102] got a new field from ('127.0.0.1', 55804) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:36:37,074 [tornado_server.py:115] answered ('127.0.0.1', 55804)
2018-03-25 18:36:37,074 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:36:37,075 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f4a82f81828>}
2018-03-25 18:36:37,076 [tornado_server.py:61] got a new message from ('127.0.0.1', 55804) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:36:37,076 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:36:37,077 [tornado_server.py:102] got a new field from ('127.0.0.1', 55804) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:36:37,078 [tornado_server.py:115] answered ('127.0.0.1', 55804)
2018-03-25 18:36:37,078 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:36:37,079 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f4a82f81828>}
2018-03-25 18:37:31,688 [tornado_server.py:137] connection monitoring app started
2018-03-25 18:37:31,691 [tornado_server.py:183] connection notification app started
2018-03-25 18:37:33,615 [tornado_server.py:151] receive a new notify connection from ('127.0.0.1', 56562)
2018-03-25 18:37:35,423 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55808)
2018-03-25 18:37:35,425 [tornado_server.py:61] got a new message from ('127.0.0.1', 55808) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:37:35,426 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:37:35,427 [tornado_server.py:80] valera01 authenticated

2018-03-25 18:37:35,428 [tornado_server.py:102] got a new field from ('127.0.0.1', 55808) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:37:35,429 [tornado_server.py:115] answered ('127.0.0.1', 55808)
2018-03-25 18:37:35,430 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:37:35,431 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f69cc158828>}
2018-03-25 18:37:35,433 [tornado_server.py:61] got a new message from ('127.0.0.1', 55808) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:37:35,434 [tornado_server.py:74] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:37:35,435 [tornado_server.py:102] got a new field from ('127.0.0.1', 55808) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:37:35,436 [tornado_server.py:115] answered ('127.0.0.1', 55808)
2018-03-25 18:37:35,436 [tornado_server.py:194] notifying all subscribers
2018-03-25 18:37:35,436 [tornado_server.py:195] {'valera01': <__main__.Connection object at 0x7f69cc158828>}
2018-03-25 18:39:15,514 [tornado_server.py:129] client quit ('127.0.0.1', 55808) - valera01
2018-03-25 18:51:29,753 [tornado_server.py:159] connection monitoring app started
2018-03-25 18:51:29,756 [tornado_server.py:205] connection notification app started
2018-03-25 18:51:31,679 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 56636)
2018-03-25 18:51:33,497 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55882)
2018-03-25 18:51:33,499 [tornado_server.py:80] got a new message from ('127.0.0.1', 55882) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:51:33,499 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:51:33,500 [tornado_server.py:99] valera01 authenticated

2018-03-25 18:51:33,500 [tornado_server.py:124] got a new field from ('127.0.0.1', 55882) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:51:33,501 [tornado_server.py:137] answered ('127.0.0.1', 55882)
2018-03-25 18:51:33,502 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f563b8a0908>}
2018-03-25 18:51:33,504 [tornado_server.py:80] got a new message from ('127.0.0.1', 55882) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:51:33,504 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:51:33,505 [tornado_server.py:124] got a new field from ('127.0.0.1', 55882) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:51:33,506 [tornado_server.py:137] answered ('127.0.0.1', 55882)
2018-03-25 18:51:33,506 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f563b8a0908>}
2018-03-25 18:53:13,591 [tornado_server.py:151] client quit ('127.0.0.1', 55882) - valera01
2018-03-25 18:54:47,608 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 56666)
2018-03-25 18:54:50,512 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55912)
2018-03-25 18:54:50,513 [tornado_server.py:80] got a new message from ('127.0.0.1', 55912) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:54:50,513 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:54:50,514 [tornado_server.py:99] valera01 authenticated

2018-03-25 18:54:50,515 [tornado_server.py:124] got a new field from ('127.0.0.1', 55912) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:54:50,515 [tornado_server.py:137] answered ('127.0.0.1', 55912)
2018-03-25 18:54:50,516 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f563b8a0ac8>}
2018-03-25 18:54:50,518 [tornado_server.py:80] got a new message from ('127.0.0.1', 55912) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:54:50,518 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:54:50,519 [tornado_server.py:124] got a new field from ('127.0.0.1', 55912) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:54:50,520 [tornado_server.py:137] answered ('127.0.0.1', 55912)
2018-03-25 18:54:50,520 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f563b8a0ac8>}
2018-03-25 18:55:11,701 [tornado_server.py:151] client quit ('127.0.0.1', 55912) - valera01
2018-03-25 18:55:12,392 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 55914)
2018-03-25 18:55:12,393 [tornado_server.py:80] got a new message from ('127.0.0.1', 55914) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:55:12,393 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:55:12,394 [tornado_server.py:99] valera01 authenticated

2018-03-25 18:55:12,394 [tornado_server.py:124] got a new field from ('127.0.0.1', 55914) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:55:12,395 [tornado_server.py:137] answered ('127.0.0.1', 55914)
2018-03-25 18:55:12,396 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f563b8a0a90>}
2018-03-25 18:55:12,397 [tornado_server.py:80] got a new message from ('127.0.0.1', 55914) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 18:55:12,398 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 18:55:12,399 [tornado_server.py:124] got a new field from ('127.0.0.1', 55914) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 18:55:12,399 [tornado_server.py:137] answered ('127.0.0.1', 55914)
2018-03-25 18:55:12,400 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f563b8a0a90>}
2018-03-25 19:49:41,846 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:49:41,847 [tornado_server.py:205] connection notification app started
2018-03-25 19:49:41,848 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 34826)
2018-03-25 19:49:41,851 [tornado_server.py:80] got a new message from ('127.0.0.1', 34826) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:49:41,852 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:49:41,852 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:49:41,852 [tornado_server.py:124] got a new field from ('127.0.0.1', 34826) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:49:41,853 [tornado_server.py:137] answered ('127.0.0.1', 34826)
2018-03-25 19:49:41,854 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fd902b6b390>}
2018-03-25 19:49:41,855 [tornado_server.py:151] client quit ('127.0.0.1', 34826) - valera01
2018-03-25 19:49:41,857 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:49:41,857 [tornado_server.py:205] connection notification app started
2018-03-25 19:49:41,858 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 58886)
2018-03-25 19:49:41,860 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 57064)
2018-03-25 19:49:41,861 [tornado_server.py:80] got a new message from ('127.0.0.1', 58886) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:49:41,861 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:49:41,862 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:49:41,862 [tornado_server.py:124] got a new field from ('127.0.0.1', 58886) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:49:41,863 [tornado_server.py:137] answered ('127.0.0.1', 58886)
2018-03-25 19:49:41,863 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fd902b6b550>}
2018-03-25 19:50:55,883 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:50:55,884 [tornado_server.py:205] connection notification app started
2018-03-25 19:50:55,885 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53676)
2018-03-25 19:50:55,888 [tornado_server.py:80] got a new message from ('127.0.0.1', 53676) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:50:55,888 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:50:55,889 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:50:55,889 [tornado_server.py:124] got a new field from ('127.0.0.1', 53676) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:50:55,890 [tornado_server.py:137] answered ('127.0.0.1', 53676)
2018-03-25 19:50:55,890 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f20cf7f9390>}
2018-03-25 19:50:55,892 [tornado_server.py:151] client quit ('127.0.0.1', 53676) - valera01
2018-03-25 19:50:55,894 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:50:55,895 [tornado_server.py:205] connection notification app started
2018-03-25 19:50:55,896 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 57076)
2018-03-25 19:50:55,897 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 39864)
2018-03-25 19:50:55,899 [tornado_server.py:80] got a new message from ('127.0.0.1', 57076) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:50:55,900 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:50:55,900 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:50:55,900 [tornado_server.py:124] got a new field from ('127.0.0.1', 57076) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:50:55,901 [tornado_server.py:137] answered ('127.0.0.1', 57076)
2018-03-25 19:50:55,901 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f20cf7f9550>}
2018-03-25 19:52:16,434 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:16,435 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:16,437 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56524)
2018-03-25 19:52:16,439 [tornado_server.py:80] got a new message from ('127.0.0.1', 56524) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:16,440 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:16,440 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:16,441 [tornado_server.py:124] got a new field from ('127.0.0.1', 56524) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:16,441 [tornado_server.py:137] answered ('127.0.0.1', 56524)
2018-03-25 19:52:16,442 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f3019da32e8>}
2018-03-25 19:52:16,444 [tornado_server.py:151] client quit ('127.0.0.1', 56524) - valera01
2018-03-25 19:52:16,446 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:16,446 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:16,447 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56990)
2018-03-25 19:52:16,449 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 34240)
2018-03-25 19:52:16,450 [tornado_server.py:80] got a new message from ('127.0.0.1', 56990) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:16,451 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:16,451 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:16,452 [tornado_server.py:124] got a new field from ('127.0.0.1', 56990) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:16,452 [tornado_server.py:137] answered ('127.0.0.1', 56990)
2018-03-25 19:52:16,453 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f3019da34a8>}
2018-03-25 19:52:34,009 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:34,010 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:34,012 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 52990)
2018-03-25 19:52:34,014 [tornado_server.py:80] got a new message from ('127.0.0.1', 52990) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:34,015 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:34,015 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:34,016 [tornado_server.py:124] got a new field from ('127.0.0.1', 52990) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:34,016 [tornado_server.py:137] answered ('127.0.0.1', 52990)
2018-03-25 19:52:34,017 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fb6c838f2e8>}
2018-03-25 19:52:34,019 [tornado_server.py:151] client quit ('127.0.0.1', 52990) - valera01
2018-03-25 19:52:34,021 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:34,021 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:34,022 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 53878)
2018-03-25 19:52:34,024 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 59820)
2018-03-25 19:52:34,025 [tornado_server.py:80] got a new message from ('127.0.0.1', 53878) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:34,026 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:34,026 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:34,027 [tornado_server.py:124] got a new field from ('127.0.0.1', 53878) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:34,028 [tornado_server.py:137] answered ('127.0.0.1', 53878)
2018-03-25 19:52:34,028 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fb6c838f4a8>}
2018-03-25 19:52:34,030 [tornado_server.py:151] client quit ('127.0.0.1', 53878) - valera01
2018-03-25 19:52:43,391 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:43,392 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:43,394 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 36294)
2018-03-25 19:52:43,397 [tornado_server.py:80] got a new message from ('127.0.0.1', 36294) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:43,397 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:43,397 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:43,398 [tornado_server.py:124] got a new field from ('127.0.0.1', 36294) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:43,399 [tornado_server.py:137] answered ('127.0.0.1', 36294)
2018-03-25 19:52:43,399 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f81d6e542e8>}
2018-03-25 19:52:43,400 [tornado_server.py:151] client quit ('127.0.0.1', 36294) - valera01
2018-03-25 19:52:43,402 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:43,402 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:43,403 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 36588)
2018-03-25 19:52:43,405 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 58758)
2018-03-25 19:52:43,406 [tornado_server.py:80] got a new message from ('127.0.0.1', 36588) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:43,407 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:43,407 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:43,408 [tornado_server.py:124] got a new field from ('127.0.0.1', 36588) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:43,408 [tornado_server.py:137] answered ('127.0.0.1', 36588)
2018-03-25 19:52:43,409 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f81d6e544a8>}
2018-03-25 19:52:57,405 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:57,406 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:57,408 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 58824)
2018-03-25 19:52:57,410 [tornado_server.py:80] got a new message from ('127.0.0.1', 58824) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:57,411 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:57,411 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:57,412 [tornado_server.py:124] got a new field from ('127.0.0.1', 58824) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:57,412 [tornado_server.py:137] answered ('127.0.0.1', 58824)
2018-03-25 19:52:57,413 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fd00ca2f2e8>}
2018-03-25 19:52:57,415 [tornado_server.py:151] client quit ('127.0.0.1', 58824) - valera01
2018-03-25 19:52:57,416 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:52:57,417 [tornado_server.py:205] connection notification app started
2018-03-25 19:52:57,418 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 45840)
2018-03-25 19:52:57,420 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 60948)
2018-03-25 19:52:57,421 [tornado_server.py:80] got a new message from ('127.0.0.1', 45840) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:52:57,422 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:52:57,422 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:52:57,422 [tornado_server.py:124] got a new field from ('127.0.0.1', 45840) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:52:57,423 [tornado_server.py:137] answered ('127.0.0.1', 45840)
2018-03-25 19:52:57,424 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fd00ca2f4a8>}
2018-03-25 19:53:08,962 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:53:08,962 [tornado_server.py:205] connection notification app started
2018-03-25 19:53:08,963 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 36218)
2018-03-25 19:53:08,966 [tornado_server.py:80] got a new message from ('127.0.0.1', 36218) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:53:08,966 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:53:08,966 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:53:08,967 [tornado_server.py:124] got a new field from ('127.0.0.1', 36218) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:53:08,967 [tornado_server.py:137] answered ('127.0.0.1', 36218)
2018-03-25 19:53:08,968 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fd76767f2b0>}
2018-03-25 19:53:08,969 [tornado_server.py:151] client quit ('127.0.0.1', 36218) - valera01
2018-03-25 19:53:08,971 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:53:08,971 [tornado_server.py:205] connection notification app started
2018-03-25 19:53:08,972 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 39456)
2018-03-25 19:53:08,973 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 38740)
2018-03-25 19:53:08,975 [tornado_server.py:80] got a new message from ('127.0.0.1', 39456) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:53:08,975 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:53:08,975 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:53:08,976 [tornado_server.py:124] got a new field from ('127.0.0.1', 39456) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:53:08,977 [tornado_server.py:137] answered ('127.0.0.1', 39456)
2018-03-25 19:53:08,977 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7fd76767f470>}
2018-03-25 19:53:42,769 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:53:42,770 [tornado_server.py:205] connection notification app started
2018-03-25 19:53:42,772 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 48288)
2018-03-25 19:53:42,774 [tornado_server.py:80] got a new message from ('127.0.0.1', 48288) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:53:42,775 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:53:42,775 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:53:42,776 [tornado_server.py:124] got a new field from ('127.0.0.1', 48288) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:53:42,777 [tornado_server.py:137] answered ('127.0.0.1', 48288)
2018-03-25 19:53:42,777 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f9663caa2e8>}
2018-03-25 19:53:42,779 [tornado_server.py:151] client quit ('127.0.0.1', 48288) - valera01
2018-03-25 19:53:42,780 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:53:42,781 [tornado_server.py:205] connection notification app started
2018-03-25 19:53:42,782 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 51002)
2018-03-25 19:53:42,783 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 39148)
2018-03-25 19:53:42,784 [tornado_server.py:80] got a new message from ('127.0.0.1', 39148) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:53:42,785 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:53:42,785 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:53:42,785 [tornado_server.py:124] got a new field from ('127.0.0.1', 39148) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:53:42,786 [tornado_server.py:137] answered ('127.0.0.1', 39148)
2018-03-25 19:53:42,786 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f9663caa5c0>}
2018-03-25 19:54:00,918 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:54:00,919 [tornado_server.py:205] connection notification app started
2018-03-25 19:54:00,921 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 46224)
2018-03-25 19:54:00,923 [tornado_server.py:80] got a new message from ('127.0.0.1', 46224) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:54:00,924 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:54:00,924 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:54:00,925 [tornado_server.py:124] got a new field from ('127.0.0.1', 46224) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:54:00,925 [tornado_server.py:137] answered ('127.0.0.1', 46224)
2018-03-25 19:54:00,926 [tornado_server.py:216] {'valera01': <tornado_server.Connection object at 0x7f95898bf198>}
2018-03-25 19:54:00,928 [tornado_server.py:151] client quit ('127.0.0.1', 46224) - valera01
2018-03-25 19:57:27,197 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:57:27,199 [tornado_server.py:205] connection notification app started
2018-03-25 19:57:29,047 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56302)
2018-03-25 19:57:29,050 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 57060)
2018-03-25 19:57:29,053 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 151, in _on_close
    logger.info('client quit %s - %s', self.address, self.uid)
AttributeError: 'Connection' object has no attribute 'uid'
2018-03-25 19:57:29,056 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fb043df17b8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 151, in _on_close
    logger.info('client quit %s - %s', self.address, self.uid)
AttributeError: 'Connection' object has no attribute 'uid'
2018-03-25 19:57:29,058 [tornado_server.py:200] notification client quit ('127.0.0.1', 57060) - ed869739-a8e9-4838-97e4-915194f12558
2018-03-25 19:57:39,370 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56306)
2018-03-25 19:57:39,372 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 57064)
2018-03-25 19:57:39,373 [tornado_server.py:80] got a new message from ('127.0.0.1', 56306) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:57:39,374 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:57:39,375 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:57:39,376 [tornado_server.py:124] got a new field from ('127.0.0.1', 56306) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:57:39,377 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 133, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 147, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 19:57:39,379 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fb04264e0d0>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 133, in _on_read_fields
    self._read_more()
  File "tornado_server.py", line 147, in _read_more
    self.stream.write(self.response_msg, self._on_write_complete)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 19:57:39,380 [tornado_server.py:200] notification client quit ('127.0.0.1', 57064) - 63b61800-aa69-4362-872f-8e95ee378d75
2018-03-25 19:57:39,381 [tornado_server.py:151] client quit ('127.0.0.1', 56306) - valera01
2018-03-25 19:58:13,123 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56314)
2018-03-25 19:58:13,124 [tornado_server.py:80] got a new message from ('127.0.0.1', 56314) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:58:13,125 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:58:13,126 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:58:13,127 [tornado_server.py:124] got a new field from ('127.0.0.1', 56314) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:58:13,128 [tornado_server.py:137] answered ('127.0.0.1', 56314)
2018-03-25 19:58:13,129 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7fb0445f5668>}
2018-03-25 19:58:13,130 [iostream.py:703] Uncaught exception, closing connection.
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 139, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 239, in new_message
    client_interface.stream.write(response)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 19:58:13,132 [ioloop.py:793] Exception in callback functools.partial(<function wrap.<locals>.null_wrapper at 0x7fb043df17b8>)
Traceback (most recent call last):
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/ioloop.py", line 760, in _run_callback
    ret = callback()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 700, in wrapper
    return callback(*args)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/stack_context.py", line 276, in null_wrapper
    return fn(*args, **kwargs)
  File "tornado_server.py", line 139, in _on_write_complete
    self.notify_server.new_message()
  File "tornado_server.py", line 239, in new_message
    client_interface.stream.write(response)
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 525, in write
    self._check_closed()
  File "/home/usr/dev/tornado_task/venv/lib/python3.5/site-packages/tornado/iostream.py", line 1058, in _check_closed
    raise StreamClosedError(real_error=self.error)
tornado.iostream.StreamClosedError: Stream is closed
2018-03-25 19:58:13,133 [tornado_server.py:151] client quit ('127.0.0.1', 56314) - valera01
2018-03-25 19:58:16,038 [tornado_server.py:159] connection monitoring app started
2018-03-25 19:58:16,040 [tornado_server.py:205] connection notification app started
2018-03-25 19:58:17,561 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56316)
2018-03-25 19:58:17,563 [tornado_server.py:80] got a new message from ('127.0.0.1', 56316) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:58:17,563 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:58:17,564 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:58:17,565 [tornado_server.py:124] got a new field from ('127.0.0.1', 56316) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:58:17,566 [tornado_server.py:137] answered ('127.0.0.1', 56316)
2018-03-25 19:58:17,566 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f3d3dec87f0>}
2018-03-25 19:58:17,567 [tornado_server.py:80] got a new message from ('127.0.0.1', 56316) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:58:17,568 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:58:17,568 [tornado_server.py:124] got a new field from ('127.0.0.1', 56316) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:58:17,569 [tornado_server.py:137] answered ('127.0.0.1', 56316)
2018-03-25 19:58:17,569 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f3d3dec87f0>}
2018-03-25 19:58:28,549 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 57074)
2018-03-25 19:58:40,718 [tornado_server.py:151] client quit ('127.0.0.1', 56316) - valera01
2018-03-25 19:58:41,203 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56320)
2018-03-25 19:58:41,204 [tornado_server.py:80] got a new message from ('127.0.0.1', 56320) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:58:41,206 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:58:41,206 [tornado_server.py:99] valera01 authenticated

2018-03-25 19:58:41,207 [tornado_server.py:124] got a new field from ('127.0.0.1', 56320) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:58:41,208 [tornado_server.py:137] answered ('127.0.0.1', 56320)
2018-03-25 19:58:41,208 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f3d3dec87b8>}
2018-03-25 19:58:41,210 [tornado_server.py:80] got a new message from ('127.0.0.1', 56320) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 19:58:41,211 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 19:58:41,211 [tornado_server.py:124] got a new field from ('127.0.0.1', 56320) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 19:58:41,212 [tornado_server.py:137] answered ('127.0.0.1', 56320)
2018-03-25 19:58:41,213 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7f3d3dec87b8>}
2018-03-25 20:00:18,755 [tornado_server.py:159] connection monitoring app started
2018-03-25 20:00:18,759 [tornado_server.py:205] connection notification app started
2018-03-25 20:00:34,011 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 57106)
2018-03-25 20:00:36,606 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56352)
2018-03-25 20:00:36,608 [tornado_server.py:80] got a new message from ('127.0.0.1', 56352) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 20:00:36,609 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 20:00:36,610 [tornado_server.py:99] valera01 authenticated

2018-03-25 20:00:36,611 [tornado_server.py:124] got a new field from ('127.0.0.1', 56352) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 20:00:36,612 [tornado_server.py:137] answered ('127.0.0.1', 56352)
2018-03-25 20:00:36,613 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7fefe6300940>}
2018-03-25 20:00:40,812 [tornado_server.py:151] client quit ('127.0.0.1', 56352) - valera01
2018-03-25 20:00:41,546 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56354)
2018-03-25 20:00:41,547 [tornado_server.py:80] got a new message from ('127.0.0.1', 56354) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 20:00:41,548 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 20:00:41,548 [tornado_server.py:99] valera01 authenticated

2018-03-25 20:00:41,549 [tornado_server.py:124] got a new field from ('127.0.0.1', 56354) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 20:00:41,550 [tornado_server.py:137] answered ('127.0.0.1', 56354)
2018-03-25 20:00:41,550 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7fefe6300860>}
2018-03-25 20:00:46,703 [tornado_server.py:151] client quit ('127.0.0.1', 56354) - valera01
2018-03-25 20:00:47,291 [tornado_server.py:48] receive a new connection from ('127.0.0.1', 56360)
2018-03-25 20:00:47,293 [tornado_server.py:80] got a new message from ('127.0.0.1', 56360) - b'\x01\x00\x01valera01\x02\x01'
2018-03-25 20:00:47,293 [tornado_server.py:93] msg_num: 1, uid: valera01, status: 2, fields_num: 1
2018-03-25 20:00:47,294 [tornado_server.py:99] valera01 authenticated

2018-03-25 20:00:47,294 [tornado_server.py:124] got a new field from ('127.0.0.1', 56360) - b'~~~~~~~1\x00\x00\x00\x01'
2018-03-25 20:00:47,295 [tornado_server.py:137] answered ('127.0.0.1', 56360)
2018-03-25 20:00:47,296 [tornado_server.py:216] {'valera01': <__main__.Connection object at 0x7fefe6300940>}
2018-03-25 20:00:58,339 [tornado_server.py:200] notification client quit ('127.0.0.1', 57106) - 6eed62c1-8429-419d-8975-032ebdc7a74e
2018-03-25 20:01:02,462 [tornado_server.py:173] receive a new notify connection from ('127.0.0.1', 57118)
